/* build date: 2016-07-19T14:51:16+0800 */ var Mustache;(function(e){typeof module!="undefined"&&module.exports?module.exports=e:typeof define=="function"?define("mustache",e):Mustache=e})(function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.parent=t,this.clearCache()}function v(){this.clearCache()}function m(e){var t=e[3],n=t,r;while((r=e[4])&&r.length)e=r[r.length-1],n=e[3];return[t,n]}function g(e){function n(e,n,r){if(!t[e]){var i=g(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="",o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice.apply(i,m(o)),s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1]}}return s}}function y(e){var t=[],n=t,r=[],i,s;for(var o=0;o<e.length;++o){i=e[o];switch(i[0]){case"#":case"^":i[4]=[],r.push(i),n.push(i),n=i[4];break;case"/":if(r.length===0)throw new Error("Unopened section: "+i[1]);s=r.pop();if(s[1]!==i[1])throw new Error("Unclosed section: "+s[1]);r.length>0?n=r[r.length-1][4]:n=t;break;default:n.push(i)}}s=r.pop();if(s)throw new Error("Unclosed section: "+s[1]);return t}function b(e){var t,n;for(var r=0;r<e.length;++r)t=e[r],n&&n[0]==="text"&&t[0]==="text"?(n[1]+=t[1],n[3]=t[3],e.splice(r--,1)):n=t}function w(e){if(e.length!==2)throw new Error("Invalid tags: "+e.join(" "));return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js",e.version="0.7.0",e.tags=["{{","}}"],e.Scanner=p,e.Context=d,e.Writer=v;var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h,p.prototype.eos=function(){return this.tail===""},p.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},d.make=function(e){return e instanceof d?e:new d(e)},d.prototype.clearCache=function(){this._cache={}},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e===".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this._cache={},this._partialCache={}},v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},v.prototype.compileTokens=function(e,t){var n=g(e),r=this;return function(e,i){if(i)if(typeof i=="function")r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,d.make(e),t)}},v.prototype.render=function(e,t,n){return this.compile(e)(t,n)},v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o)s+=r(this,t.push(i[o]));return s}return i?r(this,t.push(i)):"";case"function":var a=this,l=function(e){return a.render(e,t)};return i.call(t.view,n,l)||"";default:if(i)return r(this,t)}return""},v.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||f(r)&&r.length===0?n(this,t):""},v.prototype._partial=function(e,t){!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},v.prototype._name=function(e,t){var n=t.lookup(e);return typeof n=="function"&&(n=n.call(t.view)),n==null?"":String(n)},v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))},e.parse=function(r,u){function g(){if(v&&!m)while(d.length)h.splice(d.pop(),1);else d=[];v=!1,m=!1}u=u||e.tags;var f=w(u),c=new p(r),h=[],d=[],v=!1,m=!1,E,S,x,T;while(!c.eos()){E=c.pos,x=c.scanUntil(f[0]);if(x)for(var N=0,C=x.length;N<C;++N)T=x.charAt(N),a(T)?d.push(h.length):m=!0,h.push(["text",T,E,E+1]),E+=1,T==="\n"&&g();E=c.pos;if(!c.scan(f[0]))break;v=!0,S=c.scan(o)||"name",c.scan(t);if(S==="=")x=c.scanUntil(i),c.scan(i),c.scanUntil(f[1]);else if(S==="{"){var k=new RegExp("\\s*"+l("}"+u[1]));x=c.scanUntil(k),c.scan(s),c.scanUntil(f[1]),S="&"}else x=c.scanUntil(f[1]);if(!c.scan(f[1]))throw new Error("Unclosed tag at "+c.pos);h.push([S,x,E,c.pos]);if(S==="name"||S==="{"||S==="&")m=!0;S==="="&&(u=x.split(n),f=w(u))}return b(h),y(h)};var E=new v;return e.clearCache=function(){return E.clearCache()},e.compile=function(e,t){return E.compile(e,t)},e.compilePartial=function(e,t,n){return E.compilePartial(e,t,n)},e.compileTokens=function(e,t){return E.compileTokens(e,t)},e.render=function(e,t,n){return E.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)},e}()),define("dialog",["mustache","jquery"],function(e){function n(e){this.init(e)}var t='<div class="page-dialog-wrapper"><div class="page-dialog {{type}}"><div class="title"><span class="text">{{title}}</span></div><div class="cont"><p class="detail"><span class="icon"></span><span class="text">{{{content}}}</span></p><div class="operation">{{#hasConfirmBtn}}<a class="btn confirm" href="javascript:;">确定</a>{{/hasConfirmBtn}}{{#hasCancelBtn}}<a class="btn secondary cancel" href="javascript:;">取消</a>{{/hasCancelBtn}}</div></div></div></div>';return n.prototype={init:function(e){var t=this;t.config(e),t.create()},config:function(e){var t=this;t.types=["info","error","ok","warn"],t.data={},t.data.type=typeof e.type=="string"?e.type:"info",t.data.title=function(e){var n;if(typeof e=="string"&&e!=="")n=e;else switch(t.type){case"ok":n="成功";break;case"error":n="错误";break;case"warn":n="警告";break;default:n="信息"}return n}(e.title),t.data.content=typeof e.content=="string"?e.content:"来自页面的信息",t.callback={},t.callback.confirm=typeof e.onConfirm=="function"?e.onConfirm:function(){},t.callback.cancel=typeof e.onCancel=="function"?e.onCancel:function(){},t.data.hasConfirmBtn=typeof e.confirmBtn=="boolean"?e.confirmBtn:!0,t.data.hasCancelBtn=typeof e.cancelBtn=="boolean"?e.cancelBtn:!1},create:function(){var n=this;n.dialog=$(e.render(t,n.data)),$("body").append(n.dialog);var r=n.dialog.find(".page-dialog");r.css({marginTop:-(r.outerHeight()/2),marginLeft:-(r.outerWidth()/2)}),n.dialog.on("click",".operation .confirm",function(){n.dialog.remove(),n.callback.confirm()}),n.dialog.on("click",".operation .cancel",function(){n.dialog.remove(),n.callback.cancel()}),n.dialog.find(".operation .confirm").focus(),n.dialog.find(".operation .confirm").blur()}},n});var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),define("ajax",["dialog","json2"],function(e){var t={zh:{100:"未知错误",101:"被请求的页面需要用户名和密码",102:"请求未完成,服务器遇到不可预知的情况"},en:{100:"Unknown error",101:"The requested page needs a username and password",102:"The request was not completed, the server encounters unpredictable circumstances"}},n=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},r=t[globalConfig.context.lang||"zh"],i={cache:!0,data:{},timeout:6e4,dataType:"json",type:"get",traditional:!1,jsonp:"callback",jsonpCallback:""};return{invoke:function(e){var t=this,n=$.extend({},i,e||{}),r=$.ajax({url:n.url,contentType:n.contentType,type:n.type,cache:n.cache,data:n.data,timeout:n.timeout,dataType:n.dataType,beforeSend:n.beforeSend,complete:n.complete,traditional:n.traditional,jsonp:n.jsonp,jsonpCallback:n.jsonpCallback,success:function(e){t.success(n,e)},error:function(e){t.error(n,e)}});return r},success:function(e,t){var n=this,t=t||{};typeof e.success=="function"&&e.success.apply(n,[t])},error:function(t,i){var s=this,o=i.responseText,u=i.status;switch(u){case 0:break;case 401:new e({type:"error",content:r[101],onConfirm:function(){location.href=location.href}});break;case 611:var a=JSON.parse(o);window.open(a.message,"_self");break;default:i=n(o)?JSON.parse(o):{message:r[100]},typeof t.failed=="function"?t.failed.apply(s,[i,u]):new e({type:"error",content:i.message})}}}}),"bind"in Function.prototype||(Function.prototype.bind=function(e){var t=this;if(arguments.length<=1)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,arguments.length===0?n:n.concat(Array.prototype.slice.call(arguments)))}}),define("ieShims",function(){}),function(){function e(e){function a(i,a){var l,h,m=i==window,g=a&&a.message!==undefined?a.message:undefined;a=e.extend({},e.blockUI.defaults,a||{});if(a.ignoreIfBlocked&&e(i).data("blockUI.isBlocked"))return;a.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,a.overlayCSS||{}),l=e.extend({},e.blockUI.defaults.css,a.css||{}),a.onOverlayClick&&(a.overlayCSS.cursor="pointer"),h=e.extend({},e.blockUI.defaults.themedCSS,a.themedCSS||{}),g=g===undefined?a.message:g,m&&o&&f(window,{fadeOut:0});if(g&&typeof g!="string"&&(g.parentNode||g.jquery)){var y=g.jquery?g[0]:g,b={};e(i).data("blockUI.history",b),b.el=y,b.parent=y.parentNode,b.display=y.style.display,b.position=y.style.position,b.parent&&b.parent.removeChild(y)}e(i).data("blockUI.onUnblock",a.onUnblock);var w=a.baseZ,E,S,x,T;n||a.forceIframe?E=e('<iframe class="blockUI" style="z-index:'+w++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+a.iframeSrc+'"></iframe>'):E=e('<div class="blockUI" style="display:none"></div>'),a.theme?S=e('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+w++ +';display:none"></div>'):S=e('<div class="blockUI blockOverlay" style="z-index:'+w++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),a.theme&&m?(T='<div class="blockUI '+a.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:fixed">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):a.theme?(T='<div class="blockUI '+a.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:absolute">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):m?T='<div class="blockUI '+a.blockMsgClass+' blockPage" style="z-index:'+(w+10)+';display:none;position:fixed"></div>':T='<div class="blockUI '+a.blockMsgClass+' blockElement" style="z-index:'+(w+10)+';display:none;position:absolute"></div>',x=e(T),g&&(a.theme?(x.css(h),x.addClass("ui-widget-content")):x.css(l)),a.theme||S.css(a.overlayCSS),S.css("position",m?"fixed":"absolute"),(n||a.forceIframe)&&E.css("opacity",0);var N=[E,S,x],C=m?e("body"):e(i);e.each(N,function(){this.appendTo(C)}),a.theme&&a.draggable&&e.fn.draggable&&x.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var k=s&&(!e.support.boxModel||e("object,embed",m?null:i).length>0);if(r||k){m&&a.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%");if((r||!e.support.boxModel)&&!m)var L=v(i,"borderTopWidth"),A=v(i,"borderLeftWidth"),O=L?"(0 - "+L+")":0,M=A?"(0 - "+A+")":0;e.each(N,function(e,t){var n=t[0].style;n.position="absolute";if(e<2)m?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+a.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),m?n.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),M&&n.setExpression("left",M),O&&n.setExpression("top",O);else if(a.centerY)m&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!a.centerY&&m){var r=a.css&&a.css.top?parseInt(a.css.top,10):0,i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"';n.setExpression("top",i)}})}g&&(a.theme?x.find(".ui-widget-content").append(g):x.append(g),(g.jquery||g.nodeType)&&e(g).show()),(n||a.forceIframe)&&a.showOverlay&&E.show();if(a.fadeIn){var _=a.onBlock?a.onBlock:t,D=a.showOverlay&&!g?_:t,P=g?_:t;a.showOverlay&&S._fadeIn(a.fadeIn,D),g&&x._fadeIn(a.fadeIn,P)}else a.showOverlay&&S.show(),g&&x.show(),a.onBlock&&a.onBlock.bind(x)();c(1,i,a),m?(o=x[0],u=e(a.focusableElements,o),a.focusInput&&setTimeout(p,20)):d(x[0],a.centerX,a.centerY);if(a.timeout){var H=setTimeout(function(){m?e.unblockUI(a):e(i).unblock(a)},a.timeout);e(i).data("blockUI.timeout",H)}}function f(t,n){var r,i=t==window,s=e(t),a=s.data("blockUI.history"),f=s.data("blockUI.timeout");f&&(clearTimeout(f),s.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),c(0,t,n),n.onUnblock===null&&(n.onUnblock=s.data("blockUI.onUnblock"),s.removeData("blockUI.onUnblock"));var h;i?h=e("body").children().filter(".blockUI").add("body > .blockUI"):h=s.find(">.blockUI"),n.cursorReset&&(h.length>1&&(h[1].style.cursor=n.cursorReset),h.length>2&&(h[2].style.cursor=n.cursorReset)),i&&(o=u=null),n.fadeOut?(r=h.length,h.stop().fadeOut(n.fadeOut,function(){--r===0&&l(h,a,n,t)})):l(h,a,n,t)}function l(t,n,r,i){var s=e(i);if(s.data("blockUI.isBlocked"))return;t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.el.style.cursor="default",n.parent&&n.parent.appendChild(n.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),typeof r.onUnblock=="function"&&r.onUnblock(i,r);var o=e(document.body),u=o.width(),a=o[0].style.width;o.width(u-1).width(u),o[0].style.width=a}function c(t,n,r){var i=n==window,s=e(n);if(!t&&(i&&!o||!i&&!s.data("blockUI.isBlocked")))return;s.data("blockUI.isBlocked",t);if(!i||!r.bindEvents||t&&!r.showOverlay)return;var u="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(u,r,h):e(document).unbind(u,h)}function h(t){if(t.type==="keydown"&&t.keyCode&&t.keyCode==9&&o&&t.data.constrainTabKey){var n=u,r=!t.shiftKey&&t.target===n[n.length-1],i=t.shiftKey&&t.target===n[0];if(r||i)return setTimeout(function(){p(i)},10),!1}var s=t.data,a=e(t.target);return a.hasClass("blockOverlay")&&s.onOverlayClick&&s.onOverlayClick(t),a.parents("div."+s.blockMsgClass).length>0?!0:a.parents().children().filter("div.blockUI").length===0}function p(e){if(!u)return;var t=u[e===!0?u.length-1:0];t&&t.focus()}function d(e,t,n){var r=e.parentNode,i=e.style,s=(r.offsetWidth-e.offsetWidth)/2-v(r,"borderLeftWidth"),o=(r.offsetHeight-e.offsetHeight)/2-v(r,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),n&&(i.top=o>0?o+"px":"0")}function v(t,n){return parseInt(e.css(t,n),10)||0}e.fn._fadeIn=e.fn.fadeIn;var t=e.noop||function(){},n=/MSIE/.test(navigator.userAgent),r=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),i=document.documentMode||0,s=e.isFunction(document.createElement("div").style.setExpression);e.blockUI=function(e){a(window,e)},e.unblockUI=function(e){f(window,e)},e.growlUI=function(t,n,r,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),r===undefined&&(r=3e3);var o=function(t){t=t||{},e.blockUI({message:s,fadeIn:typeof t.fadeIn!="undefined"?t.fadeIn:700,fadeOut:typeof t.fadeOut!="undefined"?t.fadeOut:1e3,timeout:typeof t.timeout!="undefined"?t.timeout:r,centerY:!1,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})};o();var u=s.css("opacity");s.mouseover(function(){o({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(t){if(this[0]===window)return e.blockUI(t),this;var n=e.extend({},e.blockUI.defaults,t||{});return this.each(function(){var t=e(this);if(n.ignoreIfBlocked&&t.data("blockUI.isBlocked"))return;t.unblock({fadeOut:0})}),this.each(function(){e.css(this,"position")=="static"&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,a(this,t)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){f(this,t)})},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var o=null,u=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define("blockUI",["jquery"],e):e(jQuery)}(),function(e){e.extend({getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),r=n.exec(window.location.search);return r==null?"":decodeURIComponent(r[1].replace(/\+/g," "))},showBlockUI:function(t){var n=t.name,r=t.message,i={message:r,fadeIn:0,fadeOut:0,focusInput:!1,css:{cursor:"default",textAlign:"left",border:"none"},onBlock:function(){t.onBlock&&callbacks.onBlock.apply(null,[])},onUnblock:function(){t.onUnblock&&callbacks.onUnblock.apply(null,[])},onOverlayClick:function(){t.onOverlayClick&&callbacks.onOverlayClick.apply(null,[])}},s;if(typeof r=="string"){s=e.extend(!0,{},i,t),t.parent?t.parent.block(s):e.blockUI(s);return}s=e.extend(!0,{},i,{css:{width:r.outerWidth(),height:r.outerHeight(),left:(e(window).width()-r.outerWidth())/2,top:(e(window).height()-r.outerHeight())/2,border:"none",cursor:"default",textAlign:"left",zIndex:500},overlayCSS:{cursor:"default",zIndex:"499"},baseZ:497},t),e(window).on("resize."+t.name,function(){e(".blockMsg").css({left:(e(window).width()-r.outerWidth())/2,top:(e(window).height()-r.outerHeight())/2})}),e(document).on("keyup."+t.name,function(t){t.keyCode===27&&e.hideBlockUI(s)}),r.find(".layer-close-btn")&&r.find(".layer-close-btn").length>0&&r.find(".layer-close-btn").on("click",function(){e.hideBlockUI(s)}),t.parent?t.parent.block(s):e.blockUI(s)},hideBlockUI:function(t){t.name&&(e(document).off("keyup."+t.name),e(window).off("resize."+t.name)),typeof t.message!="string"&&t.message.find(".layer-close-btn").length>0&&t.message.find(".layer-close-btn").off("click"),t.parent?t.parent.unblock(t):e.unblockUI(t)},showTips:function(t,n){var r=["warn","ok","error","info","hide"],i=e("#page-tips"),s=s||3e3;for(var o=0;o<r.length;o++)i.removeClass(r[o]);i.addClass(t).find(".text").text(n)},hideTips:function(){var t=e("#page-tips");t.addClass("hide")}}),e.fn.extend({fillElByField:function(t){this.find("input,select,a,span,div,textarea").each(function(n,r){var i,s=e(r).attr("data-field");if(s===undefined)return;var o=r.tagName.toUpperCase();if(o==="INPUT"){i=e(r).attr("type");switch(i){case"text":e(r).val(t[s]);break;case"checkbox":e(r).attr("checked",t[s]);break;case"hidden":e(r).val(t[s]);break;default:}}else o=="SELECT"?e(r).val(t[s]):o=="A"?e(r).text(t[s]):o=="DIV"||r.tagName=="SPAN"?e(r).html(t[s]):o=="TEXTAREA"&&e(r).text(t[s])})},selectElByField:function(){var t={};return this.find("input,select,a,span,div,textarea").each(function(n,r){var i,s=e(r).attr("data-field");if(s===undefined)return;if(r.tagName=="INPUT"){i=e(r).attr("type");switch(i){case"text":case"password":case"hidden":t[s]=e(r).val();break;case"checkbox":t[s]=e(r).is(":checked");break;default:}}else r.tagName=="SELECT"?e(r).val().length===0?t[s]="":t[s]=e(r).val():r.tagName=="A"?t[s]=e(r).html():r.tagName=="DIV"||r.tagName=="SPAN"?t[s]=e(r).html():r.tagName=="TEXTAREA"&&(t[s]=e(r).val()||e(r).text())}),t},clearElByField:function(){this.find("input,select,a,span,div,textarea").each(function(t,n){var r,i=e(n).attr("data-field");if(i===undefined)return;if(n.tagName=="INPUT"){r=e(n).attr("type");switch(r){case"text":case"password":case"hidden":e(n).val("");break;case"checkbox":e(n).attr("checked",!1);break;default:e(n).val("")}}else n.tagName=="SELECT"?e(n).val(""):n.tagName=="DIV"?e(n).html(""):n.tagName=="SPAN"?e(n).html(""):n.tagName=="TEXTAREA"&&e(n).text("").val("")})},initPlaceholder:function(t){var n={lfdistance:10};n=e.extend({},n,t),"placeholder"in document.createElement("input")||this.each(function(t,r){var i=e(this),s=i.attr("placeholder"),o=null,u,a;if(s){u=i.attr("id");if(!u){var f=new Date;u="lbl_placeholder"+f.getSeconds()+f.getMilliseconds(),i.attr("id",u)}a=e("<label>",{html:i.val()?"":s,"for":u,css:{position:"absolute",left:i.position().left+n.lfdistance,top:i.position().top,height:i.outerHeight(!0),lineHeight:i.outerHeight(!0)+"px",color:"#C3C3C3",cursor:"text"}}).insertAfter(i),o=function(e){i.val()?a.html(""):a.html(s)},i.on("focus blur input keyup propertychange",o),o()}})}})}(jQuery),define("jqExtend",["jquery","blockUI"],function(){}),define("group",["jquery","jqExtend"],function(){var e={checkFirstNode:!1,callbacks:{onClickedLeaf:null,onClickedGroup:null}},t=function(t){this.opts=$.extend({},e,t||{}),this.init()};return t.prototype={init:function(){var e=this;e.bindEls(),e.bindEvent(),e.opts.checkFirstNode&&e.checkFirstNode()},bindEls:function(){var e=this;e.$group=$("#group-body")},bindEvent:function(){var e=this,t;e.$group.on("click","a",function(n){$(this).hasClass("leaf")?(e.checkedNode($(this)),e.clickedLeaf($(this).attr("data-code"))):(t=$(n.target).attr("data-field"),t==="icon"?e.toggleGroup($(this)):(e.checkedNode($(this)),e.clickedGroup($(this))))})},clickedFirstGroup:function(){var e=this;e.$group.find("a[data-code]:first > [data-field=text]").trigger("click")},toggleGroup:function(e){var t=this;e.hasClass("expand")?(e.removeClass("expand"),e.next().hide()):(e.addClass("expand"),e.next().show())},checkedNode:function(e){var t=this;t.$group.find(".checked").removeClass("checked"),e.addClass("checked")},clickedLeaf:function(e){var t=this,n=t.$group.find("a[data-code="+e+"]"),r=n.parents("ul");t.checkedNode(n),r.show(),r.each(function(e,t){$(t).prev("a").removeClass("expand").addClass("expand")}),typeof t.opts.callbacks.onClickedLeaf=="function"&&t.opts.callbacks.onClickedLeaf.apply(t,[n,e])},clickedGroup:function(e){var t=this;typeof t.opts.callbacks.onClickedGroup=="function"&&t.opts.callbacks.onClickedGroup.apply(t,[e,e.attr("data-code")])},getImagesEls:function(e){var t=this,n=e.parent().find(".leaf"),r=[],i;for(var s=0;s<n.length;s++)i=n.eq(s),r.push({code:i.attr("data-code")||"",name:i.attr("data-name")||"",svgFile:i.attr("data-svgFile")||"",gifFile:i.attr("data-gifFile")||""});return r},getCheckedEl:function(){var e=this;return e.$group.find("a[class*=checked]").eq(0)}},t}),define("crumbs",["ajax","mustache","jquery","jqExtend"],function(e,t){var n=[{type:"brand",label:"品牌",isShow:!0,url:"/epc/catalog",click:!0},{type:"series",label:"车系",isShow:!0,url:"/epc/catalog",click:!0},{type:"modelGroup",label:"车型组",isShow:!0,url:"/epc/model",click:!0},{type:"model",label:"整编车型",isShow:!0,url:"/epc/model",click:!0},{type:"image",label:"图例",isShow:!1,url:"/epc/model",click:!0}],r={firstRenderCrumbs:!0,isFilterData:!0,callbacks:{onRenderFinished:null,onFristRenderCrumbs:null,onRenderBefore:null}},i=function(e){this.opts=$.extend({},r,e||{}),this.init()};return i.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.bindEvent(),e.initCrumbsParams(),e.opts.firstRenderCrumbs&&(e.render(),typeof e.opts.callbacks.onFristRenderCrumbs=="function"&&e.opts.callbacks.onFristRenderCrumbs.apply(e,[e.getCrumbsCode()]))},bindEls:function(){var e=this;e.$crumbs=$("#crumbs")},bindAttr:function(){var e=this;e.template=e.$crumbs.find("script").html()},bindEvent:function(){var e=this;e.$crumbs.on("click","a[data-type][data-click=true]",function(){window.location.href=$(this).attr("data-url")})},initCrumbsParams:function(){var e=this,t=n,r=[],i,s;for(var o=0;o<t.length;o++)i=t[o].type,s=$.getParameterByName(i+"Code"),s.length>0&&r.push({type:i,code:s});typeof e.opts.callbacks.onInitCrumbsParamsAfter=="function"&&e.opts.callbacks.onInitCrumbsParamsAfter.apply(this,[r,t]),e.data=r},buildData:function(){var e=this,t=e.data;return e.buildUrl(t)},removeSingle:function(e){var t=this,n=t.data;for(var r=0;r<n.length;r++)if(n[r].type===e){n.splice(r,1);break}},replaceSingle:function(e){var t=this,n=t.data,r=e.type,i=e.code,s=e.label,o=!1,u;for(var a=0;a<n.length;a++)if(n[a].type==r){n[a].code=i,o=!0,u=a;break}o||n.push({type:r,code:i})},loadCrumbsInfo:function(t,n){var r=this;e.invoke({type:"GET",url:"/epc/crumbs",data:t,contentType:"application/json",success:function(e){n.apply(null,[e])}})},render:function(){var e=this,r=e.getCrumbsCode(),i;e.loadCrumbsInfo(r,function(r){i=e.buildFinalData(r),typeof e.opts.callbacks.onRenderBefore=="function"&&e.opts.callbacks.onRenderBefore.apply(e,[i,n]),output=t.render(e.template,{records:i}),e.$crumbs.html(output)})},buildFinalData:function(e){var t=this,r=n,i=[],s,o;for(var u=0;u<r.length;u++)s=r[u].type,o=e[r[u].type+"Code"],o&&o.length>0&&i.push({type:r[u].type,code:e[r[u].type+"Code"],label:r[u].label,url:t.getUrl(s,o),isShow:r[u].isShow,text:e[r[u].type+"Name"],click:r[u].click});return t.data=i,i},getUrl:function(e,t){var r=this,i=r.getCrumbsCode(),s=n;path="";for(var o=0;o<s.length;o++)if(e==s[o].type){path=s[o].url;break}switch(e){case"brand":url=path+"?brandCode="+(t||"");break;case"series":url=path+"?brandCode="+(i.brandCode||"")+"&seriesCode="+(t||"");break;case"modelGroup":url=path+"?brandCode="+(i.brandCode||"")+"&seriesCode="+(i.seriesCode||"")+"&modelGroupCode="+(t||"");break;case"model":url=path+"?brandCode="+(i.brandCode||"")+"&seriesCode="+(i.seriesCode||"")+"&modelGroupCode="+(i.modelGroupCode||"")+"&modelCode="+(t||"");break;default:url="javascript:;"}return url},getCrumbsCode:function(e){var t=this,e=e?e:t.data,n={};for(var r=0;r<e.length;r++)n[e[r].type+"Code"]=e[r].code;return n}},i}),jQuery.fn.showLoading=function(e){var t,n={addClass:"",beforeShow:"",afterShow:"",hPos:"center",vPos:"center",indicatorZIndex:5001,overlayZIndex:5e3,parent:"",marginTop:0,marginLeft:0,overlayWidth:null,overlayHeight:null};jQuery.extend(n,e);var r=jQuery("<div></div>"),i=jQuery("<div></div>");n.indicatorID?t=n.indicatorID:t=jQuery(this).attr("id"),jQuery(r).attr("id","loading-indicator-"+t),jQuery(r).addClass("loading-indicator"),n.addClass&&jQuery(r).addClass(n.addClass),jQuery(i).css("display","none"),jQuery(document.body).append(i),jQuery(i).attr("id","loading-indicator-"+t+"-overlay"),jQuery(i).addClass("loading-indicator-overlay"),n.addClass&&jQuery(i).addClass(n.addClass+"-overlay");var s,o,u=jQuery(this).css("border-top-width"),a=jQuery(this).css("border-left-width");u=isNaN(parseInt(u))?0:u,a=isNaN(parseInt(a))?0:a;var f=jQuery(this).offset().left+parseInt(a),l=jQuery(this).offset().top+parseInt(u);n.overlayWidth!==null?s=n.overlayWidth:s=parseInt(jQuery(this).width())+parseInt(jQuery(this).css("padding-right"))+parseInt(jQuery(this).css("padding-left")),n.overlayHeight!==null?o=n.overlayWidth:o=parseInt(jQuery(this).height())+parseInt(jQuery(this).css("padding-top"))+parseInt(jQuery(this).css("padding-bottom")),jQuery(i).css("width",s.toString()+"px"),jQuery(i).css("height",o.toString()+"px"),jQuery(i).css("left",f.toString()+"px"),jQuery(i).css("position","absolute"),jQuery(i).css("top",l.toString()+"px"),jQuery(i).css("z-index",n.overlayZIndex),n.overlayCSS&&jQuery(i).css(n.overlayCSS),jQuery(r).css("display","none"),jQuery(document.body).append(r),jQuery(r).css("position","absolute"),jQuery(r).css("z-index",n.indicatorZIndex);var c=l;n.marginTop&&(c+=parseInt(n.marginTop));var h=f;n.marginLeft&&(h+=parseInt(n.marginTop)),n.hPos.toString().toLowerCase()=="center"?jQuery(r).css("left",(h+(jQuery(i).width()-parseInt(jQuery(r).width()))/2).toString()+"px"):n.hPos.toString().toLowerCase()=="left"?jQuery(r).css("left",(h+parseInt(jQuery(i).css("margin-left"))).toString()+"px"):n.hPos.toString().toLowerCase()=="right"?jQuery(r).css("left",(h+(jQuery(i).width()-parseInt(jQuery(r).width()))).toString()+"px"):jQuery(r).css("left",(h+parseInt(n.hPos)).toString()+"px"),n.vPos.toString().toLowerCase()=="center"?jQuery(r).css("top",(c+(jQuery(i).height()-parseInt(jQuery(r).height()))/2).toString()+"px"):n.vPos.toString().toLowerCase()=="top"?jQuery(r).css("top",c.toString()+"px"):n.vPos.toString().toLowerCase()=="bottom"?jQuery(r).css("top",(c+(jQuery(i).height()-parseInt(jQuery(r).height()))).toString()+"px"):jQuery(r).css("top",(c+parseInt(n.vPos)).toString()+"px"),n.css&&jQuery(r).css(n.css);var p={overlay:i,indicator:r,element:this};return typeof n.beforeShow=="function"&&n.beforeShow(p),jQuery(i).show(),jQuery(r).show(),typeof n.afterShow=="function"&&n.afterShow(p),this},jQuery.fn.hideLoading=function(e){var t={};return jQuery.extend(t,e),t.indicatorID?indicatorID=t.indicatorID:indicatorID=jQuery(this).attr("id"),jQuery(document.body).find("#loading-indicator-"+indicatorID).remove(),jQuery(document.body).find("#loading-indicator-"+indicatorID+"-overlay").remove(),this},define("showLoading",["jquery"],function(){}),define("miniCart",["ajax","mustache","jquery","showLoading","jqExtend"],function(e,t){var n={callbacks:{onSetCartCount:null}},r=function(e){this.opts=$.extend({},n,e||{}),this.init()};return r.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.template&&(e.bindEvent(),e.load())},bindEls:function(){var e=this;e.$cart=$("#header-cart"),e.$cartList=$("#header-cart-list"),e.$count=e.$cart.find("[data-itemId=count]")},bindAttr:function(){var e=this;e.template=e.$cartList.find("script").html(),e.timer=null},bindEvent:function(){var e=this,t;e.$cartList.on("click","[data-action]",function(n){t=$(this).attr("data-action");switch(t){case"delete":e.clickedDelete($(this));break;case"confirm":e.clickedConfirm($(this));break;case"cancel":e.clickedCancel($(this));break;default:}})},clickedDelete:function(e){var t=this,n=e.parent();e.addClass("hide"),n.find(".btn").removeClass("hide")},clickedConfirm:function(e){var t=this,n=e.closest("li").attr("data-id");t.deleteGoods([n])},clickedCancel:function(e){var t=this,n=e.parent();n.find(".hide").removeClass("hide"),n.find(".btn").addClass("hide")},load:function(){var t=this;e.invoke({type:"GET",url:"/epc/cart/operation",cache:!1,success:function(e){t.loadSuccess(e)}})},loadSuccess:function(e){var n=this,r=t.render(n.template,{list:e});n.$cartList.html(r),n.$count.text(e.length),n.resetCartCount(e.length)},resetCartCount:function(e){var t=this;typeof t.opts.callbacks.onSetCartCount=="function"&&t.opts.callbacks.onSetCartCount.apply(null,[e])},deleteGoods:function(t){var n=this;e.invoke({type:"DELETE",url:"/epc/cart/operation",data:JSON.stringify({ids:t}),contentType:"application/json",success:function(e){e.success?(n.showTips("ok","删除成功"),n.load()):n.showTips("error",e.message)}})},addGoods:function(t){var n=this;e.invoke({type:"PUT",url:"/epc/cart/operation",data:JSON.stringify(t),contentType:"application/json",success:function(e){e.success?(n.showTips("ok","成功加入购物车"),n.load()):n.showTips("error",e.message)}})},updateQty:function(t){var n=this;e.invoke({type:"POST",url:"/epc/cart/operation",data:JSON.stringify(t),contentType:"application/json",success:function(e){e.success?(n.showTips("ok","更新成功"),n.load()):n.showTips("error",e.message)}})},showTips:function(e,t){var n=this;clearTimeout(n.timer),$.showTips(e,t),n.timer=setTimeout(function(){$.hideTips()},3e3)}},r}),function(e){function t(t,n){var r=function(t){this.opts=e.extend(!0,{},i,t||{}),this.init()};r.prototype={init:function(){var e=this;e.buildEl(),e.buildTpl(),e.initEvents(),e.buildUrl()},buildEl:function(){var t=this;t.$gridWrap=e("#"+t.opts.gridWrapId),t.$gridTpl=t.$gridWrap.find('script[type="text/template"]'),t.$gridResult=t.$gridWrap.find("[data-id=grid-result]")},buildTpl:function(){var e=this;e.tpl=e.$gridTpl.html()},buildUrl:function(){var e=this;e.urls=e.getUrls()},initEvents:function(){var e=this;e.opts.search&&e.opts.search.on("onQuery",function(t){e.resetPaging(),e.load()}),e.opts.paging&&e.opts.paging.on("onSelectPage",function(){e.load()}),e.$gridResult.on("click","tr",function(t){e.rowClicked(this,t)})},resetPaging:function(){var e=this;e.opts.paging&&e.opts.paging.reset()},rowClicked:function(t,n){var r=this,i=e(t).attr("data-rownumber"),s=r.getSelections(i);r.opts.callbacks.onRowClicked!==null&&r.opts.callbacks.onRowClicked.apply(t,[s,n])},getSelections:function(e){var t=this,n=0,r=[],i=t.data;for(;n<i.length;n++)i[n].rowNumber.toString()===e&&r.push(i[n]);return r},beforeLoad:function(e){var t=this;typeof t.opts.callbacks.onBeforeLoad=="function"&&t.opts.callbacks.onBeforeLoad.apply(this,[e])},load:function(e){var n=this,e=n.getParams();n.beforeLoad(e),t.invoke({url:n.urls.read,cache:!1,data:{args:JSON.stringify(e)},complete:function(){n.requestComplete()},success:function(e){n.afterLoad(e)}})},requestComplete:function(){var e=this;typeof e.opts.callbacks.onRequestComplente=="function"&&e.opts.callbacks.onRequestComplente.apply()},afterLoad:function(e){typeof this.opts.callbacks.onAfterLoad=="function"&&this.opts.callbacks.onAfterLoad.apply(null,[e]);var t=this,n=e.total||0,r=t.buildData(e.list);t.data=r,t.render(r),t.opts.paging&&t.opts.paging.setPagination(n)},buildData:function(e){var t=this,n=0,r=e||[],i=t.opts.paging,s=i?i.curPage:1,o=i?i.pageSize:1;for(;n<r.length;n++)r[n].rowNumber=parseInt(s-1)*parseInt(o)+(n+1);return r},getParams:function(){var e=this,t=e.opts.search,n=e.opts.paging,r=t?t.getParams():{},i=n?n.getPagination():{};return{paging:i,filters:r,sorts:[]}},getUrls:function(){var e=this,t=e.$gridWrap.attr("data-urls")||"{}";return JSON.parse(t)},render:function(e){var t=this,r=n.render(t.tpl,{list:e});t.$gridResult.html(r),typeof t.opts.callbacks.onAfterRender=="function"&&t.opts.callbacks.onAfterRender.apply(null)},clearEmpty:function(){var e=this;e.data=[],e.$gridResult.html("")}};var i={callbacks:{onRowClicked:null,onBeforeLoad:null,onAfterLoad:null,onButtonClick:null,onAfterRender:null}};return r}define("grid",["ajax","mustache","json2"],t)}(jQuery),function(e){function t(t,n){var r=function(t){this.opts=e.extend(!0,{},i,t||{}),this.init()};r.prototype={init:function(){var e=this;e.buildEl(),e.buildAttr(),e.initEvents()},buildEl:function(){var t=this;t.$searchWrap=e("#"+t.opts.searchWrapId),t.$items=t.$searchWrap.find("[data-name]"),t.$reset=t.$searchWrap.find("[data-id=reset]"),t.$query=t.$searchWrap.find("[data-id=search]"),t.$selectItems=t.$searchWrap.find("select[data-name]"),t.$formSelectItems=t.$searchWrap.find("[data-special-select]")},buildAttr:function(){var e=this,t=e.opts;e.selectInputCls=t.formSelectInputCls,e.selectTextCls=t.formSelectTextCls,e.selectOptionCls=t.formSelectOptionCls,e.selectListCls=t.formSelectListCls,e.checkedOptionCls=t.currentOption},initEvents:function(){var t=this;t.$reset.on("click",function(){t.reset()}),t.$query.on("click",function(){t.query()}),t.$items.on("keyup",function(e){e.keyCode===13&&t.query()}),t.$selectItems.on("change",function(){var n=e(this);t.changeSelectOption(n),t.buildNextSelectOption(n)}),t.$formSelectItems.on("evtChange",function(){var n=e(this);t.changeSelectOption(n.find("."+t.selectInputCls)),t.buildNextSelectOption(n.find("."+t.selectInputCls))})},changeSelectOption:function(e){var t=this,n=0,r,i=e.attr("data-name"),s=t.getClearTargets(i);for(;n<s.length;n++)r=t.getItem(s[n]),t.clearOption(r)},buildNextSelectOption:function(t){var n=this,r=0,i=t.attr("data-name"),s=n.getNextTargets(i);for(;r<n.asynFuns.length;r++){var o=n.asynFuns[r].name;e.inArray(o,s)>-1&&n.asynFuns[r].fun()}},getNextTargets:function(e){var t=this,n=0,r=t.opts.selectFields;for(;n<r.length;n++)if(r[n].name===e)return r[n].nextTargets},clearOption:function(e){var t=this;e.get(0).tagName.toUpperCase()=="SELECT"&&(e.find("option").remove().end(),e.html('<option value="">'+t.opts.selectAllText+"</option>"));if(e.attr("data-type")&&e.attr("data-type").toUpperCase()=="SELECT"){var n=e.parent();e.val(""),n.find("."+t.selectTextCls).text("请选择"),n.find("."+t.selectListCls).html("")}},getClearTargets:function(e){var t=this,n=0,r=t.opts.selectFields;for(;n<r.length;n++)if(e===r[n].name)return r[n].clearTargets||[];return[]},getItem:function(e){var t=this,n=t.$searchWrap.find("[data-name="+e+"]");return n},reset:function(){var t=this;t.$items.each(function(n,r){var i=e(r);if(i.attr("data-notReset"))return;t.clearVal(i),i.attr("data-notClearOption")||t.clearOption(i)}),typeof t.opts.callbacks.onReset=="function"&&t.opts.callbacks.onReset.apply(null,[])},on:function(e,t){var n=this;e==="onQuery"&&(n.opts.callbacks.onQuery=t),e==="onReset"&&(n.opts.callbacks.onReset=t)},setFieldsVal:function(t){var n=this,r,i;n.reset(),n.defaultVal=t,n.$items.each(function(n,i){r=e(i).attr("data-name"),t[r]&&e(i).val(t[r])}),n.loadDropDownData()},loadDropDownData:function(){var e=this,n=0,r=0,i=[],s=e.opts.selectFields;for(;n<s.length;n++){var o=s[n].name,u=s[n].depend,a=s[n].root,f=function(n,r,i){return function(s){var o=e.getDropDownParams(n,r);o?t.invoke({url:o.url,success:function(t){o.$el.attr("data-type")=="select"?e.renderFromSelectOption(o.$el,t,i,n,s):e.renderSelectOption(o.$el,t,i,n,s)}}):typeof e.opts.callbacks.onSelectRenderFinish=="function"&&e.opts.callbacks.onSelectRenderFinish.apply(null)}}(o,u,a);i.push({name:o,fun:f})}e.asynFuns=i,i.length>0&&e.asynFuncCall(0,i)},asynFuncCall:function(e,t){var n=this;t[e].fun(function(){e++,e<t.length?n.asynFuncCall(e,t):typeof n.opts.callbacks.onSelectRenderFinish=="function"&&n.opts.callbacks.onSelectRenderFinish.apply(null)})},renderSelectOption:function(e,t,r,i,s){var o=this,u='<option value="">'+o.opts.selectAllText+"</option>"+'{{#list}}<option value="{{code}}">{{name}}</option>{{/list}}',a=n.render(u,{list:t[r]});e.html(a),o.defaultVal&&(o.setVal(e,o.defaultVal[i]||""),o.defaultVal[i]=null),typeof s=="function"&&s.apply()},renderFromSelectOption:function(e,t,r,i,s){var o=this,u=e.parent(".form-select");tpl='<li class="'+o.selectOptionCls+" "+o.checkedOptionCls+'">请选择</li>{{#list}}<li data-value="{{code}}" title="{{name}}" class="'+o.selectOptionCls+'">{{name}}</li>{{/list}}',html=n.render(tpl,{list:t[r]}),u.find("."+o.selectListCls).html(html),o.defaultVal&&(o.setVal(e,o.defaultVal[i]||""),o.defaultVal[i]=null),typeof s=="function"&&s.apply()},getDropDownParams:function(e,t){var n=this,r=n.buildUrlParams(t),i=n.$searchWrap.find("[data-name="+e+"]"),s=i.attr("data-url"),o=n.getSelectFieldItem(e);return r.length||o.noParams?{$el:i,url:s+r}:null},getSelectFieldItem:function(e){var t=this,n=0,r=t.opts.selectFields;for(;n<r.length>0;n++)if(r[n].name===e)return r[n];return null},buildUrlParams:function(e){var t=this,n=0,r,i,s,o=[],e=e||[];for(;n<e.length;n++)r=e[n],i=t.$searchWrap.find("[data-name="+r+"]"),s=t.getVal(i),o.push(s);return o.join("/")},query:function(){var e=this,t=e.getParams();if(typeof e.opts.callbacks.beforeQuery=="function"&&!e.opts.callbacks.beforeQuery.apply(this,[t]))return;typeof e.opts.callbacks.onQuery=="function"&&e.opts.callbacks.onQuery.apply(null,[t])},clearVal:function(e){var t=this,n,r=e.prop("tagName").toUpperCase(),i;r==="SELECT"&&(e.get(0).selectedIndex=0),(r==="SPAN"||r==="LABEL")&&e.text(""),r==="INPUT"&&(n=e.attr("type").toUpperCase(),(n==="TEXT"||n==="HIDDEN")&&e.val(""),(n==="CHECKBOX"||n==="RADIO")&&e.attr("checked",!1),e.attr("data-type")&&e.attr("data-type").toUpperCase()=="SELECT"&&(i=e.parent(".form-select"),i.find("."+t.selectTextCls).text("请选择"),i.find("."+t.checkedOptionCls).removeClass(t.checkedOptionCls)))},getVal:function(e){var t,n=e.prop("tagName").toUpperCase();if(n==="SELECT")return e.val();if(n==="SPAN"||n==="LABEL")return e.text();if(n==="INPUT"){t=e.attr("type").toUpperCase();if(t==="TEXT"||t==="HIDDEN")return e.val();if(t==="CHECKBOX"||t==="RADIO")return e.prop("checked")}},setVal:function(t,n){var r=this,i,s=t.prop("tagName").toUpperCase(),o;if(n.length==0)return;s==="SELECT"&&t.val(n),(s==="SPAN"||s==="LABEL")&&t.text(n),s==="INPUT"&&(i=t.attr("type").toUpperCase(),(i==="TEXT"||i==="HIDDEN")&&t.val(n),i==="CHECKBOX"&&e.inArray(parseInt(t.val()),n)>-1&&t.attr("checked",!0),t.attr("data-type")&&t.attr("data-type").toUpperCase()=="SELECT"&&(o=t.parent(".form-select"),$option=o.find('[data-value="'+n+'"]'),o.find("."+r.selectTextCls).text($option.text()),$option&&$option.addClass(r.checkedOptionCls).siblings().removeClass(r.checkedOptionCls)))},getParams:function(){var t=this,n={};return t.$items.each(function(r,i){var s=e(i).attr("data-name"),o=t.getVal(e(i));e.trim(o).length>0&&(n[s]=o)}),typeof t.opts.callbacks.onGetParamsAfter=="function"&&t.opts.callbacks.onGetParamsAfter.apply(t,[n]),n}};var i={selectFields:[],selectAllText:"请选择...",formSelectCls:"form-select",formSelectTextCls:"form-select-text",formSelectInputCls:"form-select-input",formSelectOptionCls:"form-select-option",formSelectListCls:"form-select-option-list",currentOption:"currentOption",callbacks:{onGetParamsAfter:null,onQuery:null,onReset:null,onSelectRenderFinish:null}};return r}define("search",["ajax","mustache"],t)}(jQuery),function(e){function t(t){var n=function(t){this.opts=e.extend(!0,{},r,t||{}),this.curPage=1,this.pageCount=0,this.pageSize=this.opts.pageSize,this.init()};n.prototype={init:function(){var e=this;e.buildEl(),e.initEvents()},buildEl:function(){var t=this,n=t.opts;t.$pagingWrap=e("#"+n.pagingWrapId),t.$btnCtrlPages=t.$pagingWrap.find(".page-ctrl-btn"),t.$pageCount=t.$pagingWrap.find("[data-id='"+n.pageCountId+"']"),t.$recordCount=t.$pagingWrap.find("[data-id='"+n.recordCountId+"']"),t.$currentPage=t.$pagingWrap.find("[data-id='"+n.currentPageId+"']"),t.$currentPageView=t.$pagingWrap.find("[data-id='"+n.currentPageViewId+"']"),t.$topPage=t.$pagingWrap.find("[data-id='"+n.topPageId+"']"),t.$prevPage=t.$pagingWrap.find("[data-id='"+n.prevPageId+"']"),t.$nextPage=t.$pagingWrap.find("[data-id='"+n.nextPageId+"']"),t.$bottomPage=t.$pagingWrap.find("[data-id='"+n.bottomPageId+"']"),t.$gotoPage=t.$pagingWrap.find("[data-id='"+n.gotoPageId+"']"),t.$pageBtns=t.$pagingWrap.find("[data-id='"+n.pageBtnsId+"']")},initEvents:function(){var t=this;t.$btnCtrlPages.on("click",function(){e(this).hasClass("disable")||t.doPaging(this)}),t.$gotoPage.on("click",function(){e(this).hasClass("disable")||t.gotoPage()}),t.$currentPage.on("keydown",function(e){e.keyCode===13&&t.gotoPage()}),t.$pageBtns.on("click","a",function(){t.$currentPage.val(parseInt(e(this).text())),t.gotoPage()}),t.$pagingWrap.on("selectstart",function(){return!1})},on:function(e,t){var n=this;e==="onSelectPage"&&(n.opts.callbacks.onSelectPage=t)},doPaging:function(t){var n=this,r=e(t).attr("data-id");switch(r){case"top":n.pageCount>1&&(n.curPage=1);break;case"prev":n.curPage>1&&n.curPage--;break;case"next":n.curPage<n.pageCount&&n.curPage++;break;case"bottom":n.pageCount>1&&n.curPage!=n.pageCount&&(n.curPage=n.pageCount);break;default:}n.operation()},gotoPage:function(){var e=this,t=e.$currentPage.val();if(e.pageCount===0)return;/^[0-9]+$/.test(t)?parseInt(t)>e.pageCount?e.curPage=e.pageCount:e.curPage=parseInt(t):e.curPage=1,e.operation()},operation:function(){var e=this;typeof e.opts.callbacks.onSelectPage=="function"&&e.opts.callbacks.onSelectPage.apply(null,[e.curPage])},setPagination:function(e){var t=this;t.pageCount=t.getPageCount(e),t.$pageCount.text(t.pageCount),t.$recordCount.text(e),t.$currentPage.val(t.curPage),t.$currentPageView.text(t.curPage),t.setPageBtn(t.pageCount),t.setPagingStatus(),e>t.pageSize?t.$gotoPage.removeClass("disable"):t.$gotoPage.addClass("disable")},getPagination:function(){var e=this;return{page:e.curPage||1,size:e.opts.pageSize}},setPageBtn:function(e){var t=this,n=t.opts.pageBtnSize;t.$pageBtns.html("");if(e===0)return;e<=n?t.renderPageBtn(1,e,e):t.curPage==1?t.renderPageBtn(1,n,e):t.curPage==e?t.renderPageBtn(e-n+1,e,e):t.renderPageBtn(t.curPage-1,t.curPage+1,e)},renderPageBtn:function(e,t,n){var r=this,i='<span class="ellipsis"></span>',s='<span class="ellipsis"></span>',o="";for(var u=e;u<=t;u++)u==r.curPage?o+="<a data-id='page' class='current-page' href='javascript:;'>"+u+"</a>":o+="<a data-id='page' href='javascript:;'>"+u+"</a>",u==1&&(i=""),u==n&&(s="");r.$pageBtns.html(i+o+s)},reset:function(){var e=this;e.curPage=1,e.pageCount=0,e.$pageCount.text(0),e.$recordCount.text(0),e.$currentPage.val(e.curPage),e.$currentPageView.text(e.curPage),e.setPageBtn(0),e.setPagingStatus()},getPageCount:function(e){var t=this,n=t.opts.pageSize;return e%n==0?parseInt(e/n):parseInt(e/n)+1},setPagingStatus:function(){var e=this;e.$btnCtrlPages.not(".disable").addClass("disable"),e.curPage>1&&e.curPage<e.pageCount?e.$btnCtrlPages.removeClass("disable"):e.curPage===1&&e.pageCount>1?(e.$nextPage.removeClass("disable"),e.$bottomPage.removeClass("disable")):e.pageCount===e.curPage&&e.curPage>1&&(e.$topPage.removeClass("disable"),e.$prevPage.removeClass("disable"))},clearEmpty:function(){var e=this;e.setPagination(0)}};var r={pageSize:10,gotoPageId:"go",topPageId:"top",prevPageId:"prev",nextPageId:"next",bottomPageId:"bottom",pageCountId:"pageCount",recordCountId:"recordCount",currentPageId:"curPage",currentPageViewId:"curPageView",pageBtnsId:"pageBtns",pageBtnSize:3,callbacks:{onQuery:null,onReset:null}};return n}define("paging",["ajax"],t)}(jQuery),!function(e){var t,n=e(document),r=e("head"),i=null,s={},o=0,u="id",a="px",f="JColResizer",l="JCLRFlex",c=parseInt,h=Math,p=navigator.userAgent.indexOf("Trident/4.0")>0;try{t=sessionStorage}catch(d){}r.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer > tbody > tr > td, .JColResizer > tbody > tr > th{overflow:hidden;padding-left:0!important; padding-right:0!important;}  .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: e-resize;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;	} .JCLRFlex{width:auto!important;} .JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default; display:none;}</style>");var v=function(t,n){var i=e(t);if(i.opt=n,i.mode=n.resizeMode,i.dc=i.opt.disabledColumns,i.opt.disable)return m(i);var a=i.id=i.attr(u)||f+o++;i.p=i.opt.postbackSafe,!i.is("table")||s[a]&&!i.opt.partialRefresh||("e-resize"!==i.opt.hoverCursor&&r.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+i.opt.hoverCursor+"!important}</style>"),i.addClass(f).attr(u,a).before('<div class="JCLRgrips"/>'),i.g=[],i.c=[],i.w=i.width(),i.gc=i.prev(),i.f=i.opt.fixed,n.marginLeft&&i.gc.css("marginLeft",n.marginLeft),n.marginRight&&i.gc.css("marginRight",n.marginRight),i.cs=c(p?t.cellSpacing||t.currentStyle.borderSpacing:i.css("border-spacing"))||2,i.b=c(p?t.border||t.currentStyle.borderLeftWidth:i.css("border-left-width"))||1,s[a]=i,g(i))},m=function(e){var t=e.attr(u),e=s[t];e&&e.is("table")&&(e.removeClass(f+" "+l).gc.remove(),delete s[t])},g=function(n){var r=n.find(">thead>tr:first>th,>thead>tr:first>td");r.length||(r=n.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td")),r=r.filter(":visible"),n.cg=n.find("col"),n.ln=r.length,n.p&&t&&t[n.id]&&y(n,r),r.each(function(t){var r=e(this),i=-1!=n.dc.indexOf(t),s=e(n.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);s.append(i?"":n.opt.gripInnerHtml).append('<div class="'+f+'"></div>'),t==n.ln-1&&(s.addClass("JCLRLastGrip"),n.f&&s.html("")),s.bind("touchstart mousedown",T),i?s.addClass("JCLRdisabledGrip"):s.removeClass("JCLRdisabledGrip").bind("touchstart mousedown",T),s.t=n,s.i=t,s.c=r,r.w=r.width(),n.g.push(s),n.c.push(r),r.width(r.w).removeAttr("width"),s.data(f,{i:t,t:n.attr(u),last:t==n.ln-1})}),n.cg.removeAttr("width"),n.find("td, th").not(r).not("table th, table td").each(function(){e(this).removeAttr("width")}),n.f||n.removeAttr("width").addClass(l),b(n)},y=function(e,n){var r,i,s=0,o=0,u=[];if(n){if(e.cg.removeAttr("width"),e.opt.flush)return void (t[e.id]="");for(r=t[e.id].split(";"),i=r[e.ln+1],!e.f&&i&&(e.width(i*=1),e.opt.overflow&&(e.css("min-width",i+a),e.w=i));o<e.ln;o++)u.push(100*r[o]/r[e.ln]+"%"),n.eq(o).css("width",u[o]);for(o=0;o<e.ln;o++)e.cg.eq(o).css("width",u[o])}else{for(t[e.id]="";o<e.c.length;o++)r=e.c[o].width(),t[e.id]+=r+";",s+=r;t[e.id]+=s,e.f||(t[e.id]+=";"+e.width())}},b=function(e){e.gc.width(e.w);for(var t=0;t<e.ln;t++){var n=e.c[t];e.g[t].css({left:n.offset().left-e.offset().left+n.outerWidth(!1)+e.cs/2+a,height:e.opt.headerOnly?e.c[0].outerHeight(!1):e.outerHeight(!1)})}},w=function(e,t,n){var r=i.x-i.l,s=e.c[t],o=e.c[t+1],u=s.w+r,f=o.w-r;s.width(u+a),e.cg.eq(t).width(u+a),e.f?(o.width(f+a),e.cg.eq(t+1).width(f+a)):e.opt.overflow&&e.css("min-width",e.w+r),n&&(s.w=u,o.w=e.f?f:o.w)},E=function(t){var n=e.map(t.c,function(e){return e.width()});t.width(t.w=t.width()).removeClass(l),e.each(t.c,function(e,t){t.width(n[e]).w=n[e]}),t.addClass(l)},S=function(e){if(i){var t=i.t,n=e.originalEvent.touches,r=n?n[0].pageX:e.pageX,s=r-i.ox+i.l,o=t.opt.minWidth,u=i.i,f=1.5*t.cs+o+t.b,l=u==t.ln-1,c=u?t.g[u-1].position().left+t.cs+o:f,p=t.f?u==t.ln-1?t.w-f:t.g[u+1].position().left-t.cs-o:1/0;if(s=h.max(c,h.min(p,s)),i.x=s,i.css("left",s+a),l){var d=t.c[i.i];i.w=d.w+s-i.l}if(t.opt.liveDrag){l?(d.width(i.w),!t.f&&t.opt.overflow?t.css("min-width",t.w+s-i.l):t.w=t.width()):w(t,u),b(t);var v=t.opt.onDrag;v&&(e.currentTarget=t[0],v(e))}return!1}},x=function(r){if(n.unbind("touchend."+f+" mouseup."+f).unbind("touchmove."+f+" mousemove."+f),e("head :last-child").remove(),i){if(i.removeClass(i.t.opt.draggingClass),i.x-i.l!=0){var s=i.t,o=s.opt.onResize,u=i.i,a=u==s.ln-1,l=s.g[u].c;a?(l.width(i.w),l.w=i.w):w(s,u,!0),s.f||E(s),b(s),o&&(r.currentTarget=s[0],o(r)),s.p&&t&&y(s)}i=null}},T=function(t){var o=e(this).data(f),u=s[o.t],a=u.g[o.i],l=t.originalEvent.touches;if(a.ox=l?l[0].pageX:t.pageX,a.l=a.position().left,a.x=a.l,n.bind("touchmove."+f+" mousemove."+f,S).bind("touchend."+f+" mouseup."+f,x),r.append("<style type='text/css'>*{cursor:"+u.opt.dragCursor+"!important}</style>"),a.addClass(u.opt.draggingClass),i=a,u.c[o.i].l)for(var c,h=0;h<u.ln;h++)c=u.c[h],c.l=!1,c.w=c.width();return!1},N=function(){for(var e in s)if(s.hasOwnProperty(e)){e=s[e];var n,r=0;if(e.removeClass(f),e.f){for(e.w=e.width(),n=0;n<e.ln;n++)r+=e.c[n].w;for(n=0;n<e.ln;n++)e.c[n].css("width",h.round(1e3*e.c[n].w/r)/10+"%").l=!0}else E(e),"flex"==e.mode&&e.p&&t&&y(e);b(e.addClass(f))}};e(window).bind("resize."+f,N),e.fn.extend({colResizable:function(t){var n={resizeMode:"fit",draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:!1,minWidth:15,headerOnly:!1,hoverCursor:"e-resize",dragCursor:"e-resize",postbackSafe:!1,flush:!1,marginLeft:null,marginRight:null,disable:!1,partialRefresh:!1,disabledColumns:[],onDrag:null,onResize:null},t=e.extend(n,t);switch(t.fixed=!0,t.overflow=!1,t.resizeMode){case"flex":t.fixed=!1;break;case"overflow":t.fixed=!1,t.overflow=!0}return this.each(function(){v(this,t)})}})}(jQuery),define("colResizable",function(){}),define("advancedSearch",["grid","search","paging","jquery","colResizable","jqExtend","showLoading"],function(e,t,n){var r={callbacks:{onBuy:null}},i=function(e){this.opts=$.extend({},r,e||{}),this.init()};return i.prototype={init:function(){var e=this;e.bindEls(),e.bindEvent(),e.initComponent()},bindEls:function(){var e=this;e.$dialog=$("#advanced-search-dialog"),e.$query=$("#advanced-search-query"),e.$grid=$("#advanced-search-grid"),e.$gridTable=$("#advanced-search-grid-table"),e.$searchLevel=$("#advanced-level-select"),e.$tip=e.$dialog.find("[data-itemId=tip]")},bindEvent:function(){var e=this;e.$dialog.find("[data-itemId=brand]").on("evtChange",function(){e.$tip.addClass("hide")}),e.$searchLevel.on("evtChange",function(){e.changeSearchLevel($(this).find("input").val())})},initComponent:function(){var r=this;r.search=new t({callbacks:{onSelectRenderFinish:function(){r.autoQuery&&r.search.query()},beforeQuery:function(e){return e.brandCode?(r.$tip.hasClass("hide")||r.$tip.addClass("hide"),!0):(r.$tip.removeClass("hide").find(".text").text("请选择品牌"),!1)},onReset:function(){r.$tip.hasClass("hide")||r.$tip.addClass("hide")}},searchWrapId:"advanced-search-query",selectFields:[{name:"brandCode",root:"list",clearTargets:["seriesCode","modelGroupCode","modelCode","groupCode","subGroupCode"],nextTargets:["seriesCode"],noParams:!0},{name:"seriesCode",depend:["brandCode"],root:"list",clearTargets:["modelGroupCode","modelCode","groupCode","subGroupCode"],nextTargets:["modelGroupCode"]},{name:"modelGroupCode",depend:["seriesCode"],root:"list",clearTargets:["modelCode","groupCode","subGroupCode"],nextTargets:["modelCode"]},{name:"modelCode",depend:["modelGroupCode"],root:"list",clearTargets:["subGroupCode"],nextTargets:["groupCode"]},{name:"groupCode",depend:["modelCode"],root:"list",clearTargets:["subGroupCode"],nextTargets:["subGroupCode"]},{name:"subGroupCode",depend:["groupCode"],root:"list"}]}),r.paging=new n({pagingWrapId:"advanced-search-paging"}),r.grid=new e({gridWrapId:"advanced-search-grid",search:r.search,paging:r.paging,callbacks:{onBeforeLoad:function(){var e=this.urls.read,t=e.indexOf("?"),n=t==-1?e:e.slice(0,t);this.urls.read=n+"?queryLevelCode="+r.$searchLevel.find("input").val(),r.$dialog.showLoading()},onRowClicked:function(e,t){$(t.target).attr("data-action")=="add-cart"&&typeof r.opts.callbacks.onBuy=="function"&&r.opts.callbacks.onBuy.apply(null,[{partNo:e[0].partNo}])},onAfterRender:function(){r.toggleGridCont(r.$searchLevel.find("input").val())},onRequestComplente:function(){r.$dialog.hideLoading()}}})},open:function(e,t){var n=this;n.autoQuery=e,t?n.search.setFieldsVal(t):n.search.loadDropDownData(),$.showBlockUI({message:n.$dialog,name:"advanced-search",onUnblock:function(){n.search.reset(),n.grid.clearEmpty(),n.paging.clearEmpty()}}),n.$gridTable.colResizable({disabledColumns:[]})},checkLevel:function(e){var t=this;t.$searchLevel.find("li[data-value="+e+"]").trigger("click")},changeSearchLevel:function(e){var t=this,n=[],r;t.clearDisabled(),e=="MODELGROUP"?(r="modelCode",n=["modelCode","groupCode","subGroupCode","imageCode","imageName"]):e=="SERIES"&&(r="modelGroupCode",n=["modelGroupCode","modelCode","groupCode","subGroupCode","imageCode","imageName"]),t.clearval(n,r),t.disabledField(n),t.toggleGridCont(e)},clearDisabled:function(){var e=this;e.$query.find("[data-name]").removeAttr("disabled"),e.$query.find(".form-select").removeClass("disabled")},clearval:function(e,t){var n=this,r;if(e.length===0)return;for(var i=0;i<e.length;i++)r=n.$query.find("[data-name="+e[i]+"]"),n.search.clearVal(r),e[i]!=t&&n.search.clearOption(r)},disabledField:function(e){var t=this,n;if(e.length==0)return;for(var r=0;r<e.length;r++)n=t.$query.find("[data-name="+e[r]+"]"),n.attr("data-type")=="select"?n.closest(".form-select").addClass("disabled"):n.attr("disabled","disabled")},toggleGridCont:function(e){var t=this;t.$grid.find("[data-field]").show(),e=="MODEL"?t.$grid.find("[data-action=goto-catalog]").show():e=="MODELGROUP"?(fields=["qty","modelName","imageCode","imageName"],t.hideGridEls(fields),t.$grid.find("[data-action=goto-catalog]").hide()):e=="SERIES"&&(fields=["qty","modelName","modelGroupName","imageCode","imageName"],t.hideGridEls(fields),t.$grid.find("[data-action=goto-catalog]").hide())},hideGridEls:function(e){var t=this;for(var n=0;n<e.length;n++)t.$grid.find("[data-field="+e[n]+"]").hide()}},i}),define("modifyPassword",["ajax","dialog","jquery","jqExtend"],function(e,t){var n=function(){this.init()};return n.prototype={init:function(){var e=this;e.bindEls(),e.bindEvent()},bindEls:function(){var e=this;e.$dialog=$("#modify-password-dialog"),e.$oldPassword=e.$dialog.find("[data-id=old-password]"),e.$newPassword=e.$dialog.find("[data-id=new-password]"),e.$confirmPassword=e.$dialog.find("[data-id=confirm-password]"),e.$submit=e.$dialog.find("[data-id=submit]"),e.$cancel=e.$dialog.find("[data-id=cancel]"),e.$tip=e.$dialog.find("[data-id=tip]")},bindEvent:function(){var e=this;e.$submit.click(function(){e.validatePermission()&&e.validate()&&e.submit()}),e.$cancel.click(function(){$.hideBlockUI({message:e.$dialog,name:"modify-password"})})},validatePermission:function(){var e=this,t=pageConfig.userType,n=t&&t===1?!0:!1;return n?(e.showDialog("error","DMS用户不能修改密码"),!1):!0},validate:function(){var e=this;return e.validateSingle(e.$oldPassword)?e.validateSingle(e.$newPassword)?e.validateSingle(e.$confirmPassword)?e.$newPassword.val()!=e.$confirmPassword.val()?(e.showTips("error","新密码与确认密码不一致"),!1):e.$oldPassword.val()===e.$newPassword.val()?(e.showTips("error","新密码与原密码不能相同"),!1):!0:(e.$confirmPassword.focus(),!1):(e.$newPassword.focus(),!1):(e.$oldPassword.focus(),!1)},validateSingle:function(e){var t=this,n=e.val(),r=e.attr("data-label"),i=e.attr("data-reg"),s=new RegExp(i),o;return n.length===0?(t.showTips("error","请输入"+r),e.focus(),!1):i&&!s.test(n)?(o=e.attr("data-message"),t.showTips("error",o),!1):(t.hideTips(),!0)},showTips:function(e,t){var n=this,r=0;types=["error","warn","info","ok","hide"];for(;r<types.length;r++)n.$tip.removeClass(types[r]);n.$tip.addClass(e).find(".text").text(t)},hideTips:function(){var e=this;e.$tip.addClass("hide").find(".text").text("")},submit:function(){var t=this,n={oldpwd:t.$oldPassword.val(),newpwd:t.$newPassword.val()};e.invoke({url:"/common/modifyPassword",type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(e){e.success?t.showDialog("ok","密码修改成功",function(){window.location.reload()}):t.showDialog("error","密码修改失败："+(e.message||"未知错误"))},failed:function(e){t.showDialog("error",e.message)}})},showDialog:function(e,n,r){var i=this;new t({type:e,content:n,onConfirm:function(){typeof r=="function"&&r()}})},open:function(){var e=this;$.showBlockUI({message:e.$dialog,name:"modify-password"})},mustMoidfyPassword:function(){var e=this;e.open(),e.$dialog.find(".layer-close-btn").hide(),e.$cancel.hide(),e.$tip.removeClass("hide"),$(document).off("keyup.modify-password")}},n}),define("modifyEmail",["ajax","dialog","jquery","jqExtend"],function(e,t){var n=function(){this.init()};return n.prototype={init:function(){var e=this;e.bindEls(),e.bindEvent()},bindEls:function(){var e=this;e.$dialog=$("#modify-email-dialog"),e.$password=e.$dialog.find("[data-id=login-password]"),e.$email=e.$dialog.find("[data-id=confirm-email]"),e.$submit=e.$dialog.find("[data-id=submit]"),e.$cancel=e.$dialog.find("[data-id=cancel]"),e.$tip=e.$dialog.find("[data-id=tip]")},bindEvent:function(){var e=this;e.$password.keyup(function(){e.hideTips()}),e.$email.keyup(function(){e.hideTips()}),e.$submit.click(function(){e.validate()&&e.submit()}),e.$cancel.click(function(){$.hideBlockUI({message:e.$dialog,name:"modify-email"})})},validate:function(){var e=this,t=$.trim(e.$password.val()),n=$.trim(e.$email.val()),r=new RegExp(e.$email.attr("data-reg"));return t.length===0||t.length<5||t.length>18?(e.showTips("error","请输入6-18位的登录密码"),e.$password.focus(),!1):n.length===0?(e.showTips("error","请输入邮箱"),e.$email.focus(),!1):r.test(n)?!0:(e.showTips("error","邮箱格式不正确，请重新输入"),e.$email.focus(),!1)},showTips:function(e,t){var n=this,r=0;types=["error","warn","info","ok","hide"];for(;r<types.length;r++)n.$tip.removeClass(types[r]);n.$tip.addClass(e).find(".text").text(t)},hideTips:function(){var e=this;e.$tip.addClass("hide").find(".text").text("")},submit:function(){var t=this,n={password:t.$password.val(),email:t.$email.val()};e.invoke({url:"/common/modifyEmail",type:"POST",contentType:"application/json",data:JSON.stringify(n),success:function(e){e.success?t.showDialog("ok","邮箱修改成功",function(){$.hideBlockUI({message:t.$dialog,name:"modify-email"})}):t.showDialog("error","邮箱修改失败："+(e.message||"未知错误"))},failed:function(e){t.showDialog("error",e.message)}})},showDialog:function(e,n,r){var i=this;new t({type:e,content:n,onConfirm:function(){typeof r=="function"&&r()}})},clear:function(){var e=this;e.$password.val(""),e.$email.val("")},open:function(){var e=this;$.showBlockUI({message:e.$dialog,name:"modify-email",onUnblock:function(){e.clear()}})}},n}),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function s(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return _n(e,t,n,r,!0).utc()}function f(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function l(e){return e._pf==null&&(e._pf=f()),e._pf}function c(e){if(e._isValid==null){var t=l(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function h(e){var t=a(NaN);return e!=null?u(l(t),e):l(t).userInvalidated=!0,t}function p(e){return e===void 0}function v(e,t){var n,r,i;p(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),p(t._i)||(e._i=t._i),p(t._f)||(e._f=t._f),p(t._l)||(e._l=t._l),p(t._strict)||(e._strict=t._strict),p(t._tzm)||(e._tzm=t._tzm),p(t._isUTC)||(e._isUTC=t._isUTC),p(t._offset)||(e._offset=t._offset),p(t._pf)||(e._pf=l(t)),p(t._locale)||(e._locale=t._locale);if(d.length>0)for(n in d)r=d[n],i=t[r],p(i)||(e[r]=i);return e}function g(e){v(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),m===!1&&(m=!0,t.updateOffset(this),m=!1)}function y(e){return e instanceof g||e!=null&&e._isAMomentObject!=null}function b(e){return e<0?Math.ceil(e):Math.floor(e)}function w(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=b(t)),n}function E(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&w(e[o])!==w(t[o]))&&s++;return s+i}function S(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,t){var n=!0;return u(function(){return n&&(S(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function N(e,t){T[e]||(S(t),T[e]=!0)}function C(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function k(e){return Object.prototype.toString.call(e)==="[object Object]"}function L(e){var t,n;for(n in e)t=e[n],C(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function A(e,t){var n=u({},e),r;for(r in t)o(t,r)&&(k(e[r])&&k(t[r])?(n[r]={},u(n[r],e[r]),u(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);return n}function O(e){e!=null&&this.set(e)}function D(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){var t=0,n,r,i,s;while(t<e.length){s=D(e[t]).split("-"),n=s.length,r=D(e[t+1]),r=r?r.split("-"):null;while(n>0){i=H(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&E(s,r,!0)>=n-1)break;n--}t++}return null}function H(e){var t=null;if(!M[e]&&typeof module!="undefined"&&module&&module.exports)try{t=_._abbr,require("./locale/"+e),B(t)}catch(n){}return M[e]}function B(e,t){var n;return e&&(p(t)?n=I(e):n=j(e,t),n&&(_=n)),_._abbr}function j(e,t){return t!==null?(t.abbr=e,M[e]!=null?(N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=A(M[e]._config,t)):t.parentLocale!=null&&(M[t.parentLocale]!=null?t=A(M[t.parentLocale]._config,t):N("parentLocaleUndefined","specified parentLocale is not defined yet")),M[e]=new O(t),B(e),M[e]):(delete M[e],null)}function F(e,t){if(t!=null){var n;M[e]!=null&&(t=A(M[e]._config,t)),n=new O(t),n.parentLocale=M[e],M[e]=n,B(e)}else M[e]!=null&&(M[e].parentLocale!=null?M[e]=M[e].parentLocale:M[e]!=null&&delete M[e]);return M[e]}function I(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return _;if(!r(e)){t=H(e);if(t)return t;e=[e]}return P(e)}function q(){return Object.keys(M)}function U(e,t){var n=e.toLowerCase();R[n]=R[n+"s"]=R[t]=e}function z(e){return typeof e=="string"?R[e]||R[e.toLowerCase()]:undefined}function W(e){var t={},n,r;for(r in e)o(e,r)&&(n=z(r),n&&(t[n]=e[r]));return t}function X(e,n){return function(r){return r!=null?($(this,e,r),t.updateOffset(this,n),this):V(this,e)}}function V(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function $(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function J(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=z(e);if(C(this[e]))return this[e](t)}return this}function K(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function et(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(Z[e]=i),t&&(Z[t[0]]=function(){return K(i.apply(this,arguments),t[1],t[2])}),n&&(Z[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function tt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function nt(e){var t=e.match(Q),n,r;for(n=0,r=t.length;n<r;n++)Z[t[n]]?t[n]=Z[t[n]]:t[n]=tt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function rt(e,t){return e.isValid()?(t=it(t,e.localeData()),Y[t]=Y[t]||nt(t),Y[t](e)):e.localeData().invalidDate()}function it(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;G.lastIndex=0;while(n>=0&&G.test(e))e=e.replace(G,r),G.lastIndex=0,n-=1;return e}function xt(e,t,n){St[e]=C(t)?t:function(e,r){return e&&n?n:t}}function Tt(e,t){return o(St,e)?St[e](t._strict,t._locale):new RegExp(Nt(e))}function Nt(e){return Ct(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Ct(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Lt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=w(e)});for(n=0;n<e.length;n++)kt[e[n]]=r}function At(e,t){Lt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function Ot(e,t,n){t!=null&&o(kt,e)&&kt[e](t,n._a,n,e)}function qt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function zt(e,t){return r(this._months)?this._months[e.month()]:this._months[Rt.test(t)?"format":"standalone"][e.month()]}function Xt(e,t){return r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Rt.test(t)?"format":"standalone"][e.month()]}function Vt(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function $t(e,t){var n;if(!e.isValid())return e;if(typeof t=="string")if(/^\d+$/.test(t))t=w(t);else{t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),qt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Jt(e){return e!=null?($t(this,e),t.updateOffset(this,!0),this):V(this,"Month")}function Kt(){return qt(this.year(),this.month())}function Gt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||en.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function Zt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||en.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function en(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=a([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));t.sort(e),n.sort(e),r.sort(e);for(i=0;i<12;i++)t[i]=Ct(t[i]),n[i]=Ct(n[i]),r[i]=Ct(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")$","i")}function tn(e){var t,n=e._a;return n&&l(e).overflow===-2&&(t=n[_t]<0||n[_t]>11?_t:n[Dt]<1||n[Dt]>qt(n[Mt],n[_t])?Dt:n[Pt]<0||n[Pt]>24||n[Pt]===24&&(n[Ht]!==0||n[Bt]!==0||n[jt]!==0)?Pt:n[Ht]<0||n[Ht]>59?Ht:n[Bt]<0||n[Bt]>59?Bt:n[jt]<0||n[jt]>999?jt:-1,l(e)._overflowDayOfYear&&(t<Mt||t>Dt)&&(t=Dt),l(e)._overflowWeeks&&t===-1&&(t=Ft),l(e)._overflowWeekday&&t===-1&&(t=It),l(e).overflow=t),e}function fn(e){var t,n,r=e._i,i=nn.exec(r)||rn.exec(r),s,o,u,a;if(i){l(e).iso=!0;for(t=0,n=on.length;t<n;t++)if(on[t][1].exec(i[1])){o=on[t][0],s=on[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,n=un.length;t<n;t++)if(un[t][1].exec(i[3])){u=(i[2]||" ")+un[t][0];break}if(u==null){e._isValid=!1;return}}if(!s&&u!=null){e._isValid=!1;return}if(i[4]){if(!sn.exec(i[4])){e._isValid=!1;return}a="Z"}e._f=o+(u||"")+(a||""),Nn(e)}else e._isValid=!1}function ln(e){var n=an.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}fn(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function cn(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<100&&e>=0&&isFinite(u.getFullYear())&&u.setFullYear(e),u}function hn(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function pn(e){return dn(e)?366:365}function dn(e){return e%4===0&&e%100!==0||e%400===0}function mn(){return dn(this.year())}function gn(e,t,n){var r=7+t-n,i=(7+hn(e,0,r).getUTCDay()-t)%7;return-i+r-1}function yn(e,t,n,r,i){var s=(7+n-r)%7,o=gn(e,r,i),u=1+7*(t-1)+s+o,a,f;return u<=0?(a=e-1,f=pn(a)+u):u>pn(e)?(a=e+1,f=u-pn(e)):(a=e,f=u),{year:a,dayOfYear:f}}function bn(e,t,n){var r=gn(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=e.year()-1,s=i+wn(o,t,n)):i>wn(e.year(),t,n)?(s=i-wn(e.year(),t,n),o=e.year()+1):(o=e.year(),s=i),{week:s,year:o}}function wn(e,t,n){var r=gn(e,t,n),i=gn(e+1,t,n);return(pn(e)-r+i)/7}function En(e,t,n){return e!=null?e:t!=null?t:n}function Sn(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function xn(e){var t,n,r=[],i,s;if(e._d)return;i=Sn(e),e._w&&e._a[Dt]==null&&e._a[_t]==null&&Tn(e),e._dayOfYear&&(s=En(e._a[Mt],i[Mt]),e._dayOfYear>pn(s)&&(l(e)._overflowDayOfYear=!0),n=hn(s,0,e._dayOfYear),e._a[_t]=n.getUTCMonth(),e._a[Dt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Pt]===24&&e._a[Ht]===0&&e._a[Bt]===0&&e._a[jt]===0&&(e._nextDay=!0,e._a[Pt]=0),e._d=(e._useUTC?hn:cn).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Pt]=24)}function Tn(e){var t,n,r,i,s,o,u,a;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){s=1,o=4,n=En(t.GG,e._a[Mt],bn(Dn(),1,4).year),r=En(t.W,1),i=En(t.E,1);if(i<1||i>7)a=!0}else{s=e._locale._week.dow,o=e._locale._week.doy,n=En(t.gg,e._a[Mt],bn(Dn(),s,o).year),r=En(t.w,1);if(t.d!=null){i=t.d;if(i<0||i>6)a=!0}else if(t.e!=null){i=t.e+s;if(t.e<0||t.e>6)a=!0}else i=s}r<1||r>wn(n,s,o)?l(e)._overflowWeeks=!0:a!=null?l(e)._overflowWeekday=!0:(u=yn(n,r,i,s,o),e._a[Mt]=u.year,e._dayOfYear=u.dayOfYear)}function Nn(e){if(e._f===t.ISO_8601){fn(e);return}e._a=[],l(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=it(e._f,e._locale).match(Q)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(Tt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&l(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),Z[o]?(i?l(e).empty=!1:l(e).unusedTokens.push(o),Ot(o,i,e)):e._strict&&!i&&l(e).unusedTokens.push(o);l(e).charsLeftOver=a-f,n.length>0&&l(e).unusedInput.push(n),l(e).bigHour===!0&&e._a[Pt]<=12&&e._a[Pt]>0&&(l(e).bigHour=undefined),e._a[Pt]=Cn(e._locale,e._a[Pt],e._meridiem),xn(e),tn(e)}function Cn(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function kn(e){var t,n,r,i,s;if(e._f.length===0){l(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=v({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Nn(t);if(!c(t))continue;s+=l(t).charsLeftOver,s+=l(t).unusedTokens.length*10,l(t).score=s;if(r==null||s<r)r=s,n=t}u(e,n||t)}function Ln(e){if(e._d)return;var t=W(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),xn(e)}function An(e){var t=new g(tn(On(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function On(e){var t=e._i,n=e._f;return e._locale=e._locale||I(e._l),t===null||n===undefined&&t===""?h({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),y(t)?new g(tn(t)):(r(n)?kn(e):n?Nn(e):i(t)?e._d=t:Mn(e),c(e)||(e._d=null),e))}function Mn(e){var n=e._i;n===undefined?e._d=new Date(t.now()):i(n)?e._d=new Date(+n):typeof n=="string"?ln(e):r(n)?(e._a=s(n.slice(0),function(e){return parseInt(e,10)}),xn(e)):typeof n=="object"?Ln(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function _n(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,An(s)}function Dn(e,t,n,r){return _n(e,t,n,r,!1)}function Bn(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return Dn();n=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](n))n=t[i];return n}function jn(){var e=[].slice.call(arguments,0);return Bn("isBefore",e)}function Fn(){var e=[].slice.call(arguments,0);return Bn("isAfter",e)}function qn(e){var t=W(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=I(),this._bubble()}function Rn(e){return e instanceof qn}function Un(e,t){et(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+K(~~(e/60),2)+t+K(~~e%60,2)})}function Wn(e,t){var n=(t||"").match(e)||[],r=n[n.length-1]||[],i=(r+"").match(zn)||["-",0,0],s=+(i[1]*60)+w(i[2]);return i[0]==="+"?s:-s}function Xn(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(y(e)||i(e)?+e:+Dn(e))- +r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):Dn(e).local()}function Vn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function $n(e,n){var r=this._offset||0,i;return this.isValid()?e!=null?(typeof e=="string"?e=Wn(bt,e):Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=Vn(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?hr(this,or(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Vn(this):e!=null?this:NaN}function Jn(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Kn(e){return this.utcOffset(0,e)}function Qn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Vn(this),"m")),this}function Gn(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Wn(yt,this._i)),this}function Yn(e){return this.isValid()?(e=e?Dn(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Zn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function er(){if(!p(this._isDSTShifted))return this._isDSTShifted;var e={};v(e,this),e=On(e);if(e._a){var t=e._isUTC?a(e._a):Dn(e._a);this._isDSTShifted=this.isValid()&&E(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function tr(){return this.isValid()?!this._isUTC:!1}function nr(){return this.isValid()?this._isUTC:!1}function rr(){return this.isValid()?this._isUTC&&this._offset===0:!1}function or(e,t){var n=e,r=null,i,s,u;return Rn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=ir.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:w(r[Dt])*i,h:w(r[Pt])*i,m:w(r[Ht])*i,s:w(r[Bt])*i,ms:w(r[jt])*i}):(r=sr.exec(e))?(i=r[1]==="-"?-1:1,n={y:ur(r[2],i),M:ur(r[3],i),w:ur(r[4],i),d:ur(r[5],i),h:ur(r[6],i),m:ur(r[7],i),s:ur(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(u=fr(Dn(n.from),Dn(n.to)),n={},n.ms=u.milliseconds,n.M=u.months),s=new qn(n),Rn(e)&&o(e,"_locale")&&(s._locale=e._locale),s}function ur(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function ar(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function fr(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=Xn(t,e),e.isBefore(t)?n=ar(e,t):(n=ar(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n)}function lr(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function cr(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(N(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=or(n,r),hr(this,i,e),this}}function hr(e,n,r,i){var s=n._milliseconds,o=lr(n._days),u=lr(n._months);if(!e.isValid())return;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&$(e,"Date",V(e,"Date")+o*r),u&&$t(e,V(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function vr(e,t){var n=e||Dn(),r=Xn(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse",o=t&&(C(t[s])?t[s]():t[s]);return this.format(o||this.localeData().calendar(s,this,Dn(n)))}function mr(){return new g(this)}function gr(e,t){var n=y(e)?e:Dn(e);return!this.isValid()||!n.isValid()?!1:(t=z(p(t)?"millisecond":t),t==="millisecond"?+this>+n:+n<+this.clone().startOf(t))}function yr(e,t){var n=y(e)?e:Dn(e);return!this.isValid()||!n.isValid()?!1:(t=z(p(t)?"millisecond":t),t==="millisecond"?+this<+n:+this.clone().endOf(t)<+n)}function br(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function wr(e,t){var n=y(e)?e:Dn(e),r;return!this.isValid()||!n.isValid()?!1:(t=z(t||"millisecond"),t==="millisecond"?+this===+n:(r=+n,+this.clone().startOf(t)<=r&&r<=+this.clone().endOf(t)))}function Er(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Sr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function xr(e,t,n){var r,i,s,o;return this.isValid()?(r=Xn(e,this),r.isValid()?(i=(r.utcOffset()-this.utcOffset())*6e4,t=z(t),t==="year"||t==="month"||t==="quarter"?(o=Tr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:b(o)):NaN):NaN}function Tr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function Nr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Cr(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?C(Date.prototype.toISOString)?this.toDate().toISOString():rt(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):rt(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function kr(e){var n=rt(this,e||t.defaultFormat);return this.localeData().postformat(n)}function Lr(e,t){return this.isValid()&&(y(e)&&e.isValid()||Dn(e).isValid())?or({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ar(e){return this.from(Dn(),e)}function Or(e,t){return this.isValid()&&(y(e)&&e.isValid()||Dn(e).isValid())?or({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Mr(e){return this.to(Dn(),e)}function _r(e){var t;return e===undefined?this._locale._abbr:(t=I(e),t!=null&&(this._locale=t),this)}function Pr(){return this._locale}function Hr(e){e=z(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function Br(e){return e=z(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function jr(){return+this._d-(this._offset||0)*6e4}function Fr(){return Math.floor(+this/1e3)}function Ir(){return this._offset?new Date(+this):this._d}function qr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Rr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ur(){return this.isValid()?this.toISOString():null}function zr(){return c(this)}function Wr(){return u({},l(this))}function Xr(){return l(this).overflow}function Vr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function $r(e,t){et(0,[e,e.length],0,t)}function Jr(e){return Yr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Kr(e){return Yr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Qr(){return wn(this.year(),1,4)}function Gr(){var e=this.localeData()._week;return wn(this.year(),e.dow,e.doy)}function Yr(e,t,n,r,i){var s;return e==null?bn(this,r,i).year:(s=wn(e,r,i),t>s&&(t=s),Zr.call(this,e,t,n,r,i))}function Zr(e,t,n,r,i){var s=yn(e,t,n,r,i),o=hn(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function ei(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function ti(e){return bn(e,this._week.dow,this._week.doy).week}function ri(){return this._week.dow}function ii(){return this._week.doy}function si(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function oi(e){var t=bn(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function ai(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function li(e,t){return r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function hi(e){return this._weekdaysShort[e.day()]}function di(e){return this._weekdaysMin[e.day()]}function vi(e,t,n){var r,i,s;this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(r=0;r<7;r++){i=Dn([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function mi(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=ai(e,this.localeData()),this.add(e-t,"d")):t}function gi(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function yi(e){return this.isValid()?e==null?this.day()||7:this.day(this.day()%7?e:e-7):e!=null?this:NaN}function bi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function wi(){return this.hours()%12||12}function Ei(e,t){et(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Si(e,t){return t._meridiemParse}function xi(e){return(e+"").toLowerCase().charAt(0)==="p"}function Ni(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Oi(e,t){t[jt]=w(("0."+e)*1e3)}function _i(){return this._isUTC?"UTC":""}function Di(){return this._isUTC?"Coordinated Universal Time":""}function Bi(e){return Dn(e*1e3)}function ji(){return Dn.apply(null,arguments).parseZone()}function Ii(e,t,n){var r=this._calendar[e];return C(r)?r.call(t,n):r}function Ri(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function zi(){return this._invalidDate}function Vi(e){return this._ordinal.replace("%d",e)}function $i(e){return e}function Ki(e,t,n,r){var i=this._relativeTime[n];return C(i)?i(e,t,n,r):i.replace(/%d/i,e)}function Qi(e,t){var n=this._relativeTime[e>0?"future":"past"];return C(n)?n(t):n.replace(/%s/i,t)}function Yi(e,t,n,r){var i=I(),s=a().set(r,t);return i[n](s,e)}function Zi(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return Yi(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=Yi(e,s,n,i);return o}function es(e,t){return Zi(e,t,"months",12,"month")}function ts(e,t){return Zi(e,t,"monthsShort",12,"month")}function ns(e,t){return Zi(e,t,"weekdays",7,"day")}function rs(e,t){return Zi(e,t,"weekdaysShort",7,"day")}function is(e,t){return Zi(e,t,"weekdaysMin",7,"day")}function os(){var e=this._data;return this._milliseconds=ss(this._milliseconds),this._days=ss(this._days),this._months=ss(this._months),e.milliseconds=ss(e.milliseconds),e.seconds=ss(e.seconds),e.minutes=ss(e.minutes),e.hours=ss(e.hours),e.months=ss(e.months),e.years=ss(e.years),this}function us(e,t,n,r){var i=or(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function as(e,t){return us(this,e,t,1)}function fs(e,t){return us(this,e,t,-1)}function ls(e){return e<0?Math.floor(e):Math.ceil(e)}function cs(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=ls(ps(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=b(e/1e3),r.seconds=i%60,s=b(i/60),r.minutes=s%60,o=b(s/60),r.hours=o%24,t+=b(o/24),a=b(hs(t)),n+=a,t-=ls(ps(a)),u=b(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function hs(e){return e*4800/146097}function ps(e){return e*146097/4800}function ds(e){var t,n,r=this._milliseconds;e=z(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+hs(t),e==="month"?n:n/12;t=this._days+Math.round(ps(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function vs(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+w(this._months/12)*31536e6}function ms(e){return function(){return this.as(e)}}function Ns(e){return e=z(e),this[e+"s"]()}function Cs(e){return function(){return this._data[e]}}function Ps(){return b(this.days()/7)}function js(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Fs(e,t,n){var r=or(e).abs(),i=Hs(r.as("s")),s=Hs(r.as("m")),o=Hs(r.as("h")),u=Hs(r.as("d")),a=Hs(r.as("M")),f=Hs(r.as("y")),l=i<Bs.s&&["s",i]||s<=1&&["m"]||s<Bs.m&&["mm",s]||o<=1&&["h"]||o<Bs.h&&["hh",o]||u<=1&&["d"]||u<Bs.d&&["dd",u]||a<=1&&["M"]||a<Bs.M&&["MM",a]||f<=1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,js.apply(null,l)}function Is(e,t){return Bs[e]===undefined?!1:t===undefined?Bs[e]:(Bs[e]=t,!0)}function qs(e){var t=this.localeData(),n=Fs(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Us(){var e=Rs(this._milliseconds)/1e3,t=Rs(this._days),n=Rs(this._months),r,i,s;r=b(e/60),i=b(r/60),e%=60,r%=60,s=b(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,d=t.momentProperties=[],m=!1,T={};t.suppressDeprecationWarnings=!1;var M={},_,R={},Q=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Y={},Z={},st=/\d/,ot=/\d\d/,ut=/\d{3}/,at=/\d{4}/,ft=/[+-]?\d{6}/,lt=/\d\d?/,ct=/\d\d\d\d?/,ht=/\d\d\d\d\d\d?/,pt=/\d{1,3}/,dt=/\d{1,4}/,vt=/[+-]?\d{1,6}/,mt=/\d+/,gt=/[+-]?\d+/,yt=/Z|[+-]\d\d:?\d\d/gi,bt=/Z|[+-]\d\d(?::?\d\d)?/gi,wt=/[+-]?\d+(\.\d{1,3})?/,Et=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,St={},kt={},Mt=0,_t=1,Dt=2,Pt=3,Ht=4,Bt=5,jt=6,Ft=7,It=8;et("M",["MM",2],"Mo",function(){return this.month()+1}),et("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),et("MMMM",0,0,function(e){return this.localeData().months(this,e)}),U("month","M"),xt("M",lt),xt("MM",lt,ot),xt("MMM",function(e,t){return t.monthsShortRegex(e)}),xt("MMMM",function(e,t){return t.monthsRegex(e)}),Lt(["M","MM"],function(e,t){t[_t]=w(e)-1}),Lt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[_t]=i:l(n).invalidMonth=e});var Rt=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ut="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Wt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Qt=Et,Yt=Et,nn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,rn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,sn=/Z|[+-]\d\d(?::?\d\d)?/,on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],un=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],an=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=x("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),et("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),et(0,["YY",2],0,function(){return this.year()%100}),et(0,["YYYY",4],0,"year"),et(0,["YYYYY",5],0,"year"),et(0,["YYYYYY",6,!0],0,"year"),U("year","y"),xt("Y",gt),xt("YY",lt,ot),xt("YYYY",dt,at),xt("YYYYY",vt,ft),xt("YYYYYY",vt,ft),Lt(["YYYYY","YYYYYY"],Mt),Lt("YYYY",function(e,n){n[Mt]=e.length===2?t.parseTwoDigitYear(e):w(e)}),Lt("YY",function(e,n){n[Mt]=t.parseTwoDigitYear(e)}),Lt("Y",function(e,t){t[Mt]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var vn=X("FullYear",!1);t.ISO_8601=function(){};var Pn=x("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Dn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:h()}),Hn=x("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Dn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:h()}),In=function(){return Date.now?Date.now():+(new Date)};Un("Z",":"),Un("ZZ",""),xt("Z",bt),xt("ZZ",bt),Lt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Wn(bt,e)});var zn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var ir=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,sr=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;or.fn=qn.prototype;var pr=cr(1,"add"),dr=cr(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Dr=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});et(0,["gg",2],0,function(){return this.weekYear()%100}),et(0,["GG",2],0,function(){return this.isoWeekYear()%100}),$r("gggg","weekYear"),$r("ggggg","weekYear"),$r("GGGG","isoWeekYear"),$r("GGGGG","isoWeekYear"),U("weekYear","gg"),U("isoWeekYear","GG"),xt("G",gt),xt("g",gt),xt("GG",lt,ot),xt("gg",lt,ot),xt("GGGG",dt,at),xt("gggg",dt,at),xt("GGGGG",vt,ft),xt("ggggg",vt,ft),At(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),At(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),et("Q",0,"Qo","quarter"),U("quarter","Q"),xt("Q",st),Lt("Q",function(e,t){t[_t]=(w(e)-1)*3}),et("w",["ww",2],"wo","week"),et("W",["WW",2],"Wo","isoWeek"),U("week","w"),U("isoWeek","W"),xt("w",lt),xt("ww",lt,ot),xt("W",lt),xt("WW",lt,ot),At(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var ni={dow:0,doy:6};et("D",["DD",2],"Do","date"),U("date","D"),xt("D",lt),xt("DD",lt,ot),xt("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),Lt(["D","DD"],Dt),Lt("Do",function(e,t){t[Dt]=w(e.match(lt)[0],10)});var ui=X("Date",!0);et("d",0,"do","day"),et("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),et("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),et("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),et("e",0,0,"weekday"),et("E",0,0,"isoWeekday"),U("day","d"),U("weekday","e"),U("isoWeekday","E"),xt("d",lt),xt("e",lt),xt("E",lt),xt("dd",Et),xt("ddd",Et),xt("dddd",Et),At(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:l(n).invalidWeekday=e}),At(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var fi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ci="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),pi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");et("DDD",["DDDD",3],"DDDo","dayOfYear"),U("dayOfYear","DDD"),xt("DDD",pt),xt("DDDD",ut),Lt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),et("H",["HH",2],0,"hour"),et("h",["hh",2],0,wi),et("hmm",0,0,function(){return""+wi.apply(this)+K(this.minutes(),2)}),et("hmmss",0,0,function(){return""+wi.apply(this)+K(this.minutes(),2)+K(this.seconds(),2)}),et("Hmm",0,0,function(){return""+this.hours()+K(this.minutes(),2)}),et("Hmmss",0,0,function(){return""+this.hours()+K(this.minutes(),2)+K(this.seconds(),2)}),Ei("a",!0),Ei("A",!1),U("hour","h"),xt("a",Si),xt("A",Si),xt("H",lt),xt("h",lt),xt("HH",lt,ot),xt("hh",lt,ot),xt("hmm",ct),xt("hmmss",ht),xt("Hmm",ct),xt("Hmmss",ht),Lt(["H","HH"],Pt),Lt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Lt(["h","hh"],function(e,t,n){t[Pt]=w(e),l(n).bigHour=!0}),Lt("hmm",function(e,t,n){var r=e.length-2;t[Pt]=w(e.substr(0,r)),t[Ht]=w(e.substr(r)),l(n).bigHour=!0}),Lt("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Pt]=w(e.substr(0,r)),t[Ht]=w(e.substr(r,2)),t[Bt]=w(e.substr(i)),l(n).bigHour=!0}),Lt("Hmm",function(e,t,n){var r=e.length-2;t[Pt]=w(e.substr(0,r)),t[Ht]=w(e.substr(r))}),Lt("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Pt]=w(e.substr(0,r)),t[Ht]=w(e.substr(r,2)),t[Bt]=w(e.substr(i))});var Ti=/[ap]\.?m?\.?/i,Ci=X("Hours",!0);et("m",["mm",2],0,"minute"),U("minute","m"),xt("m",lt),xt("mm",lt,ot),Lt(["m","mm"],Ht);var ki=X("Minutes",!1);et("s",["ss",2],0,"second"),U("second","s"),xt("s",lt),xt("ss",lt,ot),Lt(["s","ss"],Bt);var Li=X("Seconds",!1);et("S",0,0,function(){return~~(this.millisecond()/100)}),et(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),et(0,["SSS",3],0,"millisecond"),et(0,["SSSS",4],0,function(){return this.millisecond()*10}),et(0,["SSSSS",5],0,function(){return this.millisecond()*100}),et(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),et(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),et(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),et(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),U("millisecond","ms"),xt("S",pt,st),xt("SS",pt,ot),xt("SSS",pt,ut);var Ai;for(Ai="SSSS";Ai.length<=9;Ai+="S")xt(Ai,mt);for(Ai="S";Ai.length<=9;Ai+="S")Lt(Ai,Oi);var Mi=X("Milliseconds",!1);et("z",0,0,"zoneAbbr"),et("zz",0,0,"zoneName");var Pi=g.prototype;Pi.add=pr,Pi.calendar=vr,Pi.clone=mr,Pi.diff=xr,Pi.endOf=Br,Pi.format=kr,Pi.from=Lr,Pi.fromNow=Ar,Pi.to=Or,Pi.toNow=Mr,Pi.get=J,Pi.invalidAt=Xr,Pi.isAfter=gr,Pi.isBefore=yr,Pi.isBetween=br,Pi.isSame=wr,Pi.isSameOrAfter=Er,Pi.isSameOrBefore=Sr,Pi.isValid=zr,Pi.lang=Dr,Pi.locale=_r,Pi.localeData=Pr,Pi.max=Hn,Pi.min=Pn,Pi.parsingFlags=Wr,Pi.set=J,Pi.startOf=Hr,Pi.subtract=dr,Pi.toArray=qr,Pi.toObject=Rr,Pi.toDate=Ir,Pi.toISOString=Cr,Pi.toJSON=Ur,Pi.toString=Nr,Pi.unix=Fr,Pi.valueOf=jr,Pi.creationData=Vr,Pi.year=vn,Pi.isLeapYear=mn,Pi.weekYear=Jr,Pi.isoWeekYear=Kr,Pi.quarter=Pi.quarters=ei,Pi.month=Jt,Pi.daysInMonth=Kt,Pi.week=Pi.weeks=si,Pi.isoWeek=Pi.isoWeeks=oi,Pi.weeksInYear=Gr,Pi.isoWeeksInYear=Qr,Pi.date=ui,Pi.day=Pi.days=mi,Pi.weekday=gi,Pi.isoWeekday=yi,Pi.dayOfYear=bi,Pi.hour=Pi.hours=Ci,Pi.minute=Pi.minutes=ki,Pi.second=Pi.seconds=Li,Pi.millisecond=Pi.milliseconds=Mi,Pi.utcOffset=$n,Pi.utc=Kn,Pi.local=Qn,Pi.parseZone=Gn,Pi.hasAlignedHourOffset=Yn,Pi.isDST=Zn,Pi.isDSTShifted=er,Pi.isLocal=tr,Pi.isUtcOffset=nr,Pi.isUtc=rr,Pi.isUTC=rr,Pi.zoneAbbr=_i,Pi.zoneName=Di,Pi.dates=x("dates accessor is deprecated. Use date instead.",ui),Pi.months=x("months accessor is deprecated. Use month instead",Jt),Pi.years=x("years accessor is deprecated. Use year instead",vn),Pi.zone=x("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Jn);var Hi=Pi,Fi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},qi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ui="Invalid date",Wi="%d",Xi=/\d{1,2}/,Ji={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gi=O.prototype;Gi._calendar=Fi,Gi.calendar=Ii,Gi._longDateFormat=qi,Gi.longDateFormat=Ri,Gi._invalidDate=Ui,Gi.invalidDate=zi,Gi._ordinal=Wi,Gi.ordinal=Vi,Gi._ordinalParse=Xi,Gi.preparse=$i,Gi.postformat=$i,Gi._relativeTime=Ji,Gi.relativeTime=Ki,Gi.pastFuture=Qi,Gi.set=L,Gi.months=zt,Gi._months=Ut,Gi.monthsShort=Xt,Gi._monthsShort=Wt,Gi.monthsParse=Vt,Gi._monthsRegex=Yt,Gi.monthsRegex=Zt,Gi._monthsShortRegex=Qt,Gi.monthsShortRegex=Gt,Gi.week=ti,Gi._week=ni,Gi.firstDayOfYear=ii,Gi.firstDayOfWeek=ri,Gi.weekdays=li,Gi._weekdays=fi,Gi.weekdaysMin=di,Gi._weekdaysMin=pi,Gi.weekdaysShort=hi,Gi._weekdaysShort=ci,Gi.weekdaysParse=vi,Gi.isPM=xi,Gi._meridiemParse=Ti,Gi.meridiem=Ni,B("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=w(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=x("moment.lang is deprecated. Use moment.locale instead.",B),t.langData=x("moment.langData is deprecated. Use moment.localeData instead.",I);var ss=Math.abs,gs=ms("ms"),ys=ms("s"),bs=ms("m"),ws=ms("h"),Es=ms("d"),Ss=ms("w"),xs=ms("M"),Ts=ms("y"),ks=Cs("milliseconds"),Ls=Cs("seconds"),As=Cs("minutes"),Os=Cs("hours"),Ms=Cs("days"),_s=Cs("months"),Ds=Cs("years"),Hs=Math.round,Bs={s:45,m:45,h:22,d:26,M:11},Rs=Math.abs,zs=qn.prototype;zs.abs=os,zs.add=as,zs.subtract=fs,zs.as=ds,zs.asMilliseconds=gs,zs.asSeconds=ys,zs.asMinutes=bs,zs.asHours=ws,zs.asDays=Es,zs.asWeeks=Ss,zs.asMonths=xs,zs.asYears=Ts,zs.valueOf=vs,zs._bubble=cs,zs.get=Ns,zs.milliseconds=ks,zs.seconds=Ls,zs.minutes=As,zs.hours=Os,zs.days=Ms,zs.weeks=Ps,zs.months=_s,zs.years=Ds,zs.humanize=qs,zs.toISOString=Us,zs.toString=Us,zs.toJSON=Us,zs.locale=_r,zs.localeData=Pr,zs.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Us),zs.lang=Dr,et("X",0,0,"unix"),et("x",0,0,"valueOf"),xt("x",gt),xt("X",wt),Lt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),Lt("x",function(e,t,n){n._d=new Date(w(e))}),t.version="2.12.0",n(Dn),t.fn=Hi,t.min=jn,t.max=Fn,t.now=In,t.utc=a,t.unix=Bi,t.months=es,t.isDate=i,t.locale=B,t.invalid=h,t.duration=or,t.isMoment=y,t.weekdays=ns,t.parseZone=ji,t.localeData=I,t.isDuration=Rn,t.monthsShort=ts,t.weekdaysMin=is,t.defineLocale=j,t.updateLocale=F,t.locales=q,t.weekdaysShort=rs,t.normalizeUnits=z,t.relativeTimeThreshold=Is,t.prototype=Hi;var Ws=t;return Ws}),function(e,t){"use strict";var n;if(typeof exports=="object"){try{n=require("moment")}catch(r){}module.exports=t(n)}else typeof define=="function"&&define.amd?define("pikaday",["require"],function(e){var r="moment";try{n=e(r)}catch(i){}return t(n)}):e.Pikaday=t(e.moment)}(this,function(e){"use strict";var t=typeof e=="function",n=!!window.addEventListener,r=window.document,i=window.setTimeout,s=function(e,t,r,i){n?e.addEventListener(t,r,!!i):e.attachEvent("on"+t,r)},o=function(e,t,r,i){n?e.removeEventListener(t,r,!!i):e.detachEvent("on"+t,r)},u=function(e,t,n){var i;r.createEvent?(i=r.createEvent("HTMLEvents"),i.initEvent(t,!0,!1),i=b(i,n),e.dispatchEvent(i)):r.createEventObject&&(i=r.createEventObject(),i=b(i,n),e.fireEvent("on"+t,i))},a=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},f=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},l=function(e,t){f(e,t)||(e.className=e.className===""?t:e.className+" "+t)},c=function(e,t){e.className=a((" "+e.className+" ").replace(" "+t+" "," "))},h=function(e){return/Array/.test(Object.prototype.toString.call(e))},p=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},d=function(e){var t=e.getDay();return t===0||t===6},v=function(e){return e%4===0&&e%100!==0||e%400===0},m=function(e,t){return[31,v(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},g=function(e){p(e)&&e.setHours(0,0,0,0)},y=function(e,t){return e.getTime()===t.getTime()},b=function(e,t,n){var r,i;for(r in t){i=e[r]!==undefined;if(i&&typeof t[r]=="object"&&t[r]!==null&&t[r].nodeName===undefined)p(t[r])?n&&(e[r]=new Date(t[r].getTime())):h(t[r])?n&&(e[r]=t[r].slice(0)):e[r]=b({},t[r],n);else if(n||!i)e[r]=t[r]}return e},w=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},E={field:null,bound:undefined,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},S=function(e,t,n){t+=e.firstDay;while(t>=7)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},x=function(e){var t=[];if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&t.push("is-selected"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'">'+'<button class="pika-button pika-day" type="button" '+'data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button>"+"</td>"},T=function(e,t,n){var r=new Date(n,0,1),i=Math.ceil(((new Date(n,t,e)-r)/864e5+r.getDay()+1)/7);return'<td class="pika-week">'+i+"</td>"},N=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},C=function(e){return"<tbody>"+e.join("")+"</tbody>"},k=function(e){var t,n=[];e.showWeekNumber&&n.push("<th></th>");for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+S(e,t)+'">'+S(e,t,!0)+"</abbr></th>");return"<thead>"+(e.isRTL?n.reverse():n).join("")+"</thead>"},L=function(e,t,n,r,i){var s,o,u,a=e._o,f=n===a.minYear,l=n===a.maxYear,c='<div class="pika-title">',p,d,v=!0,m=!0;for(u=[],s=0;s<12;s++)u.push('<option value="'+(n===i?s-t:12+s-t)+'"'+(s===r?" selected":"")+(f&&s<a.minMonth||l&&s>a.maxMonth?"disabled":"")+">"+a.i18n.months[s]+"</option>");p='<div class="pika-label">'+a.i18n.months[r]+'<select class="pika-select pika-select-month" tabindex="-1">'+u.join("")+"</select></div>",h(a.yearRange)?(s=a.yearRange[0],o=a.yearRange[1]+1):(s=n-a.yearRange,o=1+n+a.yearRange);for(u=[];s<o&&s<=a.maxYear;s++)s>=a.minYear&&u.push('<option value="'+s+'"'+(s===n?" selected":"")+">"+s+"</option>");return d='<div class="pika-label">'+n+a.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+u.join("")+"</select></div>",a.showMonthAfterYear?c+=d+p:c+=p+d,f&&(r===0||a.minMonth>=r)&&(v=!1),l&&(r===11||a.maxMonth<=r)&&(m=!1),t===0&&(c+='<button class="pika-prev'+(v?"":" is-disabled")+'" type="button">'+a.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(c+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+a.i18n.nextMonth+"</button>"),c+="</div>"},A=function(e,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+k(e)+C(t)+"</table>"},O=function(o){var u=this,a=u.config(o);u._onMouseDown=function(e){if(!u._v)return;e=e||window.event;var t=e.target||e.srcElement;if(!t)return;f(t,"is-disabled")||(f(t,"pika-button")&&!f(t,"is-empty")&&!f(t.parentNode,"is-disabled")?(u.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),a.bound&&i(function(){u.hide(),a.field&&a.field.blur()},100)):f(t,"pika-prev")?u.prevMonth():f(t,"pika-next")&&u.nextMonth());if(!f(t,"pika-select")){if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}else u._c=!0},u._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;if(!t)return;f(t,"pika-select-month")?u.gotoMonth(t.value):f(t,"pika-select-year")&&u.gotoYear(t.value)},u._onInputChange=function(n){var r;if(n.firedBy===u)return;t?(r=e(a.field.value,a.format,a.formatStrict),r=r&&r.isValid()?r.toDate():null):r=new Date(Date.parse(a.field.value)),p(r)&&u.setDate(r),u._v||u.show()},u._onInputFocus=function(){u.show()},u._onInputClick=function(){u.show()},u._onInputBlur=function(){var e=r.activeElement;do if(f(e,"pika-single"))return;while(e=e.parentNode);u._c||(u._b=i(function(){u.hide()},50)),u._c=!1},u._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,r=t;if(!t)return;!n&&f(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),s(t,"change",u._onChange)));do if(f(r,"pika-single")||r===a.trigger)return;while(r=r.parentNode);u._v&&t!==a.trigger&&r!==a.trigger&&u.hide()},u.el=r.createElement("div"),u.el.className="pika-single"+(a.isRTL?" is-rtl":"")+(a.theme?" "+a.theme:""),s(u.el,"mousedown",u._onMouseDown,!0),s(u.el,"touchend",u._onMouseDown,!0),s(u.el,"change",u._onChange),a.field&&(a.container?a.container.appendChild(u.el):a.bound?r.body.appendChild(u.el):a.field.parentNode.insertBefore(u.el,a.field.nextSibling),s(a.field,"change",u._onInputChange),a.defaultDate||(t&&a.field.value?a.defaultDate=e(a.field.value,a.format).toDate():a.defaultDate=new Date(Date.parse(a.field.value)),a.setDefaultDate=!0));var l=a.defaultDate;p(l)?a.setDefaultDate?u.setDate(l,!0):u.gotoDate(l):u.gotoDate(new Date),a.bound?(this.hide(),u.el.className+=" is-bound",s(a.trigger,"click",u._onInputClick),s(a.trigger,"focus",u._onInputFocus),s(a.trigger,"blur",u._onInputBlur)):this.show()};return O.prototype={config:function(e){this._o||(this._o=b({},E,!0));var t=b(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme=typeof t.theme=="string"&&t.theme?t.theme:null,t.bound=!!(t.bound!==undefined?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn=typeof t.disableDayFn=="function"?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;t.numberOfMonths=n>4?4:n,p(t.minDate)||(t.minDate=!1),p(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate);if(h(t.yearRange)){var r=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||r,t.yearRange[1]=parseInt(t.yearRange[1],10)||r}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||E.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return p(this._d)?t?e(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,r){t&&e.isMoment(n)&&this.setDate(n.toDate(),r)},getDate:function(){return p(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",u(this._o.field,"change",{firedBy:this})),this.draw();typeof e=="string"&&(e=new Date(Date.parse(e)));if(!p(e))return;var n=this._o.minDate,r=this._o.maxDate;p(n)&&e<n?e=n:p(r)&&e>r&&(e=r),this._d=new Date(e.getTime()),g(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),u(this._o.field,"change",{firedBy:this})),!t&&typeof this._o.onSelect=="function"&&this._o.onSelect.call(this,this.getDate())},gotoDate:function(e){var t=!0;if(!p(e))return;if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),i=e.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=i<n.getTime()||r.getTime()<i}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=w(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=w({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){g(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth(),this.draw()},setMaxDate:function(e){g(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth(),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(!this._v&&!e)return;var t=this._o,n=t.minYear,r=t.maxYear,s=t.minMonth,o=t.maxMonth,u="";this._y<=n&&(this._y=n,!isNaN(s)&&this._m<s&&(this._m=s)),this._y>=r&&(this._y=r,!isNaN(o)&&this._m>o&&(this._m=o));for(var a=0;a<t.numberOfMonths;a++)u+='<div class="pika-lendar">'+L(this,a,this.calendars[a].year,this.calendars[a].month,this.calendars[0].year)+this.render(this.calendars[a].year,this.calendars[a].month)+"</div>";this.el.innerHTML=u,t.bound&&t.field.type!=="hidden"&&i(function(){t.trigger.focus()},1),typeof this._o.onDraw=="function"&&this._o.onDraw(this)},adjustPosition:function(){var e,t,n,i,s,o,u,a,f,l;if(this._o.container)return;this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,i=this.el.offsetHeight,s=window.innerWidth||r.documentElement.clientWidth,o=window.innerHeight||r.documentElement.clientHeight,u=window.pageYOffset||r.body.scrollTop||r.documentElement.scrollTop;if(typeof e.getBoundingClientRect=="function")l=e.getBoundingClientRect(),a=l.left+window.pageXOffset,f=l.bottom+window.pageYOffset;else{a=t.offsetLeft,f=t.offsetTop+t.offsetHeight;while(t=t.offsetParent)a+=t.offsetLeft,f+=t.offsetTop}if(this._o.reposition&&a+n>s||this._o.position.indexOf("right")>-1&&a-n+e.offsetWidth>0)a=a-n+e.offsetWidth;if(this._o.reposition&&f+i>o+u||this._o.position.indexOf("top")>-1&&f-i-e.offsetHeight>0)f=f-i-e.offsetHeight;this.el.style.left=a+"px",this.el.style.top=f+"px"},render:function(e,t){var n=this._o,r=new Date,i=m(e,t),s=(new Date(e,t,1)).getDay(),o=[],u=[];g(r),n.firstDay>0&&(s-=n.firstDay,s<0&&(s+=7));var a=t===0?11:t-1,f=t===11?0:t+1,l=t===0?e-1:e,c=t===11?e+1:e,h=m(l,a),v=i+s,b=v;while(b>7)b-=7;v+=7-b;for(var w=0,E=0;w<v;w++){var S=new Date(e,t,1+(w-s)),C=p(this._d)?y(S,this._d):!1,k=y(S,r),L=w<s||w>=i+s,O=1+(w-s),M=t,_=e,D=n.startRange&&y(n.startRange,S),P=n.endRange&&y(n.endRange,S),H=n.startRange&&n.endRange&&n.startRange<S&&S<n.endRange,B=n.minDate&&S<n.minDate||n.maxDate&&S>n.maxDate||n.disableWeekends&&d(S)||n.disableDayFn&&n.disableDayFn(S);L&&(w<s?(O=h+O,M=a,_=l):(O-=i,M=f,_=c));var j={day:O,month:M,year:_,isSelected:C,isToday:k,isDisabled:B,isEmpty:L,isStartRange:D,isEndRange:P,isInRange:H,showDaysInNextAndPreviousMonths:n.showDaysInNextAndPreviousMonths};u.push(x(j)),++E===7&&(n.showWeekNumber&&u.unshift(T(w-s,t,e)),o.push(N(u,n.isRTL)),u=[],E=0)}return A(n,o)},isVisible:function(){return this._v},show:function(){this._v||(c(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(s(r,"click",this._onClick),this.adjustPosition()),typeof this._o.onOpen=="function"&&this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&&(this._o.bound&&o(r,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",l(this.el,"is-hidden"),this._v=!1,e!==undefined&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){this.hide(),o(this.el,"mousedown",this._onMouseDown,!0),o(this.el,"touchend",this._onMouseDown,!0),o(this.el,"change",this._onChange),this._o.field&&(o(this._o.field,"change",this._onInputChange),this._o.bound&&(o(this._o.trigger,"click",this._onInputClick),o(this._o.trigger,"focus",this._onInputFocus),o(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},O}),define("select",["jquery"],function(e){var t={selectClass:"form-select",selectInputClass:"form-select-input",selectTextClass:"form-select-text",selectOptionClass:"form-select-option",selectOptionListClass:"form-select-option-list",selectSwitchBtnClass:"form-select-switch-btn",disbaleClass:"disabled",currentOptionClass:"currentOption",optionValueAttr:"data-value"};(function(e,t){function b(t){var n=t.find(m);if(n.eq(0).find(v).size()===0)return;n.eq(0).show();var r=E(t).value;t.find(v).each(function(){var t=e(this);t.removeClass(l),t.attr(c)===r&&t.addClass(l)})}function w(e){e.find(m).eq(0).hide()}function E(e){return{value:e.find(p).val(),text:e.find(d).text()}}function S(t){var n=E(t).value,r;return t.find(v).each(function(t){if(e(this).attr(c)===n)return r=t,!1}),r}function x(e,t){var n=e.find(v);n.removeClass(l),n.eq(t).addClass(l)}function T(e,t,n){e.find(p).val(t).end().find(d).text(n).attr("title",n),x(e,S(e)),e.trigger("evtChange")}function N(e){return e.hasClass(f)?!0:!1}function C(e,t){var r=[{str:"0",shiftStr:")",code:48},{str:"1",shiftStr:"!",code:49},{str:"2",shiftStr:"@",code:50},{str:"3",shiftStr:"#",code:51},{str:"4",shiftStr:"$",code:52},{str:"5",shiftStr:"%",code:53},{str:"6",shiftStr:"^",code:54},{str:"7",shiftStr:"&",code:55},{str:"8",shiftStr:"*",code:56},{str:"9",shiftStr:"(",code:57},{str:"a",shiftStr:"A",code:65},{str:"b",shiftStr:"B",code:66},{str:"c",shiftStr:"C",code:67},{str:"d",shiftStr:"D",code:68},{str:"e",shiftStr:"E",code:69},{str:"f",shiftStr:"F",code:70},{str:"g",shiftStr:"G",code:71},{str:"h",shiftStr:"H",code:72},{str:"i",shiftStr:"I",code:73},{str:"j",shiftStr:"J",code:74},{str:"k",shiftStr:"K",code:75},{str:"l",shiftStr:"L",code:76},{str:"m",shiftStr:"M",code:77},{str:"n",shiftStr:"N",code:78},{str:"o",shiftStr:"O",code:79},{str:"p",shiftStr:"P",code:80},{str:"q",shiftStr:"Q",code:81},{str:"r",shiftStr:"R",code:82},{str:"s",shiftStr:"S",code:83},{str:"t",shiftStr:"T",code:84},{str:"u",shiftStr:"U",code:85},{str:"v",shiftStr:"V",code:86},{str:"w",shiftStr:"W",code:87},{str:"x",shiftStr:"X",code:88},{str:"y",shiftStr:"Y",code:89},{str:"z",shiftStr:"Z",code:90}];n=r.length,index=-1;for(var i=0;i<n;i++)r[i].code===e&&(index=i);return index===-1?"":t?r[index].shiftStr:r[index].str}function k(e,t){var n=e.find(m),r=e.find(v),i=r.eq(t);i.position().top<=0?n.scrollTop(n.scrollTop()+i.position().top):n.scrollTop(n.scrollTop()+i.position().top+i.outerHeight()-n.height())}var r=t.selectClass||"form-select",i=t.selectInputClass||"form-select-input",s=t.selectTextClass||"form-select-text",o=t.selectOptionClass||"form-select-option",u=t.selectOptionListClass||"form-select-option-list",a=t.selectSwitchBtnClass||"form-select-switch-btn",f=t.disbaleClass||"disabled",l=t.currentOptionClass||"currentOption",c=t.optionValueAttr||"data-value",h="."+r,p="."+i,d="."+s,v="."+o,m="."+u,g="."+a,y="."+l;e(document).on("click",h,function(){var t=e(this);if(N(t)){t.find(g).blur();return}t.find(g).focus()}),e(document).on("click",g,function(t){$thisSelect=e(this).parents(h);if(N($thisSelect))return;$thisSelect.find(m).is(":hidden")?b($thisSelect):w($thisSelect),t.preventDefault()}),e(document).on("click",function(t){var n;e(t.target).parents(h).size()>0?n=e(t.target).parents(h):e(t.target).hasClass(h)&&(n=e(t.target)),e(h).each(function(){var t=e(this);if(n&&t[0]===n[0])return;w(t)})}),e(document).on("mouseenter",h+" "+v,function(){var t=e(this),n=t.parents(h),r=n.find(v);r.removeClass(l),t.addClass(l)}),e(document).on("click",h+" "+v,function(){var t=e(this),n=t.parents(h),r=t.text(),i=t.attr(c);T(n,i,r),w(n)}),e(document).on("keydown",function(t){var n,r,i,s,o,u,a,f,l=[],p=0,d=-1,m=e(document.activeElement);if(m.parents(h).size()>0){n=m.parents(h);if(N(n))return;o=n.find(v),u=o.size(),i=n.find(y),s=i.index();if(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90){f=C(t.keyCode,t.shiftKey),o.each(function(t){var n=e(this),r=n.text(),i=n.attr(c);r[0]===f&&l.push({value:i,text:r,index:t})}),p=l.length;if(p===0)return;r=E(n).value;for(var g=0;g<p;g++)l[g].value===r&&(d=g);d!==-1?d==p-1?a=l[0].index:a=l[d+1].index:a=l[0].index,T(n,o.eq(a).attr(c),o.eq(a).text()),k(n,a)}if(t.keyCode==38||t.keyCode==40)t.keyCode==38&&(s===-1?a=u-1:s!=0?a=s-1:a=u-1),t.keyCode==40&&(s===-1?a=0:s!=u-1?a=s+1:a=0),T(n,o.eq(a).attr(c),o.eq(a).text()),k(n,a),t.preventDefault();t.keyCode==13&&i.size()>0&&T(n,i.attr(c),i.text())}})})(e,t)}),define("notice",["ajax","mustache","grid","search","paging","dialog","moment","pikaday","jquery","colResizable","jqExtend","showLoading","select"],function(e,t,n,r,i,s,o,u){defaultOpts={callbacks:{onReloadCount:null}};var a=function(e){this.opts=$.extend({},defaultOpts,e||{}),this.init()};return a.prototype={init:function(){var e=this;e.bindEls(),e.initComponent(),e.bindEvent(),e.loadType()},initComponent:function(){var e=this;e.search=new r({searchWrapId:"notice-query",callbacks:{onGetParamsAfter:function(e){e.issueAfter&&(e.issueAfter=o(e.issueAfter).format("YYYY-MM-DD"));if(e.issueBefore){var t=o(e.issueBefore).add(1,"day");e.issueBefore=t.format("YYYY-MM-DD")}}}}),e.paging=new i({pagingWrapId:"notice-paging"}),e.grid=new n({search:e.search,paging:e.paging,gridWrapId:"notice-grid",callbacks:{onRowClicked:function(t,n){var r=$(n.target).attr("data-action");r==="set-already"&&e.requestSingleAlready(t[0].code)},onBeforeLoad:function(){e.$dialog.showLoading()},onRequestComplente:function(){e.$dialog.hideLoading()},onAfterLoad:function(e){var t=e.list;if(t)for(var n=0;n<t.length;n++)t[n].date=t[n].publishOn?o(Number(t[n].publishOn)).format("YYYY-MM-DD hh:mm:ss"):null}}}),e.startDate=new u({field:$("#notice-start-date")[0],format:"YYYY-MM-DD"}),e.endDate=new u({field:$("#notice-end-date")[0],format:"YYYY-MM-DD"})},bindEls:function(){var e=this;e.$dialog=$("#notice-dialog"),e.$query=$("#notice-query"),e.$allSetAlready=e.$dialog.find("[data-itemId=all-set-already]"),e.$noticeType=e.$query.find("[data-name=typeCode]").closest(".form-select").find("ul"),e.$issueDateBefore=e.$query.find("[data-name=issueBefore]"),e.$issueDateAfter=e.$query.find("[data-name=issueAfter]"),e.$gridTable=e.$dialog.find("#notice-grid-table")},bindEvent:function(){var e=this;e.$allSetAlready.click(function(){e.allSetAlready()})},loadType:function(){var t=this;e.invoke({type:"GET",url:"/epc/notice/getType",success:function(e){t.renderType(e)}})},renderType:function(e){var n=this,r='<li data-value="" class="form-select-option currentOption">请选择</li>{{#list}}<li data-value="{{code}}" title="{{name}}" class="form-select-option">{{name}}</li>{{/list}}',i=t.render(r,{list:e});n.$noticeType.html(i)},allSetAlready:function(){var e=this;new s({type:"warn",content:"是否确认全部设为已读",cancelBtn:!0,onConfirm:function(){e.requestSetAlready()}})},requestSingleAlready:function(t){var n=this,r=r?r:{};e.invoke({type:"POST",url:"/epc/notice/setSingleAlready",data:{code:t},success:function(){n.requestSuccess()}})},requestSetAlready:function(){var t=this;e.invoke({type:"GET",url:"/epc/notice/setAllAlready",cache:!1,success:function(){t.requestSuccess()}})},requestSuccess:function(){var e=this;e.paging.doPaging(),e.reloadCount()},reloadCount:function(){var e=this;typeof e.opts.callbacks.onReloadCount=="function"&&e.opts.callbacks.onReloadCount.apply(null)},open:function(){var e=this;$.showBlockUI({message:e.$dialog,name:"notice-search",onBlock:function(){e.search.query()},onUnblock:function(){e.search.reset()}}),e.$gridTable.colResizable({disabledColumns:[]})}},a}),define("supersessionSearch",["search","grid","jquery","colResizable","jqExtend","showLoading"],function(e,t){var n={callbacks:{onClickedSupersessionDetail:null}},r=function(e){this.opts=$.extend({},n,e||{}),this.init()};return r.prototype={init:function(){var e=this;e.bindEls(),e.initComponent()},bindEls:function(){var e=this;e.$dialog=$("#supersession-search-dialog"),e.$tip=e.$dialog.find(".tips"),e.$gridTable=e.$dialog.find("#supersession-search-grid-table")},initComponent:function(){var n=this;n.search=new e({searchWrapId:"supersession-search-query",callbacks:{beforeQuery:function(e){return e.partNo?(n.hideTips(),!0):(n.showTips("请输入配件件号"),!1)},onReset:function(){n.hideTips()}}}),n.grid=new t({search:n.search,gridWrapId:"supersession-search-grid",callbacks:{onRowClicked:function(e,t){var r=$(t.target).attr("data-action");r==="supersession-detail"&&n.showSupersessionDetail($(t.target))},onBeforeLoad:function(){n.$dialog.showLoading()},onAfterLoad:function(){n.$dialog.hideLoading()}}})},showTips:function(e){var t=this;t.$tip.removeClass("hide").find(".text").text(e)},hideTips:function(){var e=this;e.$tip.hasClass("hide")||e.$tip.addClass("hide")},setFieldsVal:function(e){var t=this,n,r;for(n in e)r=t.$query.find("[data-name="+n+"]"),r.length>0&&r.val(e[n]);t.load()},open:function(e){var t=this;$.showBlockUI({message:t.$dialog,name:"supersession-search",onBlock:function(){e&&(t.search.setFieldsVal(e),t.search.query())},onUnblock:function(){t.search.reset(),t.grid.clearEmpty()}}),t.$gridTable.colResizable({disabledColumns:[]})},showSupersessionDetail:function(e){var t=this;typeof t.opts.callbacks.onClickedSupersessionDetail=="function"&&(params={},params.code=e.attr("data-code"),t.opts.callbacks.onClickedSupersessionDetail.apply(this,[params,t.$dialog]))}},r}),define("userinfo",["ajax","mustache","moment","dialog","blockUI","jqExtend","jquery","showLoading"],function(e,t,n,r){var i=function(){this.init()};return i.prototype={init:function(){var e=this;e.bindEls(),e.bindEvent(),e.bindAttr(),e.load()},bindEls:function(){var e=this;e.$dialog=$("#user-info-dialog"),e.$contBody=$("#user-info-body")},bindAttr:function(){var e=this;e.template=e.$contBody.find("script").html()},bindEvent:function(){var e=this,t;e.$contBody.on("click","[data-id]",function(){t=$(this).attr("data-id");switch(t){case"edit":e.editPhone();break;case"save":e.savePhone();break;case"cancel":e.cancelPhone();break;default:}})},load:function(){var t=this;e.invoke({url:"/epc/user",cache:!1,type:"GET",success:function(e){t.render(t.buildData(e))}})},buildData:function(e){var t=this;return e.expirationTime&&(e.expirationTime=n(e.expirationTime).format("YYYY-MM-DD")),e},render:function(e){var n=this,r=t.render(n.template,{record:e});n.$contBody.html(r)},open:function(){var e=this;$.showBlockUI({message:e.$dialog,name:"user-info"})},editPhone:function(){var e=this;e.$dialog.find("[data-field=phone-info]").addClass("hide"),e.$dialog.find("[data-field=phone-edit]").removeClass("hide")},savePhone:function(){var t=this;if(!t.validatePhone())return;t.$dialog.showLoading(),e.invoke({url:"/epc/user",type:"PUT",contentType:"application/json",data:JSON.stringify({telephone:t.$dialog.find("[data-field=phone-edit]").find("input").val(),username:pageConfig.username}),success:function(e){t.load()},complete:function(){t.$dialog.hideLoading()}})},cancelPhone:function(){var e=this;e.$dialog.find("[data-field=phone-info]").removeClass("hide"),e.$dialog.find("[data-field=phone-edit]").addClass("hide")},validatePhone:function(){var e=this,t=$.trim(e.$dialog.find("[data-field=phone-edit]").find("input").val());if(t.length==0)return new r({type:"error",content:"请输入联系电话"}),!1;if(!telReg.test(t)){var n='<div class="layer user-info-tip-layer" style="display:block;" id="user-info-tip-layer"><div class="layer-title"><span class="page-title"><span class="text">错误</span></span><a href="javascript:;" class="layer-close-btn"></a></div><div class="layer-cont-wrapper">请输入正确的格式：</br>1.输入数字要求为半角数字</br>2.手机号码(1 + 10位数字）</br>示例：18912345678</br>3.座机号码(区号-7/8电话号码-1/4分机号) </br>  示例： "021-12345678"、"0571-12345678-241"</div></div>';return $.showBlockUI({message:n,css:{left:0,top:0,width:e.$dialog.width(),height:e.$dialog.height()},name:"userinfo-tip",parent:e.$dialog,onBlock:function(){$("#user-info-tip-layer").find(".layer-close-btn").on("click",function(){$.hideBlockUI({message:n,parent:e.$dialog,name:"userinfo-tip",fadeOut:0,onUnblock:function(){$("#user-info-tip-layer").find(".layer-close-btn").off("click")}})})}}),!1}return!0}},i}),define("vinAnalysis",["ajax","mustache","jquery","showLoading"],function(e,t){var n=function(){this.init()};return n.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.bindEvent()},bindEls:function(){var e=this;e.$dialog=$("#vin-analysis-dialog"),e.$query=$("#vin-analysis-query"),e.$result=$("#vin-analysis-result"),e.$btnSearch=e.$dialog.find("[data-id=search]"),e.$btnClear=e.$dialog.find("[data-id=reset]"),e.$vinInput=e.$query.find("[data-name=vin]")},bindAttr:function(){var e=this;e.template=e.$result.find("script").html()},bindEvent:function(){var e=this;e.$vinInput.keyup(function(t){t.keyCode===13&&e.load()}),e.$btnSearch.click(function(){e.load()}),e.$btnClear.click(function(){e.hideTips(),e.$result.hide(),e.$query.find("input[data-name]").val("")})},validate:function(e){var t=this;return e.length!=17?(t.showTips("请输入17位的整车编码"),t.$result.hide(),!1):(t.hideTips(),!0)},showTips:function(e){var t=this,n=t.$dialog.find(".tips");n.parent().show(),n.find(".text").text(e)},hideTips:function(){var e=this,t=e.$dialog.find(".tips");t.parent().hide()},load:function(){var t=this,n=$.trim(t.$vinInput.val());if(!t.validate(n))return;t.$dialog.showLoading(),e.invoke({url:"/epc/vin?vin="+n,beforeSend:function(){t.hideTips(),t.$result.hide()},complete:function(){t.$dialog.hideLoading()},success:function(e){e.success?e.data?t.render(e.data):t.noRender(e):t.showTips(e.message||"出错了，请重试或联系客服")}})},render:function(e){var n=this,r=t.render(n.template,{record:e});n.$result.html(r).show()},noRender:function(){var e=this;e.showTips("未查询到相关信息")},fillSearch:function(e){var t=this,n;if(!e)return!1;n=t.$query.find("[data-name="+e.key+"]"),n.length>0&&n.val(e.val)},open:function(e){var t=this;t.fillSearch(e),$.showBlockUI({message:t.$dialog,name:"vin-analysis"}),t.load()}},n}),define("headerSearch",["dialog","ajax","mustache","jquery","jqExtend"],function(e,t,n){var r={callbacks:{onSearch:null}},i=function(e){this.opts=$.extend({},r,e||{}),this.init()};return i.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.bindEvent()},bindEls:function(){var e=this;e.$searchSelect=$("#header-search-select"),e.$searchBox=$("#header-search-box"),e.$searchBtn=$("#header-search-btn"),e.$searchClose=$("#header-search-close"),e.$autocomplete=$("#header-autocomplete"),e.$autocompleteList=$("#header-autocomplete-list")},bindAttr:function(){var e=this;e.template=e.$autocompleteList.find("script").html(),e.index=0},bindEvent:function(){var e=this;e.$searchBox.on("keyup",function(t){t.keyCode===13?e.$searchBtn.trigger("click"):e.$searchSelect.find("input").val()==="vin"&&e.changeInputVal(e)}),e.$searchClose.click(function(){e.$searchBox.val(""),e.changeInputVal()}),e.$autocompleteList.on("click","li",function(){e.$searchBox.val($(this).text()),e.$searchBtn.trigger("click"),e.clearAutocomplete()}),e.$searchBtn.click(function(){e.$searchBox.blur(),e.clearAutocomplete(),e.validate()&&typeof e.opts.callbacks.onSearch=="function"&&(type=e.$searchSelect.selectElByField(),val=e.$searchBox.val(),e.opts.callbacks.onSearch.apply(null,[type,val]))}),e.$searchSelect.on("evtChange",function(){e.$searchBox.val(""),e.changeInputVal()})},validate:function(){var t=this,n=$.trim(t.$searchBox.val());return n.length==0?(new e({type:"error",title:"提示",content:"请输入查询内容"}),!1):!0},changeInputVal:function(){var e=this,t=e.$searchBox,n=e.$searchSelect.selectElByField(),r=$.trim(t.val());e.$searchClose.removeClass("show"),e.$searchBox.removeClass("short"),r.length>0&&(e.$searchClose.addClass("show"),e.$searchBox.removeClass("short").addClass("short")),r.length>=6?e.autocomplete(r):e.clearAutocomplete()},autocomplete:function(e){var n=this;t.invoke({url:"/epc/vin/vinAutocomplete?vinNo="+e,success:function(e){e.list.length>0&&n.render(e)}})},render:function(e){var t=this,r=n.render(t.template,{list:e.list});t.$autocompleteList.html(r),t.$autocomplete.show(),t.index=0},clearAutocomplete:function(){var e=this;e.$autocompleteList.html(""),e.$autocomplete.hide()},keyUp:function(e){var t=this,n=e.keyCode,r=t.$autocompleteList.find("li").length;switch(n){case 38:t.index==0?t.index=r-1:t.index=t.index-1,t.checkOption();break;case 40:t.index<=r?t.index=t.index+1:t.index=0,t.checkOption();break;case 13:break;default:}},checkOption:function(){var e=this,t=e.$autocompleteList.find("li").eq(e.index);e.$searchBox.val(t.text()),t.addClass("currentOption").siblings().removeClass("currentOption"),e.setScrollView(t)},setScrollView:function(e){var t=this,n=e.outerHeight(),r=t.$autocomplete.height(),i=e.scrollTop();i+n<r&&t.$autocomplete.scrollTop(i+n)},checkSearchType:function(e){var t=this;t.$searchSelect.find("input").val(e.type),t.$searchSelect.find(".form-select-text").text(t.$searchSelect.find("[data-value="+e.type+"]").text())},setSearchVal:function(e){var t=this;t.$searchBox.val(e)}},i}),define("vehicleCode",["ajax","mustache","jquery","showLoading"],function(e,t){var n=function(){this.init()};return n.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.bindEvent()},bindEls:function(){var e=this;e.$dialog=$("#vehicle-code-dialog"),e.$query=$("#vehicle-code-query"),e.$result=$("#vehicle-code-result"),e.$btnSearch=e.$dialog.find("[data-id=search]"),e.$btnClear=e.$dialog.find("[data-id=reset]"),e.$vehicleCodeInput=e.$query.find("[data-name=vehicleCode]")},bindAttr:function(){var e=this;e.template=e.$result.find("script").html()},bindEvent:function(){var e=this;e.$vehicleCodeInput.keyup(function(t){t.keyCode===13&&e.load()}),e.$btnSearch.click(function(){e.load()}),e.$btnClear.click(function(){e.hideTips(),e.$result.hide(),e.$query.find("input[data-name]").val("")})},validate:function(e){var t=this;return e.length!=18?(t.showTips("请输入18位的整车编码"),t.$result.hide(),!1):(t.hideTips(),!0)},showTips:function(e){var t=this,n=t.$dialog.find(".tips");n.parent().show(),n.find(".text").text(e)},hideTips:function(){var e=this,t=e.$dialog.find(".tips");t.parent().hide()},load:function(){var t=this,n=$.trim(t.$vehicleCodeInput.val());if(!t.validate(n))return;t.$dialog.showLoading(),e.invoke({url:"/epc/vehicle?vehicleCode="+n,beforeSend:function(){t.hideTips(),t.$result.hide()},complete:function(){t.$dialog.hideLoading()},success:function(e){e.success?e.data?t.render(e.data):t.noRender(e):t.showTips(e.message||"出错了，请重试或联系客服")}})},render:function(e){var n=this,r=t.render(n.template,{record:e});n.$result.html(r).show()},noRender:function(){var e=this;e.showTips("未查询到相关信息")},fillSearch:function(e){var t=this,n;if(!e)return!1;n=t.$query.find("[data-name="+e.key+"]"),n.length>0&&n.val(e.val)},open:function(e){var t=this;t.fillSearch(e),$.showBlockUI({message:t.$dialog,name:"vehicle-code"}),t.load()}},n}),define("supersessionDetail",["ajax","mustache","jquery","jqExtend","showLoading"],function(e,t){var n=function(){this.init()};return n.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr()},bindEls:function(){var e=this;e.$dialog=$("#supersession-detail-dialog"),e.$contWrap=$("#supersession-detail-dialog-cont")},bindAttr:function(){var e=this;e.template=e.$dialog.find("script").html()},load:function(t){var n=this;e.invoke({url:"/epc/supersession/getSupersessionDetail?code="+n.code,complete:function(){},success:function(e){n.render(n.buildData(e)),t()}})},buildData:function(e){var t=this,n=e.olds,r=e.news;for(var i=0;i<n.length;i++)n[i].rowNumber=i+1;for(var i=0;i<r.length;i++)r[i].rowNumber=i+1;return e},render:function(e){var n=this,r=t.render(n.template,{record:e});n.$contWrap.html(r)},open:function(e,t){var n=this;n.code=e.code,n.$dialog.find("[data-id=supersession-number]").text(e.code),n.load(function(){n.showDialog(t)})},showDialog:function(e){var t=this,n;e?n={parent:e,message:t.$dialog,name:"supersession-detail"}:n={message:t.$dialog,name:"supersession-detail"},$.showBlockUI(n)}},n}),define("questionnaireList",["ajax","mustache","dialog","moment","showLoading","jquery","colResizable"],function(e,t,n,r){var i={questionnaireLayer:"#questionnaire-list-dialog",questionnaireLayerContent:".layer-cont-wrapper",questionnaireTempl:"#questionnaire-list-templ",questionnaireWrapper:"#questionnaire-list-wrapper",searchLinkCls:".search-link",callbacks:{onSearch:null}},s=function(e){this.opts=$.extend(!0,{},i,e||{}),this.init()};return s.prototype={init:function(){var e=this;this.initEls(),this.initEvents()},initEls:function(){var e=this;e.questionnaireLayer=$(e.opts.questionnaireLayer),e.layerContent=e.questionnaireLayer.find(e.opts.questionnaireLayerContent),e.questionnaireTempl=e.questionnaireLayer.find(e.opts.questionnaireTempl),e.questionnaireWrapper=e.questionnaireLayer.find(e.opts.questionnaireWrapper),e.$gridTable=$("#questionnaire-list-grid-table")},initEvents:function(){var e=this;$(document).on("click",e.opts.searchLinkCls,function(t){typeof e.opts.callbacks.onSearch=="function"&&e.opts.callbacks.onSearch.call(null,$(this))})},open:function(){var e=this;$.showBlockUI({message:e.questionnaireLayer,name:"问卷调查",onBlock:function(){e.getQestionnaireList()}}),e.$gridTable.colResizable({disabledColumns:[]})},getQestionnaireList:function(){var t=this;e.invoke({url:"/common/getQuestionnaireList",type:"GET",beforeSend:function(){t.layerContent.showLoading()},success:function(e){t.reconstructData(e)},failed:function(e){new n({type:"error",title:"提示",content:e.message||"查询失败"})},complete:function(){t.layerContent.hideLoading()}})},reconstructData:function(e){var t=this;for(var n=0;n<e.length;n++){var i=e[n];i.createTime=i.issueOn?r(i.issueOn).format("YYYY-MM-DD HH:mm:ss"):"",i.number=n+1}t.renderTempl(e)},renderTempl:function(e){var n=this,r=n.questionnaireTempl.html();n.questionnaireWrapper.html(t.render(r,{list:e}))}},s}),define("header",["require","ajax","mustache","miniCart","advancedSearch","modifyPassword","modifyEmail","notice","supersessionSearch","userinfo","vinAnalysis","headerSearch","vehicleCode","supersessionDetail","questionnaireList","dialog","select","jquery","jqExtend"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=function(){this.init()};return m.prototype={init:function(){var e=this;e.bindEls(),e.buildAttrs(),e.initComponent(),e.bindEvent(),e.isNeed("nav-questionnaire-link")&&e.initQuestionnaire(),e.isNeed("nav-lang-link")&&e.loadLang(),e.isNeed("nav-notice-link")&&e.loadNoticeCount(),e.isNeed("nav-questionnaire-link")&&e.loadQuestionnaireCount(),e.initHeaderSearchVal(),e.initOpenModifyPasswrod()},initComponent:function(){var e=this;e.advancedSearch=new i({callbacks:{onBuy:function(t){e.addToCart(t)}}}),e.modifyPassword=new s,e.modifyEmail=new o,e.notice=new u({callbacks:{onReloadCount:function(){e.loadNoticeCount()}}}),e.supersessionSearch=new a({callbacks:{onClickedSupersessionDetail:function(t,n){e.supersessionDetail.open(t,n)}}}),e.userinfo=new f,e.vinAnalysis=new l,e.headerSearch=new c({callbacks:{onSearch:function(t,n){e.search(t,n)}}}),e.vehicleCode=new h,e.supersessionDetail=new p,e.miniCart=new r({callbacks:{onSetCartCount:function(t){e.setCartCount(t)}}}),e.questionnaireList=new d({callbacks:{onSearch:function(t){e.afterSearchClick(t)}}})},bindEls:function(){var e=this;e.$navigation=$("#page-navigation"),e.$header=$("#page-header"),e.$crumbs=$("#crumbs"),e.$questionnaire=e.$navigation.find("[data-action=questionnaire]"),e.$noticeCount=e.$navigation.find("[data-action=notice] .num-wrap"),e.$cartCount=e.$navigation.find("[data-action=shopping-cart] .num-wrap"),e.$questionnaireCount=e.$navigation.find("[data-action=open-questionnaire] .num-wrap"),e.$langList=$("#nav-lang-list")},buildAttrs:function(){var e=this;e.questionnaireCount=0},bindEvent:function(){var e=this,t;e.$navigation.on("click","[data-action]",function(){t=$(this).attr("data-action");switch(t){case"shopping-cart":break;case"notice":e.notice.open();break;case"open-questionnaire":e.openQuestionnaire();break;case"user-info":e.userinfo.open();break;case"modify-password":e.modifyPassword.open();break;case"modify-email":e.modifyEmail.open();break;case"en":e.changeLang(t);break;case"zh":e.changeLang(t);break;default:}}),e.$header.on("click","a[data-action]",function(){t=$(this).attr("data-action");switch(t){case"advanced-search":e.advancedSearch.open(!0,e.getCrumbsData());break;case"supersession-search":e.supersessionSearch.open();break;default:}})},search:function(e,t){var n=this,r=e.value||"";switch(r){case"vin":n.openVinAnalysis({key:"vin",val:t});break;case"part-no":n.openAdvancedSearch({partNo:t});break;case"part-name":n.openAdvancedSearch({partName:t});break;case"vehicle-code":n.openVehicleCode({key:"vehicleCode",val:t});break;default:}},initQuestionnaire:function(){var e=this;t.invoke({url:"/common/questionnaireExist",type:"GET",success:function(t){t&&t.exist&&e.$questionnaire.removeClass("hide")}})},openQuestionnaire:function(){var e=this;e.loadQuestionnaireCount(),e.questionnaireList.open()},openVinAnalysis:function(e){var t=this;t.vinAnalysis.open(e)},openVehicleCode:function(e){var t=this;t.vehicleCode.open(e)},openAdvancedSearch:function(e){var t=this,n=t.getCrumbsData();n.brandCode&&(e.brandCode=n.brandCode),t.advancedSearch.open(!0,e)},openAdvancedFromApply:function(e){var t=this,n=e.attr("data-partNo"),r=t.getCrumbsData(),i={},s;r.modelCode?(delete r.modelCode,i=r,s="MODEL"):r.modelGroupCode?(i.brandCode=r.brandCode,i.seriesCode=r.seriesCode,s="MODELGROUP"):(i.brandCode=r.brandCode,s="SERIES"),i.partNo=n,t.advancedSearch.checkLevel(s),t.advancedSearch.open(!0,i)},openSupersession:function(e){var t=this;t.supersessionSearch.open(e)},getCrumbsData:function(){var e=this,t=e.$crumbs.find("a[data-type]"),n={},r,i;return t.each(function(e,t){r=$(t).attr("data-type")+"Code",i=$(t).attr("data-code"),n[r]=i}),n},setCartCount:function(e){var t=this;e===0?t.$cartCount.hide():t.$cartCount.show().find(".num").text(e)},loadNoticeCount:function(){var e=this;t.invoke({url:"/epc/notice/getCount",type:"GET",cache:!1,success:function(t){var n=t.data;n===0?e.$noticeCount.hide():e.$noticeCount.show().find(".num").text(n)}})},loadQuestionnaireCount:function(){var e=this;t.invoke({url:"/common/getQusetionnaireCount",type:"GET",cache:!1,success:function(t){var n=t.data;n===0?e.$questionnaireCount.hide():e.$questionnaireCount.show().find(".num").text(n),e.questionnaireCount=n}})},afterSearchClick:function(e){var t=this,n=e.attr("data-code"),r=--t.questionnaireCount;r===0?t.$questionnaireCount.hide():t.$questionnaireCount.find(".num").text(r),t.$questionnaireCount.find(".num").text(r),e.replaceWith('<a href="/pac/survey/detail/'+n+'" target="_blank" class="text-link a-link"><span class="search-text">查看回复</span></a>')},addToCart:function(e){var t=this;t.miniCart.addGoods(e)},loadLang:function(){var e=this;t.invoke({url:"/common/getLangData",type:"GET",cache:!0,success:function(t){e.renderLang(e.buildLang(t))}})},buildLang:function(e){var t=this,e=e||[],n=globalConfig.context.lang||"";for(var r=0;r<e.length;r++)e[r].code==n?e[r].checked=!0:e[r].checked=!1;return e},renderLang:function(e){var t=this,r='{{#list}}<li data-action="{{code}}" {{#checked}}class="checked"{{/checked}}><a href="javascript:;">{{name}}</a></li>{{/list}}',i=n.render(r,{list:e});t.$langList.html(i)},changeLang:function(e){var n=this;t.invoke({url:"/common/changeLang?lang="+e,type:"GET",cache:!1,success:function(e){location.href=location.href}})},isNeed:function(e){var t=this;return $("#"+e).length},initHeaderSearchVal:function(){var e=this,t=$.getParameterByName("from"),n=$.getParameterByName("vinNo"),r=$.getParameterByName("vehicleCode"),i={};if(t=="vin")i.type="vin",i.value=n;else{if(t!="vehicle")return;i.type="vehicle-code",i.value=r}e.headerSearch.checkSearchType(i),e.headerSearch.setSearchVal(i.value)},initOpenModifyPasswrod:function(){var e=this;pageConfig.needChangePassword&&e.modifyPassword.mustMoidfyPassword()}},m}),function(e){e.fn.scrollIntoView=function(t,n,r){function h(t,n){n===undefined?e.isFunction(i.complete)&&i.complete.call(t):i.smooth?e(t).stop().animate({scrollTop:n},i):(t.scrollTop=n,e.isFunction(i.complete)&&i.complete.call(t))}var i=e.extend({},e.fn.scrollIntoView.defaults);e.type(t)=="object"?e.extend(i,t):e.type(t)=="number"?e.extend(i,{duration:t,easing:n,complete:r}):t==0&&(i.smooth=!1);var s=Infinity,o=0;this.size()==1?(s=this.get(0).offsetTop)==null||(o=s+this.get(0).offsetHeight):this.each(function(e,t){t.offsetTop<s?s=t.offsetTop:t.offsetTop+t.offsetHeight>o?o=t.offsetTop+t.offsetHeight:null}),o-=s;var u=this.commonAncestor().get(0),f=e(window).height();while(u){var l=u.scrollTop,c=u.clientHeight;c>f&&(c=f),c==0&&u.tagName=="BODY"&&(c=f);if(u.scrollTop!=((u.scrollTop+=1)==null||u.scrollTop)&&(u.scrollTop-=1)!=null||u.scrollTop!=((u.scrollTop-=1)==null||u.scrollTop)&&(u.scrollTop+=1)!=null){s<=l?h(u,s):s+o>l+c?h(u,s+o-c):h(u,undefined);return}u=u.parentNode}return this},e.fn.scrollIntoView.defaults={smooth:!0,duration:null,easing:e.easing&&e.easing.easeOutExpo?"easeOutExpo":null,complete:e.noop(),step:null,specialEasing:{}},e.fn.isOutOfView=function(e){var t=!0;return this.each(function(){var n=this.parentNode,r=n.scrollTop,i=n.clientHeight,s=this.offsetTop,o=this.offsetHeight;(e?s>r+i:s+o>r+i)||(e?s+o<r:s<r)||(t=!1)}),t},e.fn.commonAncestor=function(){var t=[],n=Infinity;e(this).each(function(){var r=e(this).parents();t.push(r),n=Math.min(n,r.length)});for(var r=0;r<t.length;r++)t[r]=t[r].slice(t[r].length-n);for(var r=0;r<t[0].length;r++){var i=!0;for(var s in t)if(t[s][r]!=t[0][r]){i=!1;break}if(i)return e(t[0][r])}return e([])}}(jQuery),define("scrollIntoView",["jquery"],function(){}),function(e){var t="0.4.2",n="hasOwnProperty",r=/[\.\/]/,i=/\s*,\s*/,s="*",o=function(){},u=function(e,t){return e-t},a,f,l={n:{}},c=function(){for(var e=0,t=this.length;e<t;e++)if(typeof this[e]!="undefined")return this[e]},h=function(){var e=this.length;while(--e)if(typeof this[e]!="undefined")return this[e]},p=function(e,t){e=String(e);var n=l,r=f,i=Array.prototype.slice.call(arguments,2),s=p.listeners(e),o=0,d=!1,v,m=[],g={},y=[],b=a,w=[];y.firstDefined=c,y.lastDefined=h,a=e,f=0;for(var E=0,S=s.length;E<S;E++)"zIndex"in s[E]&&(m.push(s[E].zIndex),s[E].zIndex<0&&(g[s[E].zIndex]=s[E]));m.sort(u);while(m[o]<0){v=g[m[o++]],y.push(v.apply(t,i));if(f)return f=r,y}for(E=0;E<S;E++){v=s[E];if("zIndex"in v)if(v.zIndex==m[o]){y.push(v.apply(t,i));if(f)break;do{o++,v=g[m[o]],v&&y.push(v.apply(t,i));if(f)break}while(v)}else g[v.zIndex]=v;else{y.push(v.apply(t,i));if(f)break}}return f=r,a=b,y};p._events=l,p.listeners=function(e){var t=e.split(r),n=l,i,o,u,a,f,c,h,p,d=[n],v=[];for(a=0,f=t.length;a<f;a++){p=[];for(c=0,h=d.length;c<h;c++){n=d[c].n,o=[n[t[a]],n[s]],u=2;while(u--)i=o[u],i&&(p.push(i),v=v.concat(i.f||[]))}d=p}return v},p.on=function(e,t){e=String(e);if(typeof t!="function")return function(){};var n=e.split(i);for(var s=0,o=n.length;s<o;s++)(function(e){var n=e.split(r),i=l,s;for(var o=0,u=n.length;o<u;o++)i=i.n,i=i.hasOwnProperty(n[o])&&i[n[o]]||(i[n[o]]={n:{}});i.f=i.f||[];for(o=0,u=i.f.length;o<u;o++)if(i.f[o]==t){s=!0;break}!s&&i.f.push(t)})(n[s]);return function(e){+e==+e&&(t.zIndex=+e)}},p.f=function(e){var t=[].slice.call(arguments,1);return function(){p.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},p.stop=function(){f=1},p.nt=function(e){return e?(new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)")).test(a):a},p.nts=function(){return a.split(r)},p.off=p.unbind=function(e,t){if(!e){p._events=l={n:{}};return}var o=e.split(i);if(o.length>1){for(var u=0,a=o.length;u<a;u++)p.off(o[u],t);return}o=e.split(r);var f,c,h,u,a,d,v,m=[l];for(u=0,a=o.length;u<a;u++)for(d=0;d<m.length;d+=h.length-2){h=[d,1],f=m[d].n;if(o[u]!=s)f[o[u]]&&h.push(f[o[u]]);else for(c in f)f[n](c)&&h.push(f[c]);m.splice.apply(m,h)}for(u=0,a=m.length;u<a;u++){f=m[u];while(f.n){if(t){if(f.f){for(d=0,v=f.f.length;d<v;d++)if(f.f[d]==t){f.f.splice(d,1);break}!f.f.length&&delete f.f}for(c in f.n)if(f.n[n](c)&&f.n[c].f){var g=f.n[c].f;for(d=0,v=g.length;d<v;d++)if(g[d]==t){g.splice(d,1);break}!g.length&&delete f.n[c].f}}else{delete f.f;for(c in f.n)f.n[n](c)&&f.n[c].f&&delete f.n[c].f}f=f.n}}},p.once=function(e,t){var n=function(){return p.unbind(e,n),t.apply(this,arguments)};return p.on(e,n)},p.version=t,p.toString=function(){return"You are running Eve "+t},typeof module!="undefined"&&module.exports?module.exports=p:typeof define=="function"&&define.amd?define("eve",[],function(){return p}):e.eve=p}(this),function(e,t){typeof define=="function"&&define.amd?define("snap",["eve"],function(n){return t(e,n)}):t(e,e.eve)}(this,function(e,t){var n=function(t){var n={},r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},i=Array.isArray||function(e){return e instanceof Array||Object.prototype.toString.call(e)=="[object Array]"},s=0,o="M"+(+(new Date)).toString(36),u=function(){return o+(s++).toString(36)},a=function(e,t,n,r){if(i(e)){res=[];for(var s=0,o=e.length;s<o;s++)res[s]=a(e[s],t,n[s],r);return res}var u=(n-e)/(r-t);return function(n){return e+u*(n-t)}},f=Date.now||function(){return+(new Date)},l=function(e){var t=this;if(e==null)return t.s;var n=t.s-e;t.b+=t.dur*n,t.B+=t.dur*n,t.s=e},c=function(e){var t=this;if(e==null)return t.spd;t.spd=e},h=function(e){var t=this;if(e==null)return t.dur;t.s=t.s*e/t.dur,t.dur=e},p=function(){var e=this;delete n[e.id],e.update(),t("mina.stop."+e.id,e)},d=function(){var e=this;if(e.pdif)return;delete n[e.id],e.update(),e.pdif=e.get()-e.b},v=function(){var e=this;if(!e.pdif)return;e.b=e.get()-e.pdif,delete e.pdif,n[e.id]=e},m=function(){var e=this,t;if(i(e.start)){t=[];for(var n=0,r=e.start.length;n<r;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},g=function(){var e=0;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i],o=s.get(),u;e++,s.s=(o-s.b)/(s.dur/s.spd),s.s>=1&&(delete n[i],s.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(s)),s.update()}e&&r(g)},y=function(e,t,i,s,o,a,f){var b={id:u(),start:e,end:t,b:i,s:0,dur:s-i,spd:1,get:o,set:a,easing:f||y.linear,status:l,speed:c,duration:h,stop:p,pause:d,resume:v,update:m};n[b.id]=b;var w=0,E;for(E in n)if(n.hasOwnProperty(E)){w++;if(w==2)break}return w==1&&r(g),b};return y.time=f,y.getById=function(e){return n[e]||null},y.linear=function(e){return e},y.easeout=function(e){return Math.pow(e,1.7)},y.easein=function(e){return Math.pow(e,.48)},y.easeinout=function(e){if(e==1)return 1;if(e==0)return 0;var t=.48-e/1.04,n=Math.sqrt(.1734+t*t),r=n-t,i=Math.pow(Math.abs(r),1/3)*(r<0?-1:1),s=-n-t,o=Math.pow(Math.abs(s),1/3)*(s<0?-1:1),u=i+o+.5;return(1-u)*3*u*u+u*u*u},y.backin=function(e){if(e==1)return 1;var t=1.70158;return e*e*((t+1)*e-t)},y.backout=function(e){if(e==0)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},y.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*2*Math.PI/.3)+1},y.bounce=function(e){var t=7.5625,n=2.75,r;return e<1/n?r=t*e*e:e<2/n?(e-=1.5/n,r=t*e*e+.75):e<2.5/n?(e-=2.25/n,r=t*e*e+.9375):(e-=2.625/n,r=t*e*e+.984375),r},e.mina=y,y}(typeof t=="undefined"?function(){}:t),r=function(){function r(e,t){if(e){if(e.tagName)return vt(e);if(R(e,"array")&&r.set)return r.set.apply(r,e);if(e instanceof ct)return e;if(t==null)return e=i.doc.querySelector(e),vt(e)}return e=e==null?"100%":e,t=t==null?"100%":t,new dt(e,t)}function I(e,t){if(t){e=="#text"&&(e=i.doc.createTextNode(t.text||"")),typeof e=="string"&&(e=I(e));if(typeof t=="string")return t.substring(0,6)=="xlink:"?e.getAttributeNS(H,t.substring(6)):t.substring(0,4)=="xml:"?e.getAttributeNS(B,t.substring(4)):e.getAttribute(t);for(var n in t)if(t[s](n)){var r=o(t[n]);r?n.substring(0,6)=="xlink:"?e.setAttributeNS(H,n.substring(6),r):n.substring(0,4)=="xml:"?e.setAttributeNS(B,n.substring(4),r):e.setAttribute(n,r):e.removeAttribute(n)}}else e=i.doc.createElementNS(B,e);return e}function q(e){var t=e.attributes,n,r={};for(var i=0;i<t.length;i++)t[i].namespaceURI==H?n="xlink:":n="",n+=t[i].name,r[n]=t[i].textContent;return r}function R(e,t){return t=o.prototype.toLowerCase.call(t),t=="finite"?isFinite(e):t=="array"&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||b.call(e).slice(8,-1).toLowerCase()==t}function U(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[s](n)&&(t[n]=U(e[n]));return t}function z(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function W(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),o=i.join("␀"),u=r.cache=r.cache||{},a=r.count=r.count||[];return u[s](o)?(z(a,o),n?n(u[o]):u[o]):(a.length>=1e3&&delete u[a.shift()],a.push(o),u[o]=e.apply(t,i),n?n(u[o]):u[o])}return r}function X(e,t,n,r,i,s){if(i==null){var o=e-n,u=t-r;return!o&&!u?0:(180+f.atan2(-u,-o)*180/d+360)%360}return X(e,t,i,s)-X(n,r,i,s)}function V(e){return e%360*d/180}function $(e){return e*180/d%360}function J(){return this.x+y+this.y}function K(){return this.x+y+this.y+y+this.width+" × "+this.height}function rt(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,n,r){return r=r.split(/\s*,\s*|\s+/),n=="rotate"&&r.length==1&&r.push(0,0),n=="scale"&&(r.length>2?r=r.slice(0,2):r.length==2&&r.push(0,0),r.length==1&&r.push(r[0],0,0)),n=="skewX"?t.push(["m",1,0,f.tan(V(r[0])),1,0,0]):n=="skewY"?t.push(["m",1,f.tan(V(r[0])),0,1,0,0]):t.push([n.charAt(0)].concat(r)),e}),t}function it(e,t){var n=nt(e),i=new r.Matrix;if(n)for(var s=0,u=n.length;s<u;s++){var a=n[s],f=a.length,l=o(a[0]).toLowerCase(),c=a[0]!=l,h=c?i.invert():0,p,d,v,m,g;l=="t"&&f==2?i.translate(a[1],0):l=="t"&&f==3?c?(p=h.x(0,0),d=h.y(0,0),v=h.x(a[1],a[2]),m=h.y(a[1],a[2]),i.translate(v-p,m-d)):i.translate(a[1],a[2]):l=="r"?f==2?(g=g||t,i.rotate(a[1],g.x+g.width/2,g.y+g.height/2)):f==4&&(c?(v=h.x(a[2],a[3]),m=h.y(a[2],a[3]),i.rotate(a[1],v,m)):i.rotate(a[1],a[2],a[3])):l=="s"?f==2||f==3?(g=g||t,i.scale(a[1],a[f-1],g.x+g.width/2,g.y+g.height/2)):f==4?c?(v=h.x(a[2],a[3]),m=h.y(a[2],a[3]),i.scale(a[1],a[1],v,m)):i.scale(a[1],a[1],a[2],a[3]):f==5&&(c?(v=h.x(a[3],a[4]),m=h.y(a[3],a[4]),i.scale(a[1],a[2],v,m)):i.scale(a[1],a[2],a[3],a[4])):l=="m"&&f==7&&i.add(a[1],a[2],a[3],a[4],a[5],a[6])}return i}function st(e,t){if(t==null){var n=!0;e.type=="linearGradient"||e.type=="radialGradient"?t=e.node.getAttribute("gradientTransform"):e.type=="pattern"?t=e.node.getAttribute("patternTransform"):t=e.node.getAttribute("transform");if(!t)return new r.Matrix;t=rt(t)}else r._.rgTransform.test(t)?t=o(t).replace(/\.{3}|\u2026/g,e._.transform||m):t=rt(t),R(t,"array")&&(t=r.path?r.path.toString.call(t):o(t)),e._.transform=t;var i=it(t,e.getBBox(1));if(n)return i;e.matrix=i}function ut(e){var t=e.node.ownerSVGElement&&vt(e.node.ownerSVGElement)||e.node.parentNode&&vt(e.node.parentNode)||r.select("svg")||r(0,0),n=t.select("defs"),i=n==null?!1:n.node;return i||(i=pt("defs",t.node).node),i}function at(e){return e.node.ownerSVGElement&&vt(e.node.ownerSVGElement)||r.select("svg")}function ft(e,t,n){function o(e){if(e==null)return m;if(e==+e)return e;I(s,{width:e});try{return s.getBBox().width}catch(t){return 0}}function u(e){if(e==null)return m;if(e==+e)return e;I(s,{height:e});try{return s.getBBox().height}catch(t){return 0}}function a(r,s){t==null?i[r]=s(e.attr(r)||0):r==t&&(i=s(n==null?e.attr(r)||0:n))}var r=at(e).node,i={},s=r.querySelector(".svg---mgr");s||(s=I("rect"),I(s,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),r.appendChild(s));switch(e.type){case"rect":a("rx",o),a("ry",u);case"image":a("width",o),a("height",u);case"text":a("x",o),a("y",u);break;case"circle":a("cx",o),a("cy",u),a("r",o);break;case"ellipse":a("cx",o),a("cy",u),a("rx",o),a("ry",u);break;case"line":a("x1",o),a("x2",o),a("y1",u),a("y2",u);break;case"marker":a("refX",o),a("markerWidth",o),a("refY",u),a("markerHeight",u);break;case"radialGradient":a("fx",o),a("fy",u);break;case"tspan":a("dx",o),a("dy",u);break;default:a(t,o)}return r.removeChild(s),i}function lt(e){R(e,"array")||(e=Array.prototype.slice.call(arguments,0));var t=0,n=0,r=this.node;while(this[t])delete this[t++];for(t=0;t<e.length;t++)e[t].type=="set"?e[t].forEach(function(e){r.appendChild(e.node)}):r.appendChild(e[t].node);var i=r.childNodes;for(t=0;t<i.length;t++)this[n++]=vt(i[t]);return this}function ct(e){if(e.snap in j)return j[e.snap];var t=this.id=P(),n;try{n=e.ownerSVGElement}catch(r){}this.node=e,n&&(this.paper=new dt(n)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=t,j[t]=this,this.type=="g"&&(this.add=lt);if(this.type in{g:1,mask:1,pattern:1})for(var i in dt.prototype)dt.prototype[s](i)&&(this[i]=dt.prototype[i])}function ht(e){this.node=e}function pt(e,t){var n=I(e);t.appendChild(n);var r=vt(n);return r}function dt(e,t){var n,r,o,u=dt.prototype;if(e&&e.tagName=="svg"){if(e.snap in j)return j[e.snap];var a=e.ownerDocument;n=new ct(e),r=e.getElementsByTagName("desc")[0],o=e.getElementsByTagName("defs")[0],r||(r=I("desc"),r.appendChild(a.createTextNode("Created with Snap")),n.node.appendChild(r)),o||(o=I("defs"),n.node.appendChild(o)),n.defs=o;for(var f in u)u[s](f)&&(n[f]=u[f]);n.paper=n.root=n}else n=pt("svg",i.doc.body),I(n.node,{height:t,version:1.1,width:e,xmlns:B});return n}function vt(e){return e?e instanceof ct||e instanceof ht?e:e.tagName&&e.tagName.toLowerCase()=="svg"?new dt(e):e.tagName&&e.tagName.toLowerCase()=="object"&&e.type=="image/svg+xml"?new dt(e.contentDocument.getElementsByTagName("svg")[0]):new ct(e):e}r.version="0.3.0",r.toString=function(){return"Snap v"+this.version},r._={};var i={win:e,doc:e.document};r._.glob=i;var s="hasOwnProperty",o=String,u=parseFloat,a=parseInt,f=Math,l=f.max,c=f.min,h=f.abs,p=f.pow,d=f.PI,v=f.round,m="",y=" ",b=Object.prototype.toString,w=/^url\(['"]?([^\)]+?)['"]?\)$/i,E=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,S=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,x=/^url\(#?([^)]+)\)$/,T="	\n\f\r   ᠎             　\u2028\u2029",N=r._.separator=new RegExp("[,"+T+"]+"),C=new RegExp("["+T+"]","g"),k=new RegExp("["+T+"]*,["+T+"]*"),L={hs:1,rg:1},A=new RegExp("([a-z])["+T+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+T+"]*,?["+T+"]*)+)","ig"),O=new RegExp("([rstm])["+T+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+T+"]*,?["+T+"]*)+)","ig"),M=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+T+"]*,?["+T+"]*","ig"),_=0,D="S"+(+(new Date)).toString(36),P=function(){return D+(_++).toString(36)},H="http://www.w3.org/1999/xlink",B="http://www.w3.org/2000/svg",j={},F=r.url=function(e){return"url('#"+e+"')"};r._.$=I,r._.id=P,r.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,s){t=t||r,i&&(t in i&&(i=i[t]),typeof i=="function"&&s&&(i=i()))}),i=(i==null||i==r?e:i)+"",i};return function(t,r){return o(t).replace(e,function(e,t){return n(e,t,r)})}}(),r._.clone=U,r._.cacher=W,r.rad=V,r.deg=$,r.angle=X,r.is=R,r.snapTo=function(e,t,n){n=R(n,"finite")?n:10;if(R(e,"array")){var r=e.length;while(r--)if(h(e[r]-t)<=n)return e[r]}else{e=+e;var i=t%e;if(i<n)return t-i;if(i>e-n)return t-i+e}return t},r.getRGB=W(function(e){if(!e||!!((e=o(e)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Z};!L[s](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Q(e));if(!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z};var t,n,i,h,p,d,v,m=e.match(E);return m?(m[2]&&(h=a(m[2].substring(5),16),i=a(m[2].substring(3,5),16),n=a(m[2].substring(1,3),16)),m[3]&&(h=a((d=m[3].charAt(3))+d,16),i=a((d=m[3].charAt(2))+d,16),n=a((d=m[3].charAt(1))+d,16)),m[4]&&(v=m[4].split(k),n=u(v[0]),v[0].slice(-1)=="%"&&(n*=2.55),i=u(v[1]),v[1].slice(-1)=="%"&&(i*=2.55),h=u(v[2]),v[2].slice(-1)=="%"&&(h*=2.55),m[1].toLowerCase().slice(0,4)=="rgba"&&(p=u(v[3])),v[3]&&v[3].slice(-1)=="%"&&(p/=100)),m[5]?(v=m[5].split(k),n=u(v[0]),v[0].slice(-1)=="%"&&(n/=100),i=u(v[1]),v[1].slice(-1)=="%"&&(i/=100),h=u(v[2]),v[2].slice(-1)=="%"&&(h/=100),(v[0].slice(-3)=="deg"||v[0].slice(-1)=="°")&&(n/=360),m[1].toLowerCase().slice(0,4)=="hsba"&&(p=u(v[3])),v[3]&&v[3].slice(-1)=="%"&&(p/=100),r.hsb2rgb(n,i,h,p)):m[6]?(v=m[6].split(k),n=u(v[0]),v[0].slice(-1)=="%"&&(n/=100),i=u(v[1]),v[1].slice(-1)=="%"&&(i/=100),h=u(v[2]),v[2].slice(-1)=="%"&&(h/=100),(v[0].slice(-3)=="deg"||v[0].slice(-1)=="°")&&(n/=360),m[1].toLowerCase().slice(0,4)=="hsla"&&(p=u(v[3])),v[3]&&v[3].slice(-1)=="%"&&(p/=100),r.hsl2rgb(n,i,h,p)):(n=c(f.round(n),255),i=c(f.round(i),255),h=c(f.round(h),255),p=c(l(p,0),1),m={r:n,g:i,b:h,toString:Z},m.hex="#"+(16777216|h|i<<8|n<<16).toString(16).slice(1),m.opacity=R(p,"finite")?p:1,m)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z}},r),r.hsb=W(function(e,t,n){return r.hsb2rgb(e,t,n).hex}),r.hsl=W(function(e,t,n){return r.hsl2rgb(e,t,n).hex}),r.rgb=W(function(e,t,n,r){if(R(r,"finite")){var i=f.round;return"rgba("+[i(e),i(t),i(n),+r.toFixed(2)]+")"}return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)});var Q=function(e){var t=i.doc.getElementsByTagName("head")[0]||i.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return Q=W(function(e){if(e.toLowerCase()=="red")return n;t.style.color=n,t.style.color=e;var r=i.doc.defaultView.getComputedStyle(t,m).getPropertyValue("color");return r==n?null:r}),Q(e)},G=function(){return"hsb("+[this.h,this.s,this.b]+")"},Y=function(){return"hsl("+[this.h,this.s,this.l]+")"},Z=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},et=function(e,t,n){t==null&&R(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,t=e.g,e=e.r);if(t==null&&R(e,string)){var i=r.getRGB(e);e=i.r,t=i.g,n=i.b}if(e>1||t>1||n>1)e/=255,t/=255,n/=255;return[e,t,n]},tt=function(e,t,n,i){e=f.round(e*255),t=f.round(t*255),n=f.round(n*255);var s={r:e,g:t,b:n,opacity:R(i,"finite")?i:1,hex:r.rgb(e,t,n),toString:Z};return R(i,"finite")&&(s.opacity=i),s};r.color=function(e){var t;return R(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=r.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):R(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=r.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(R(e,"string")&&(e=r.getRGB(e)),R(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=r.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=r.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=Z,e},r.hsb2rgb=function(e,t,n,r){R(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var i,s,o,u,a;return e=e%360/60,a=n*t,u=a*(1-h(e%2-1)),i=s=o=n-a,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],tt(i,s,o,r)},r.hsl2rgb=function(e,t,n,r){R(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h);if(e>1||t>1||n>1)e/=360,t/=100,n/=100;e*=360;var i,s,o,u,a;return e=e%360/60,a=2*t*(n<.5?n:1-n),u=a*(1-h(e%2-1)),i=s=o=n-a/2,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],tt(i,s,o,r)},r.rgb2hsb=function(e,t,n){n=et(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o;return s=l(e,t,n),o=s-c(e,t,n),r=o==0?null:s==e?(t-n)/o:s==t?(n-e)/o+2:(e-t)/o+4,r=(r+360)%6*60/360,i=o==0?0:o/s,{h:r,s:i,b:s,toString:G}},r.rgb2hsl=function(e,t,n){n=et(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o,u,a;return o=l(e,t,n),u=c(e,t,n),a=o-u,r=a==0?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,s=(o+u)/2,i=a==0?0:s<.5?a/(2*s):a/(2-2*s),{h:r,s:i,l:s,toString:Y}},r.parsePathString=function(e){if(!e)return null;var t=r.path(e);if(t.arr)return r.path.clone(t.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return R(e,"array")&&R(e[0],"array")&&(i=r.path.clone(e)),i.length||o(e).replace(A,function(e,t,r){var s=[],o=t.toLowerCase();r.replace(M,function(e,t){t&&s.push(+t)}),o=="m"&&s.length>2&&(i.push([t].concat(s.splice(0,2))),o="l",t=t=="m"?"l":"L"),o=="o"&&s.length==1&&i.push([t,s[0]]);if(o=="r")i.push([t].concat(s));else while(s.length>=n[o]){i.push([t].concat(s.splice(0,n[o])));if(!n[o])break}}),i.toString=r.path.toString,t.arr=r.path.clone(i),i};var nt=r.parseTransformString=function(e){if(!e)return null;var t={r:3,s:4,t:2,m:6},n=[];return R(e,"array")&&R(e[0],"array")&&(n=r.path.clone(e)),n.length||o(e).replace(O,function(e,t,r){var i=[],s=t.toLowerCase();r.replace(M,function(e,t){t&&i.push(+t)}),n.push([t].concat(i))}),n.toString=r.path.toString,n};r._.svgTransform2string=rt,r._.rgTransform=new RegExp("^[a-z]["+T+"]*-?\\.?\\d","i"),r._.transform2matrix=it,r._unit2px=ft;var ot=i.doc.contains||i.doc.compareDocumentPosition?function(e,t){var n=e.nodeType==9?e.documentElement:e,r=t&&t.parentNode;return e==r||!!r&&r.nodeType==1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t){t=t.parentNode;if(t==e)return!0}return!1};r._.getSomeDefs=ut,r._.getSomeSVG=at,r.select=function(e){return vt(i.doc.querySelector(e))},r.selectAll=function(e){var t=i.doc.querySelectorAll(e),n=(r.set||Array)();for(var s=0;s<t.length;s++)n.push(vt(t[s]));return n},setInterval(function(){for(var e in j)if(j[s](e)){var t=j[e],n=t.node;(t.type!="svg"&&!n.ownerSVGElement||t.type=="svg"&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete j[e]}},1e4),function(e){function u(e){function o(e,t){var n=I(e.node,t);n=n&&n.match(r),n=n&&n[2];if(!n||n.charAt()!="#")return;n=n.substring(1),n&&(s[n]=(s[n]||[]).concat(function(n){var r={};r[t]=F(n),I(e.node,r)}))}function u(e){var t=I(e.node,"xlink:href");if(!t||t.charAt()!="#")return;t=t.substring(1),t&&(s[t]=(s[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)}))}var t=e.selectAll("*"),n,r=/^\s*url\(("|'|)(.*)\1\)\s*$/,i=[],s={};for(var a=0,f=t.length;a<f;a++){n=t[a],o(n,"fill"),o(n,"stroke"),o(n,"filter"),o(n,"mask"),o(n,"clip-path"),u(n);var l=I(n.node,"id");l&&(I(n.node,{id:n.id}),i.push({old:l,id:n.id}))}for(a=0,f=i.length;a<f;a++){var c=s[i[a].old];if(c)for(var h=0,p=c.length;h<p;h++)c[h](i[a].id)}}function c(e,t,n){return function(r){var i=r.slice(e,t);return i.length==1&&(i=i[0]),n?n(i):i}}function d(e){return function(){var t=e?"<"+this.type:"",n=this.node.attributes,r=this.node.childNodes;if(e)for(var i=0,s=n.length;i<s;i++)t+=" "+n[i].name+'="'+n[i].value.replace(/"/g,'\\"')+'"';if(r.length){e&&(t+=">");for(i=0,s=r.length;i<s;i++)r[i].nodeType==3?t+=r[i].nodeValue:r[i].nodeType==1&&(t+=vt(r[i]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,n){var r=this,i=r.node;if(!e)return r;if(R(e,"string")){if(!(arguments.length>1))return t("snap.util.getattr."+e,r).firstDefined();var o={};o[e]=n,e=o}for(var u in e)e[s](u)&&t("snap.util.attr."+u,r,e[u]);return r},e.getBBox=function(e){if(!r.Matrix||!r.path)return this.node.getBBox();var t=this,n=new r.Matrix;if(t.removed)return r._.box();while(t.type=="use"){e||(n=n.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0)));if(t.original)t=t.original;else{var i=t.attr("xlink:href");t=t.original=t.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}}var s=t._,o=r.path.get[t.type]||r.path.get.deflt;try{return e?(s.bboxwt=o?r.path.getBBox(t.realPath=o(t)):r._.box(t.node.getBBox()),r._.box(s.bboxwt)):(t.realPath=o(t),t.matrix=t.transform().localMatrix,s.bbox=r.path.getBBox(r.path.map(t.realPath,n.add(t.matrix))),r._.box(s.bbox))}catch(u){return r._.box()}};var i=function(){return this.string};e.transform=function(e){var t=this._;if(e==null){var n=this,s=new r.Matrix(this.node.getCTM()),u=st(this),a=[u],f=new r.Matrix,l,c=u.toTransformString(),h=o(u)==o(this.matrix)?o(t.transform):c;while(n.type!="svg"&&(n=n.parent()))a.push(st(n));l=a.length;while(l--)f.add(a[l]);return{string:h,globalMatrix:s,totalMatrix:f,localMatrix:u,diffMatrix:s.clone().add(u.invert()),global:s.toTransformString(),total:f.toTransformString(),local:c,toString:i}}return e instanceof r.Matrix?this.matrix=e:st(this,e),this.node&&(this.type=="linearGradient"||this.type=="radialGradient"?I(this.node,{gradientTransform:this.matrix}):this.type=="pattern"?I(this.node,{patternTransform:this.matrix}):I(this.node,{transform:this.matrix})),this},e.parent=function(){return vt(this.node.parentNode)},e.append=e.add=function(e){if(e){if(e.type=="set"){var t=this;return e.forEach(function(e){t.add(e)}),this}e=vt(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=vt(e),e.append(this)),this},e.prepend=function(e){if(e){if(e.type=="set"){var t=this,n;return e.forEach(function(e){n?n.after(e):t.prepend(e),n=e}),this}e=vt(e);var r=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),r&&r.add()}return this},e.prependTo=function(e){return e=vt(e),e.prepend(this),this},e.before=function(e){if(e.type=="set"){var t=this;return e.forEach(function(e){var n=e.parent();t.node.parentNode.insertBefore(e.node,t.node),n&&n.add()}),this.parent().add(),this}e=vt(e);var n=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),e.paper=this.paper,this},e.after=function(e){e=vt(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=vt(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=vt(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return vt(this.node.querySelector(e))},e.selectAll=function(e){var t=this.node.querySelectorAll(e),n=(r.set||Array)();for(var i=0;i<t.length;i++)n.push(vt(t[i]));return n},e.asPX=function(e,t){return t==null&&(t=this.attr(e)),+ft(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,I(this.node,{id:t})),this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"?e=pt(this.type,this.node.parentNode):e=pt("use",this.node.parentNode),I(e.node,{"xlink:href":"#"+t}),e.original=this,e};var a=/\S+/g,f=/[\t\r\n\f]/g,l=/(^\s+|\s+$)/g;e.addClass=function(e){var t=(e||"").match(a)||[],n=this.node,r=n.className.baseVal,i=r.match(a)||[],s,o,u,f;if(t.length){s=0;while(u=t[s++])o=i.indexOf(u),~o||i.push(u);f=i.join(" "),r!=f&&(n.className.baseVal=f)}return this},e.removeClass=function(e){var t=(e||"").match(a)||[],n=this.node,r=n.className.baseVal,i=r.match(a)||[],s,o,u,f;if(i.length){s=0;while(u=t[s++])o=i.indexOf(u),~o&&i.splice(o,1);f=i.join(" "),r!=f&&(n.className.baseVal=f)}return this},e.hasClass=function(e){var t=this.node,n=t.className.baseVal,r=n.match(a)||[];return!!~r.indexOf(e)},e.toggleClass=function(e,t){if(t!=null)return t?this.addClass(e):this.removeClass(e);var n=(e||"").match(a)||[],r=this.node,i=r.className.baseVal,s=i.match(a)||[],o,u,f,l;o=0;while(f=n[o++])u=s.indexOf(f),~u?s.splice(u,1):s.push(f);return l=s.join(" "),i!=l&&(r.className.baseVal=l),this},e.clone=function(){var e=vt(this.node.cloneNode(!0));return I(e.node,"id")&&I(e.node,{id:e.id}),u(e),e.insertAfter(this),e},e.toDefs=function(){var e=ut(this);return e.appendChild(this.node),this},e.pattern=e.toPattern=function(e,t,n,r){var i=pt("pattern",ut(this));return e==null&&(e=this.getBBox()),R(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,e=e.x),I(i.node,{x:e,y:t,width:n,height:r,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,n,r].join(" ")}),i.node.appendChild(this.node),i},e.marker=function(e,t,n,r,i,s){var o=pt("marker",ut(this));return e==null&&(e=this.getBBox()),R(e,"object")&&"x"in e&&(t=e.y,n=e.width,r=e.height,i=e.refX||e.cx,s=e.refY||e.cy,e=e.x),I(o.node,{viewBox:[e,t,n,r].join(y),markerWidth:n,markerHeight:r,orient:"auto",refX:i||0,refY:s||0,id:o.id}),o.node.appendChild(this.node),o};var h=function(e,t,r,i){typeof r=="function"&&!r.length&&(i=r,r=n.linear),this.attr=e,this.dur=t,r&&(this.easing=r),i&&(this.callback=i)};r._.Animation=h,r.animation=function(e,t,n,r){return new h(e,t,n,r)},e.inAnim=function(){var e=this,t=[];for(var n in e.anims)e.anims[s](n)&&function(e){t.push({anim:new h(e._attrs,e.dur,e.easing,e._callback),mina:e,curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[n]);return t},r.animate=function(e,r,i,s,o,u){typeof o=="function"&&!o.length&&(u=o,o=n.linear);var a=n.time(),f=n(e,r,a,a+s,n.time,i,o);return u&&t.once("mina.finish."+f.id,u),f},e.stop=function(){var e=this.inAnim();for(var t=0,n=e.length;t<n;t++)e[t].stop();return this},e.animate=function(e,r,i,u){typeof i=="function"&&!i.length&&(u=i,i=n.linear),e instanceof h&&(u=e.callback,i=e.easing,r=i.dur,e=e.attr);var a=[],f=[],l={},p,d,v,m,g=this;for(var y in e)if(e[s](y)){g.equal?(m=g.equal(y,o(e[y])),p=m.from,d=m.to,v=m.f):(p=+g.attr(y),d=+e[y]);var b=R(p,"array")?p.length:1;l[y]=c(a.length,a.length+b,v),a=a.concat(p),f=f.concat(d)}var w=n.time(),E=n(a,f,w,w+r,n.time,function(e){var t={};for(var n in l)l[s](n)&&(t[n]=l[n](e));g.attr(t)},i);return g.anims[E.id]=E,E._attrs=e,E._callback=u,t("snap.animcreated."+g.id,E),t.once("mina.finish."+E.id,function(){delete g.anims[E.id],u&&u.call(g)}),t.once("mina.stop."+E.id,function(){delete g.anims[E.id]}),g};var p={};e.data=function(e,n){var i=p[this.id]=p[this.id]||{};if(arguments.length==0)return t("snap.data.get."+this.id,this,i,null),i;if(arguments.length==1){if(r.is(e,"object")){for(var o in e)e[s](o)&&this.data(o,e[o]);return this}return t("snap.data.get."+this.id,this,i[e],e),i[e]}return i[e]=n,t("snap.data.set."+this.id,this,n,e),this},e.removeData=function(e){return e==null?p[this.id]={}:p[this.id]&&delete p[this.id][e],this},e.outerSVG=e.toString=d(1),e.innerSVG=d()}(ct.prototype),r.parse=function(e){var t=i.doc.createDocumentFragment(),n=!0,r=i.doc.createElement("div");e=o(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",n=!1),r.innerHTML=e,e=r.getElementsByTagName("svg")[0];if(e)if(n)t=e;else while(e.firstChild)t.appendChild(e.firstChild);return r.innerHTML=m,new ht(t)},ht.prototype.select=ct.prototype.select,ht.prototype.selectAll=ct.prototype.selectAll,r.fragment=function(){var e=Array.prototype.slice.call(arguments,0),t=i.doc.createDocumentFragment();for(var n=0,s=e.length;n<s;n++){var o=e[n];o.node&&o.node.nodeType&&t.appendChild(o.node),o.nodeType&&t.appendChild(o),typeof o=="string"&&t.appendChild(r.parse(o).node)}return new ht(t)},r._.make=pt,r._.wrap=vt,dt.prototype.el=function(e,t){var n=pt(e,this.node);return t&&n.attr(t),n},t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var n=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return mt[s](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):I(this.node,e)});var mt={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var n=t.nt(),r={};n=n.substring(n.lastIndexOf(".")+1),r[n]=e;var i=n.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),o=n.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});mt[s](o)?this.node.style[i]=e==null?m:e:I(this.node,r)}),function(e){}(dt.prototype),r.ajax=function(e,n,r,i){var s=new XMLHttpRequest,o=P();if(s){if(R(n,"function"))i=r,r=n,n=null;else if(R(n,"object")){var u=[];for(var a in n)n.hasOwnProperty(a)&&u.push(encodeURIComponent(a)+"="+encodeURIComponent(n[a]));n=u.join("&")}return s.open(n?"POST":"GET",e,!0),n&&(s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(t.once("snap.ajax."+o+".0",r),t.once("snap.ajax."+o+".200",r),t.once("snap.ajax."+o+".304",r)),s.onreadystatechange=function(){if(s.readyState!=4)return;t("snap.ajax."+o+"."+s.status,i,s)},s.readyState==4?s:(s.send(n),s)}},r.load=function(e,t,n){r.ajax(e,function(e){var i=r.parse(e.responseText);n?t.call(n,i):t(i)})};var gt=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,u=t.top+(g.win.pageYOffset||i.scrollTop||r.scrollTop)-s,a=t.left+(g.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:u,x:a}};return r.getElementByPoint=function(e,t){var n=this,r=n.canvas,s=i.doc.elementFromPoint(e,t);if(i.win.opera&&s.tagName=="svg"){var o=gt(s),u=s.createSVGRect();u.x=e-o.x,u.y=t-o.y,u.width=u.height=1;var a=s.getIntersectionList(u,null);a.length&&(s=a[a.length-1])}return s?vt(s):null},r.plugin=function(e){e(r,ct,dt,i,ht)},i.win.Snap=r,r}();return r.plugin(function(e,t,n,r,i){function f(e,t,n,r,i,o){if(t==null&&s.call(e)=="[object SVGMatrix]"){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,this.f=e.f;return}e!=null?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}var s=Object.prototype.toString,o=String,u=Math,a="";(function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=u.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,i,s){var o=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[e,n,i],[t,r,s],[0,0,1]],l,c,h,p;e&&e instanceof f&&(a=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]);for(l=0;l<3;l++)for(c=0;c<3;c++){p=0;for(h=0;h<3;h++)p+=u[l][h]*a[h][c];o[l][c]=p}return this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2],this},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new f(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){return this.add(1,0,0,1,e,t)},t.scale=function(e,t,n,r){return t==null&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r),this},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var i=+u.cos(t).toFixed(9),s=+u.sin(t).toFixed(9);return this.add(i,s,-s,i,n,r),this.add(1,0,0,1,-n,-r)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[o.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.determinant=function(){return this.a*this.d-this.b*this.c},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=u.sqrt(n(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=u.sqrt(n(i[1])),r(i[1]),t.shear/=t.scaley,this.determinant()<0&&(t.scalex=-t.scalex);var s=-i[0][1],o=i[1][1];return o<0?(t.rotate=e.deg(u.acos(o)),s<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(u.asin(s)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:a)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:a)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:a))}})(f.prototype),e.Matrix=f,e.matrix=function(e,t,n,r,i,s){return new f(e,t,n,r,i,s)}}),r.plugin(function(e,n,r,i,s){function g(r){return function(i){t.stop(),i instanceof s&&i.node.childNodes.length==1&&(i.node.firstChild.tagName=="radialGradient"||i.node.firstChild.tagName=="linearGradient"||i.node.firstChild.tagName=="pattern")&&(i=i.node.firstChild,l(this).appendChild(i),i=a(i));if(i instanceof n)if(i.type=="radialGradient"||i.type=="linearGradient"||i.type=="pattern"){i.node.id||h(i.node,{id:i.id});var o=p(i.node.id)}else o=i.attr(r);else{o=e.color(i);if(o.error){var u=e(l(this).ownerSVGElement).gradient(i);u?(u.node.id||h(u.node,{id:u.id}),o=p(u.node.id)):o=i}else o=d(o)}var f={};f[r]=o,h(this.node,f),this.node.style[r]=m}}function b(e){t.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function w(e){var t=[],n=e.childNodes;for(var r=0,i=n.length;r<i;r++){var s=n[r];s.nodeType==3&&t.push(s.nodeValue),s.tagName=="tspan"&&(s.childNodes.length==1&&s.firstChild.nodeType==3?t.push(s.firstChild.nodeValue):t.push(w(s)))}return t}function E(){return t.stop(),this.node.style.fontSize}var o="hasOwnProperty",u=e._.make,a=e._.wrap,f=e.is,l=e._.getSomeDefs,c=/^url\(#?([^)]+)\)$/,h=e._.$,p=e.url,d=String,v=e._.separator,m="";t.on("snap.util.attr.mask",function(e){if(e instanceof n||e instanceof s){t.stop(),e instanceof s&&e.node.childNodes.length==1&&(e=e.node.firstChild,l(this).appendChild(e),e=a(e));if(e.type=="mask")var r=e;else r=u("mask",l(this)),r.node.appendChild(e.node);!r.node.id&&h(r.node,{id:r.id}),h(this.node,{mask:p(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof n||e instanceof s){t.stop();if(e.type=="clipPath")var r=e;else r=u("clipPath",l(this)),r.node.appendChild(e.node),!r.node.id&&h(r.node,{id:r.id});h(this.node,{"clip-path":p(r.id)})}}),t.on("snap.util.attr.fill",g("fill")),t.on("snap.util.attr.stroke",g("stroke"));var y=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(t){t=d(t);var n=t.match(y);if(!n)return null;var r=n[1],i=n[2],s=n[3];return i=i.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),i.length==1&&i[0]==0&&(i=[]),s=s.split("-"),s=s.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=parseFloat(e[1])),t}),{type:r,params:i,stops:s}}),t.on("snap.util.attr.d",function(n){t.stop(),f(n,"array")&&f(n[0],"array")&&(n=e.path.toString.call(n)),n=d(n),n.match(/[ruo]/i)&&(n=e.path.toAbsolute(n)),h(this.node,{d:n})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=d(e);var n=i.doc.createTextNode(e);while(this.node.firstChild)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.class",function(e){t.stop(),this.node.className.baseVal=e})(-1),t.on("snap.util.attr.viewBox",function(e){var n;f(e,"object")&&"x"in e?n=[e.x,e.y,e.width,e.height].join(" "):f(e,"array")?n=e.join(" "):n=e,h(this.node,{viewBox:n}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){this.type=="rect"&&(t.stop(),h(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){t.stop();if(this.type=="text"){var r,i,s;if(!e&&this.textPath){i=this.textPath;while(i.node.firstChild)this.node.appendChild(i.node.firstChild);i.remove(),delete this.textPath;return}if(f(e,"string")){var o=l(this),u=a(o.parentNode).path(e);o.appendChild(u.node),r=u.id,u.attr({id:r})}else e=a(e),e instanceof n&&(r=e.attr("id"),r||(r=e.id,e.attr({id:r})));if(r){i=this.textPath,s=this.node;if(i)i.attr({"xlink:href":"#"+r});else{i=h("textPath",{"xlink:href":"#"+r});while(s.firstChild)i.appendChild(s.firstChild);s.appendChild(i),this.textPath=a(i)}}}})(-1),t.on("snap.util.attr.text",function(e){if(this.type=="text"){var n=0,r=this.node,s=function(e){var t=h("tspan");if(f(e,"array"))for(var n=0;n<e.length;n++)t.appendChild(s(e[n]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};while(r.firstChild)r.removeChild(r.firstChild);var o=s(e);while(o.firstChild)r.appendChild(o.firstChild)}t.stop()})(-1),t.on("snap.util.attr.fontSize",b)(-1),t.on("snap.util.attr.font-size",b)(-1),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function n(n){return function(){t.stop();var r=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return r=="none"?r:e(i.doc.getElementById(r.match(c)[1]))}}function r(e){return function(n){t.stop();var r="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(n==""||!n){this.node.style[r]="none";return}if(n.type=="marker"){var i=n.node.id;i||h(n.node,{id:n.id}),this.node.style[r]=p(i);return}}}t.on("snap.util.getattr.marker-end",n("end"))(-1),t.on("snap.util.getattr.markerEnd",n("end"))(-1),t.on("snap.util.getattr.marker-start",n("start"))(-1),t.on("snap.util.getattr.markerStart",n("start"))(-1),t.on("snap.util.getattr.marker-mid",n("mid"))(-1),t.on("snap.util.getattr.markerMid",n("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){if(this.type=="rect"&&h(this.node,"rx")==h(this.node,"ry"))return t.stop(),h(this.node,"rx")})(-1),t.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){t.stop();var e=w(this.node);return e.length==1?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var n=h(this.node,"viewBox");if(n)return n=n.split(v),e._.box(+n[0],+n[1],+n[2],+n[3]);return})(-1),t.on("snap.util.getattr.points",function(){var e=h(this.node,"points");t.stop();if(e)return e.split(v);return})(-1),t.on("snap.util.getattr.path",function(){var e=h(this.node,"d");return t.stop(),e})(-1),t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),t.on("snap.util.getattr.fontSize",E)(-1),t.on("snap.util.getattr.font-size",E)(-1)}),r.plugin(function(e,n,r,i,s){function l(e){return e}function c(e){return function(t){return+t.toFixed(3)+e}}var o={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},u=String,a=/[a-z]+$/i,f=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",function(e){var n=u(e).match(f);if(n){var r=t.nt(),i=r.substring(r.lastIndexOf(".")+1),s=this.attr(i),l={};t.stop();var c=n[3]||"",h=s.match(a),p=o[n[1]];h&&h==c?e=p(parseFloat(s),+n[2]):(s=this.asPX(i),e=p(this.asPX(i),this.asPX(i,n[2]+c)));if(isNaN(s)||isNaN(e))return;l[i]=e,this.attr(l)}})(-10),t.on("snap.util.equal",function(e,n){var r,i,s=u(this.attr(e)||""),h=this,p=u(n).match(f);if(p){t.stop();var d=p[3]||"",v=s.match(a),m=o[p[1]];return v&&v==d?{from:parseFloat(s),to:m(parseFloat(s),+p[2]),f:c(v)}:(s=this.asPX(e),{from:s,to:m(s,this.asPX(e,p[2]+d)),f:l})}})(-10)}),r.plugin(function(e,n,r,i,s){var o=r.prototype,u=e.is;o.rect=function(e,t,n,r,i,s){var o;return s==null&&(s=i),u(e,"object")&&e=="[object Object]"?o=e:e!=null&&(o={x:e,y:t,width:n,height:r},i!=null&&(o.rx=i,o.ry=s)),this.el("rect",o)},o.circle=function(e,t,n){var r;return u(e,"object")&&e=="[object Object]"?r=e:e!=null&&(r={cx:e,cy:t,r:n}),this.el("circle",r)};var a=function(){function e(){this.parentNode.removeChild(this)}return function(t,n){var r=i.doc.createElement("img"),s=i.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){n.call(r),r.onload=r.onerror=null,s.removeChild(r)},r.onerror=e,s.appendChild(r),r.src=t}}();o.image=function(t,n,r,i,s){var o=this.el("image");if(u(t,"object")&&"src"in t)o.attr(t);else if(t!=null){var f={"xlink:href":t,preserveAspectRatio:"none"};n!=null&&r!=null&&(f.x=n,f.y=r),i!=null&&s!=null?(f.width=i,f.height=s):a(t,function(){e._.$(o.node,{width:this.offsetWidth,height:this.offsetHeight})}),e._.$(o.node,f)}return o},o.ellipse=function(e,t,n,r){var i;return u(e,"object")&&e=="[object Object]"?i=e:e!=null&&(i={cx:e,cy:t,rx:n,ry:r}),this.el("ellipse",i)},o.path=function(e){var t;return u(e,"object")&&!u(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},o.group=o.g=function(e){var t,n=this.el("g");return arguments.length==1&&e&&!e.type?n.attr(e):arguments.length&&n.add(Array.prototype.slice.call(arguments,0)),n},o.svg=function(e,t,n,r,i,s,o,a){var f={};return u(e,"object")&&t==null?f=e:(e!=null&&(f.x=e),t!=null&&(f.y=t),n!=null&&(f.width=n),r!=null&&(f.height=r),i!=null&&s!=null&&o!=null&&a!=null&&(f.viewBox=[i,s,o,a])),this.el("svg",f)},o.mask=function(e){var t,n=this.el("mask");return arguments.length==1&&e&&!e.type?n.attr(e):arguments.length&&n.add(Array.prototype.slice.call(arguments,0)),n},o.ptrn=function(e,t,n,r,i,s,o,a){if(u(e,"object"))var f=e;else arguments.length?(f={},e!=null&&(f.x=e),t!=null&&(f.y=t),n!=null&&(f.width=n),r!=null&&(f.height=r),i!=null&&s!=null&&o!=null&&a!=null&&(f.viewBox=[i,s,o,a])):f={patternUnits:"userSpaceOnUse"};return this.el("pattern",f)},o.use=function(e){if(e!=null){var t=make("use",this.node);return e instanceof n&&(e.attr("id")||e.attr({id:ID()}),e=e.attr("id")),this.el("use",{"xlink:href":e})}return n.prototype.use.call(this)},o.text=function(e,t,n){var r={};return u(e,"object")?r=e:e!=null&&(r={x:e,y:t,text:n||""}),this.el("text",r)},o.line=function(e,t,n,r){var i={};return u(e,"object")?i=e:e!=null&&(i={x1:e,x2:n,y1:t,y2:r}),this.el("line",i)},o.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return u(e,"object")&&!u(e,"array")?t=e:e!=null&&(t={points:e}),this.el("polyline",t)},o.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t={};return u(e,"object")&&!u(e,"array")?t=e:e!=null&&(t={points:e}),this.el("polygon",t)},function(){function r(){return this.selectAll("stop")}function i(t,r){var i=n("stop"),s={offset:+r+"%"};return t=e.color(t),s["stop-color"]=t.hex,t.opacity<1&&(s["stop-opacity"]=t.opacity),n(i,s),this.node.appendChild(i),this}function s(){if(this.type=="linearGradient"){var t=n(this.node,"x1")||0,r=n(this.node,"x2")||1,i=n(this.node,"y1")||0,s=n(this.node,"y2")||0;return e._.box(t,i,math.abs(r-t),math.abs(s-i))}var o=this.node.cx||.5,u=this.node.cy||.5,a=this.node.r||0;return e._.box(o-a,u-a,a*2,a*2)}function u(e,r){function h(e,t){var n=(t-l)/(e-c);for(var r=c;r<e;r++)o[r].offset=+(+l+n*(r-c)).toFixed(2);c=e,l=t}var i=t("snap.util.grad.parse",null,r).firstDefined(),s;if(!i)return null;i.params.unshift(e),i.type.toLowerCase()=="l"?s=a.apply(0,i.params):s=f.apply(0,i.params),i.type!=i.type.toLowerCase()&&n(s.node,{gradientUnits:"userSpaceOnUse"});var o=i.stops,u=o.length,l=0,c=0;u--;for(var p=0;p<u;p++)"offset"in o[p]&&h(p,o[p].offset);o[u].offset=o[u].offset||100,h(u,o[u].offset);for(p=0;p<=u;p++){var d=o[p];s.addStop(d.color,d.offset)}return s}function a(t,o,u,a,f){var l=e._.make("linearGradient",t);return l.stops=r,l.addStop=i,l.getBBox=s,o!=null&&n(l.node,{x1:o,y1:u,x2:a,y2:f}),l}function f(t,o,u,a,f,l){var c=e._.make("radialGradient",t);return c.stops=r,c.addStop=i,c.getBBox=s,o!=null&&n(c.node,{cx:o,cy:u,r:a}),f!=null&&l!=null&&n(c.node,{fx:f,fy:l}),c}var n=e._.$;o.gradient=function(e){return u(this.defs,e)},o.gradientLinear=function(e,t,n,r){return a(this.defs,e,t,n,r)},o.gradientRadial=function(e,t,n,r,i){return f(this.defs,e,t,n,r,i)},o.toString=function(){var t=this.node.ownerDocument,n=t.createDocumentFragment(),r=t.createElement("div"),i=this.node.cloneNode(!0),s;return n.appendChild(r),r.appendChild(i),e._.$(i,{xmlns:"http://www.w3.org/2000/svg"}),s=r.innerHTML,n.removeChild(n.firstChild),s},o.clear=function(){var e=this.node.firstChild,t;while(e)t=e.nextSibling,e.tagName!="defs"?e.parentNode.removeChild(e):o.clear.call({node:e}),e=t}}()}),r.plugin(function(e,t,n,r){function m(e){var t=m.ps=m.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[u](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function g(e,t,n,r){return e==null&&(e=t=n=r=0),t==null&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:l.min(n,r)/2,r2:l.max(n,r)/2,r0:l.sqrt(n*n+r*r)/2,path:R(e,t,n,r),vb:[e,t,n,r].join(" ")}}function y(){return this.join(",").replace(a,"$1")}function b(e){var t=o(e);return t.toString=y,t}function w(e,t,n,r,i,s,o,u,a){return a==null?O(e,t,n,r,i,s,o,u):N(e,t,n,r,i,s,o,u,M(e,t,n,r,i,s,o,u,a))}function E(n,r){function i(e){return+(+e).toFixed(3)}return e._.cacher(function(e,s,o){e instanceof t&&(e=e.attr("d")),e=Y(e);var u,a,f,l,c="",h={},p,d=0;for(var v=0,m=e.length;v<m;v++){f=e[v];if(f[0]=="M")u=+f[1],a=+f[2];else{l=w(u,a,f[1],f[2],f[3],f[4],f[5],f[6]);if(d+l>s){if(r&&!h.start){p=w(u,a,f[1],f[2],f[3],f[4],f[5],f[6],s-d),c+=["C"+i(p.start.x),i(p.start.y),i(p.m.x),i(p.m.y),i(p.x),i(p.y)];if(o)return c;h.start=c,c=["M"+i(p.x),i(p.y)+"C"+i(p.n.x),i(p.n.y),i(p.end.x),i(p.end.y),i(f[5]),i(f[6])].join(),d+=l,u=+f[5],a=+f[6];continue}if(!n&&!r)return p=w(u,a,f[1],f[2],f[3],f[4],f[5],f[6],s-d),p}d+=l,u=+f[5],a=+f[6]}c+=f.shift()+f}return h.end=c,p=n?d:r?h:N(u,a,f[0],f[1],f[2],f[3],f[4],f[5],1),p},null,e._.clone)}function N(e,t,n,r,i,s,o,u,a){var f=1-a,h=d(f,3),p=d(f,2),v=a*a,m=v*a,g=h*e+p*3*a*n+f*3*a*a*i+m*o,y=h*t+p*3*a*r+f*3*a*a*s+m*u,b=e+2*a*(n-e)+v*(i-2*n+e),w=t+2*a*(r-t)+v*(s-2*r+t),E=n+2*a*(i-n)+v*(o-2*i+n),S=r+2*a*(s-r)+v*(u-2*s+r),x=f*e+a*n,T=f*t+a*r,N=f*i+a*o,C=f*s+a*u,k=90-l.atan2(b-E,w-S)*180/c;return{x:g,y:y,m:{x:b,y:w},n:{x:E,y:S},start:{x:x,y:T},end:{x:N,y:C},alpha:k}}function C(t,n,r,i,s,o,u,a){e.is(t,"array")||(t=[t,n,r,i,s,o,u,a]);var f=G.apply(null,t);return g(f.min.x,f.min.y,f.max.x-f.min.x,f.max.y-f.min.y)}function k(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function L(e,t){return e=g(e),t=g(t),k(t,e.x,e.y)||k(t,e.x2,e.y)||k(t,e.x,e.y2)||k(t,e.x2,e.y2)||k(e,t.x,t.y)||k(e,t.x2,t.y)||k(e,t.x,t.y2)||k(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function A(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function O(e,t,n,r,i,s,o,u,a){a==null&&(a=1),a=a>1?1:a<0?0:a;var f=a/2,c=12,h=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0;for(var v=0;v<c;v++){var m=f*h[v]+f,g=A(m,e,n,i,o),y=A(m,t,r,s,u),b=g*g+y*y;d+=p[v]*l.sqrt(b)}return f*d}function M(e,t,n,r,i,s,o,u,a){if(a<0||O(e,t,n,r,i,s,o,u)<a)return;var f=1,l=f/2,c=f-l,h,p=.01;h=O(e,t,n,r,i,s,o,u,c);while(v(h-a)>p)l/=2,c+=(h<a?1:-1)*l,h=O(e,t,n,r,i,s,o,u,c);return c}function _(e,t,n,r,i,s,o,u){if(p(e,n)<h(i,o)||h(e,n)>p(i,o)||p(t,r)<h(s,u)||h(t,r)>p(s,u))return;var a=(e*r-t*n)*(i-o)-(e-n)*(i*u-s*o),f=(e*r-t*n)*(s-u)-(t-r)*(i*u-s*o),l=(e-n)*(s-u)-(t-r)*(i-o);if(!l)return;var c=a/l,d=f/l,v=+c.toFixed(2),m=+d.toFixed(2);if(v<+h(e,n).toFixed(2)||v>+p(e,n).toFixed(2)||v<+h(i,o).toFixed(2)||v>+p(i,o).toFixed(2)||m<+h(t,r).toFixed(2)||m>+p(t,r).toFixed(2)||m<+h(s,u).toFixed(2)||m>+p(s,u).toFixed(2))return;return{x:c,y:d}}function D(e,t){return H(e,t)}function P(e,t){return H(e,t,1)}function H(e,t,n){var r=C(e),i=C(t);if(!L(r,i))return n?0:[];var s=O.apply(0,e),o=O.apply(0,t),u=~~(s/8),a=~~(o/8),f=[],l=[],c={},h=n?0:[];for(var p=0;p<u+1;p++){var d=N.apply(0,e.concat(p/u));f.push({x:d.x,y:d.y,t:p/u})}for(p=0;p<a+1;p++)d=N.apply(0,t.concat(p/a)),l.push({x:d.x,y:d.y,t:p/a});for(p=0;p<u;p++)for(var m=0;m<a;m++){var g=f[p],y=f[p+1],b=l[m],w=l[m+1],E=v(y.x-g.x)<.001?"y":"x",S=v(w.x-b.x)<.001?"y":"x",x=_(g.x,g.y,y.x,y.y,b.x,b.y,w.x,w.y);if(x){if(c[x.x.toFixed(4)]==x.y.toFixed(4))continue;c[x.x.toFixed(4)]=x.y.toFixed(4);var T=g.t+v((x[E]-g[E])/(y[E]-g[E]))*(y.t-g.t),k=b.t+v((x[S]-b[S])/(w[S]-b[S]))*(w.t-b.t);T>=0&&T<=1&&k>=0&&k<=1&&(n?h++:h.push({x:x.x,y:x.y,t1:T,t2:k}))}}return h}function B(e,t){return F(e,t)}function j(e,t){return F(e,t,1)}function F(e,t,n){e=Y(e),t=Y(t);var r,i,s,o,u,a,f,l,c,h,p=n?0:[];for(var d=0,v=e.length;d<v;d++){var m=e[d];if(m[0]=="M")r=u=m[1],i=a=m[2];else{m[0]=="C"?(c=[r,i].concat(m.slice(1)),r=c[6],i=c[7]):(c=[r,i,r,i,u,a,u,a],r=u,i=a);for(var g=0,y=t.length;g<y;g++){var b=t[g];if(b[0]=="M")s=f=b[1],o=l=b[2];else{b[0]=="C"?(h=[s,o].concat(b.slice(1)),s=h[6],o=h[7]):(h=[s,o,s,o,f,l,f,l],s=f,o=l);var w=H(c,h,n);if(n)p+=w;else{for(var E=0,S=w.length;E<S;E++)w[E].segment1=d,w[E].segment2=g,w[E].bez1=c,w[E].bez2=h;p=p.concat(w)}}}}}return p}function I(e,t,n){var r=q(e);return k(r,t,n)&&F(e,[["M",t,n],["H",r.x2+10]],1)%2==1}function q(e){var t=m(e);if(t.bbox)return o(t.bbox);if(!e)return g();e=Y(e);var n=0,r=0,i=[],s=[],u;for(var a=0,f=e.length;a<f;a++){u=e[a];if(u[0]=="M")n=u[1],r=u[2],i.push(n),s.push(r);else{var l=G(n,r,u[1],u[2],u[3],u[4],u[5],u[6]);i=i.concat(l.min.x,l.max.x),s=s.concat(l.min.y,l.max.y),n=u[5],r=u[6]}}var c=h.apply(0,i),d=h.apply(0,s),v=p.apply(0,i),y=p.apply(0,s),b=g(c,d,v-c,y-d);return t.bbox=o(b),b}function R(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]];var s=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return s.toString=y,s}function U(e,t,n,r,i){i==null&&r==null&&(r=n),e=+e,t=+t,n=+n,r=+r;if(i!=null)var s=Math.PI/180,o=e+n*Math.cos(-r*s),u=e+n*Math.cos(-i*s),a=t+n*Math.sin(-r*s),f=t+n*Math.sin(-i*s),l=[["M",o,a],["A",n,n,0,+(i-r>180),0,u,f]];else l=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return l.toString=y,l}function X(t){var n=m(t),r=String.prototype.toLowerCase;if(n.rel)return b(n.rel);if(!e.is(t,"array")||!e.is(t&&t[0],"array"))t=e.parsePathString(t);var i=[],s=0,o=0,u=0,a=0,f=0;t[0][0]=="M"&&(s=t[0][1],o=t[0][2],u=s,a=o,f++,i.push(["M",s,o]));for(var l=f,c=t.length;l<c;l++){var h=i[l]=[],p=t[l];if(p[0]!=r.call(p[0])){h[0]=r.call(p[0]);switch(h[0]){case"a":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+(p[6]-s).toFixed(3),h[7]=+(p[7]-o).toFixed(3);break;case"v":h[1]=+(p[1]-o).toFixed(3);break;case"m":u=p[1],a=p[2];default:for(var d=1,v=p.length;d<v;d++)h[d]=+(p[d]-(d%2?s:o)).toFixed(3)}}else{h=i[l]=[],p[0]=="m"&&(u=p[1]+s,a=p[2]+o);for(var g=0,w=p.length;g<w;g++)i[l][g]=p[g]}var E=i[l].length;switch(i[l][0]){case"z":s=u,o=a;break;case"h":s+=+i[l][E-1];break;case"v":o+=+i[l][E-1];break;default:s+=+i[l][E-2],o+=+i[l][E-1]}}return i.toString=y,n.rel=b(i),i}function V(t){var n=m(t);if(n.abs)return b(n.abs);if(!s(t,"array")||!s(t&&t[0],"array"))t=e.parsePathString(t);if(!t||!t.length)return[["M",0,0]];var r=[],i=0,o=0,u=0,a=0,f=0,l;t[0][0]=="M"&&(i=+t[0][1],o=+t[0][2],u=i,a=o,f++,r[0]=["M",i,o]);var c=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z";for(var h,p,d=f,v=t.length;d<v;d++){r.push(h=[]),p=t[d],l=p[0];if(l!=l.toUpperCase()){h[0]=l.toUpperCase();switch(h[0]){case"A":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+i,h[7]=+p[7]+o;break;case"V":h[1]=+p[1]+o;break;case"H":h[1]=+p[1]+i;break;case"R":var g=[i,o].concat(p.slice(1));for(var w=2,E=g.length;w<E;w++)g[w]=+g[w]+i,g[++w]=+g[w]+o;r.pop(),r=r.concat(et(g,c));break;case"O":r.pop(),g=U(i,o,p[1],p[2]),g.push(g[0]),r=r.concat(g);break;case"U":r.pop(),r=r.concat(U(i,o,p[1],p[2],p[3])),h=["U"].concat(r[r.length-1].slice(-2));break;case"M":u=+p[1]+i,a=+p[2]+o;default:for(w=1,E=p.length;w<E;w++)h[w]=+p[w]+(w%2?i:o)}}else if(l=="R")g=[i,o].concat(p.slice(1)),r.pop(),r=r.concat(et(g,c)),h=["R"].concat(p.slice(-2));else if(l=="O")r.pop(),g=U(i,o,p[1],p[2]),g.push(g[0]),r=r.concat(g);else if(l=="U")r.pop(),r=r.concat(U(i,o,p[1],p[2],p[3])),h=["U"].concat(r[r.length-1].slice(-2));else for(var S=0,x=p.length;S<x;S++)h[S]=p[S];l=l.toUpperCase();if(l!="O")switch(h[0]){case"Z":i=+u,o=+a;break;case"H":i=h[1];break;case"V":o=h[1];break;case"M":u=h[h.length-2],a=h[h.length-1];default:i=h[h.length-2],o=h[h.length-1]}}return r.toString=y,n.abs=b(r),r}function $(e,t,n,r){return[e,t,n,r,n,r]}function J(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]}function K(t,n,r,i,s,o,u,a,f,h){var p=c*120/180,d=c/180*(+s||0),m=[],g,y=e._.cacher(function(e,t,n){var r=e*l.cos(n)-t*l.sin(n),i=e*l.sin(n)+t*l.cos(n);return{x:r,y:i}});if(!h){g=y(t,n,-d),t=g.x,n=g.y,g=y(a,f,-d),a=g.x,f=g.y;var b=l.cos(c/180*s),w=l.sin(c/180*s),E=(t-a)/2,S=(n-f)/2,x=E*E/(r*r)+S*S/(i*i);x>1&&(x=l.sqrt(x),r=x*r,i=x*i);var T=r*r,N=i*i,C=(o==u?-1:1)*l.sqrt(v((T*N-T*S*S-N*E*E)/(T*S*S+N*E*E))),k=C*r*S/i+(t+a)/2,L=C*-i*E/r+(n+f)/2,A=l.asin(((n-L)/i).toFixed(9)),O=l.asin(((f-L)/i).toFixed(9));A=t<k?c-A:A,O=a<k?c-O:O,A<0&&(A=c*2+A),O<0&&(O=c*2+O),u&&A>O&&(A-=c*2),!u&&O>A&&(O-=c*2)}else A=h[0],O=h[1],k=h[2],L=h[3];var M=O-A;if(v(M)>p){var _=O,D=a,P=f;O=A+p*(u&&O>A?1:-1),a=k+r*l.cos(O),f=L+i*l.sin(O),m=K(a,f,r,i,s,0,u,D,P,[O,_,k,L])}M=O-A;var H=l.cos(A),B=l.sin(A),j=l.cos(O),F=l.sin(O),I=l.tan(M/4),q=4/3*r*I,R=4/3*i*I,U=[t,n],z=[t+q*B,n-R*H],W=[a+q*F,f-R*j],X=[a,f];z[0]=2*U[0]-z[0],z[1]=2*U[1]-z[1];if(h)return[z,W,X].concat(m);m=[z,W,X].concat(m).join().split(",");var V=[];for(var $=0,J=m.length;$<J;$++)V[$]=$%2?y(m[$-1],m[$],d).y:y(m[$],m[$+1],d).x;return V}function Q(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:d(f,3)*e+d(f,2)*3*a*n+f*3*a*a*i+d(a,3)*o,y:d(f,3)*t+d(f,2)*3*a*r+f*3*a*a*s+d(a,3)*u}}function G(e,t,n,r,i,s,o,u){var a=[],f=[[],[]],c,d,m,g,y,b,w,E;for(var S=0;S<2;++S){S==0?(d=6*e-12*n+6*i,c=-3*e+9*n-9*i+3*o,m=3*n-3*e):(d=6*t-12*r+6*s,c=-3*t+9*r-9*s+3*u,m=3*r-3*t);if(v(c)<1e-12){if(v(d)<1e-12)continue;g=-m/d,0<g&&g<1&&a.push(g);continue}w=d*d-4*m*c,E=l.sqrt(w);if(w<0)continue;y=(-d+E)/(2*c),0<y&&y<1&&a.push(y),b=(-d-E)/(2*c),0<b&&b<1&&a.push(b)}var x,T,N=a.length,C=N,k;while(N--)g=a[N],k=1-g,f[0][N]=k*k*k*e+3*k*k*g*n+3*k*g*g*i+g*g*g*o,f[1][N]=k*k*k*t+3*k*k*g*r+3*k*g*g*s+g*g*g*u;return f[0][C]=e,f[1][C]=t,f[0][C+1]=o,f[1][C+1]=u,f[0].length=f[1].length=C+2,{min:{x:h.apply(0,f[0]),y:h.apply(0,f[1])},max:{x:p.apply(0,f[0]),y:p.apply(0,f[1])}}}function Y(e,t){var n=!t&&m(e);if(!t&&n.curve)return b(n.curve);var r=V(e),i=t&&V(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(K.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":n=="C"||n=="S"?(r=t.x*2-t.bx,i=t.y*2-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":n=="Q"||n=="T"?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(J(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(J(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat($(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat($(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat($(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat($(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length)c[t]="A",i&&(h[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),y=p(r.length,i&&i.length||0)}},l=function(e,t,n,s,o){e&&t&&e[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],y=p(r.length,i&&i.length||0))},c=[],h=[],d="",v="";for(var g=0,y=p(r.length,i&&i.length||0);g<y;g++){r[g]&&(d=r[g][0]),d!="C"&&(c[g]=d,g&&(v=c[g-1])),r[g]=u(r[g],s,v),c[g]!="A"&&d=="C"&&(c[g]="C"),a(r,g),i&&(i[g]&&(d=i[g][0]),d!="C"&&(h[g]=d,g&&(v=h[g-1])),i[g]=u(i[g],o,v),h[g]!="A"&&d=="C"&&(h[g]="C"),a(i,g)),l(r,i,s,o,g),l(i,r,o,s,g);var w=r[g],E=i&&i[g],S=w.length,x=i&&E.length;s.x=w[S-2],s.y=w[S-1],s.bx=f(w[S-4])||s.x,s.by=f(w[S-3])||s.y,o.bx=i&&(f(E[x-4])||o.x),o.by=i&&(f(E[x-3])||o.y),o.x=i&&E[x-2],o.y=i&&E[x-1]}return i||(n.curve=b(r)),i?[r,i]:r}function Z(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=Y(e);for(i=0,o=e.length;i<o;i++){a=e[i];for(s=1,u=a.length;s<u;s+=2)n=t.x(a[s],a[s+1]),r=t.y(a[s],a[s+1]),a[s]=n,a[s+1]=r}return e}function et(e,t){var n=[];for(var r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?s[3]={x:+e[0],y:+e[1]}:i-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}var i=t.prototype,s=e.is,o=e._.clone,u="hasOwnProperty",a=/,?([a-z]),?/gi,f=parseFloat,l=Math,c=l.PI,h=l.min,p=l.max,d=l.pow,v=l.abs,S=E(1),x=E(),T=E(0,1),z=e._unit2px,W={path:function(e){return e.attr("path")},circle:function(e){var t=z(e);return U(t.cx,t.cy,t.r)},ellipse:function(e){var t=z(e);return U(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=z(e);return R(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=z(e);return R(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return R(t.x,t.y,t.width,t.height)}};e.path=m,e.path.getTotalLength=S,e.path.getPointAtLength=x,e.path.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return T(e,t).end;var r=T(e,n,1);return t?T(r,t).end:r},i.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},i.getPointAtLength=function(e){return x(this.attr("d"),e)},i.getSubpath=function(t,n){return e.path.getSubpath(this.attr("d"),t,n)},e._.box=g,e.path.findDotsAtSegment=N,e.path.bezierBBox=C,e.path.isPointInsideBBox=k,e.path.isBBoxIntersect=L,e.path.intersection=B,e.path.intersectionNumber=j,e.path.isPointInside=I,e.path.getBBox=q,e.path.get=W,e.path.toRelative=X,e.path.toAbsolute=V,e.path.toCubic=Y,e.path.map=Z,e.path.toString=y,e.path.clone=b}),r.plugin(function(e,r,i,s){var o=Math.max,u=Math.min,a=function(e){this.items=[],this.bindings={},this.length=0,this.type="set";if(e)for(var t=0,n=e.length;t<n;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},f=a.prototype;f.push=function(){var e,t;for(var n=0,r=arguments.length;n<r;n++)e=arguments[n],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},f.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},f.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this},f.animate=function(r,i,s,o){typeof s=="function"&&!s.length&&(o=s,s=n.linear),r instanceof e._.Animation&&(o=r.callback,s=r.easing,i=s.dur,r=r.attr);var u=arguments;if(e.is(r,"array")&&e.is(u[u.length-1],"array"))var a=!0;var f,l=function(){f?this.b=f:f=this.b},c=0,h=o&&function(){c++==this.length&&o.call(this)};return this.forEach(function(e,n){t.once("snap.animcreated."+e.id,l),a?u[n]&&e.animate.apply(e,u[n]):e.animate(r,i,s,h)})},f.remove=function(){while(this.length)this.pop().remove();return this},f.bind=function(e,t,n){var r={};if(typeof t=="function")this.bindings[e]=t;else{var i=n||e;this.bindings[e]=function(e){r[i]=e,t.attr(r)}}return this},f.attr=function(e){var t={};for(var n in e)this.bindings[n]?this.bindings[n](e[n]):t[n]=e[n];for(var r=0,i=this.items.length;r<i;r++)this.items[r].attr(t);return this},f.clear=function(){while(this.length)this.pop()},f.splice=function(e,t,n){e=e<0?o(this.length+e,0):e,t=o(0,u(this.length-e,t));var r=[],i=[],s=[],f;for(f=2;f<arguments.length;f++)s.push(arguments[f]);for(f=0;f<t;f++)i.push(this[e+f]);for(;f<this.length-e;f++)r.push(this[e+f]);var l=s.length;for(f=0;f<l+r.length;f++)this.items[e+f]=this[e+f]=f<l?s[f]:r[f-l];f=this.items.length=this.length-=t-l;while(this[f])delete this[f++];return new a(i)},f.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},f.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this},f.getBBox=function(){var e=[],t=[],n=[],r=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return e=u.apply(0,e),t=u.apply(0,t),n=o.apply(0,n),r=o.apply(0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t,cx:e+(n-e)/2,cy:t+(r-t)/2}},f.clone=function(e){e=new a;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},f.toString=function(){return"Snap‘s set"},f.type="set",e.set=function(){var e=new a;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),r.plugin(function(e,n,r,i){function a(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}}function f(t,n,r){n=u(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];var i=Math.max(t.length,n.length),s=[],o=[],f=0,l,c,h,v;for(;f<i;f++){h=t[f]||a(n[f]),v=n[f]||a(h);if(h[0]!=v[0]||h[0].toLowerCase()=="r"&&(h[2]!=v[2]||h[3]!=v[3])||h[0].toLowerCase()=="s"&&(h[3]!=v[3]||h[4]!=v[4])){t=e._.transform2matrix(t,r()),n=e._.transform2matrix(n,r()),s=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],o=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}s[f]=[],o[f]=[];for(l=0,c=Math.max(h.length,v.length);l<c;l++)l in h&&(s[f][l]=h[l]),l in v&&(o[f][l]=v[l])}return{from:d(s),to:d(o),f:p(s)}}function l(e){return e}function c(e){return function(t){return+t.toFixed(3)+e}}function h(t){return e.rgb(t[0],t[1],t[2])}function p(e){var t=0,n,r,i,s,o,u,a=[];for(n=0,r=e.length;n<r;n++){o="[",u=['"'+e[n][0]+'"'];for(i=1,s=e[n].length;i<s;i++)u[i]="val["+t++ +"]";o+=u+"]",a[n]=o}return Function("val","return Snap.path.toString.call(["+a+"])")}function d(e){var t=[];for(var n=0,r=e.length;n<r;n++)for(var i=1,s=e[n].length;i<s;i++)t.push(e[n][i]);return t}var s={},o=/[a-z]+$/i,u=String;s.stroke=s.fill="colour",n.prototype.equal=function(e,n){return t("snap.util.equal",this,e,n).firstDefined()},t.on("snap.util.equal",function(t,n){var r,i,a=u(this.attr(t)||""),v=this;if(a==+a&&n==+n)return{from:+a,to:+n,f:l};if(s[t]=="colour")return r=e.color(a),i=e.color(n),{from:[r.r,r.g,r.b,r.opacity],to:[i.r,i.g,i.b,i.opacity],f:h};if(t=="transform"||t=="gradientTransform"||t=="patternTransform")return n instanceof e.Matrix&&(n=n.toTransformString()),e._.rgTransform.test(n)||(n=e._.svgTransform2string(n)),f(a,n,function(){return v.getBBox(1)});if(t=="d"||t=="path")return r=e.path.toCubic(a,n),{from:d(r[0]),to:d(r[1]),f:p(r[0])};if(t=="points")return r=u(a).split(e._.separator),i=u(n).split(e._.separator),{from:r,to:i,f:function(e){return e}};aUnit=a.match(o);var m=u(n).match(o);return aUnit&&aUnit==m?{from:parseFloat(a),to:parseFloat(n),f:c(aUnit)}:{from:this.asPX(t),to:this.asPX(t,n),f:l}})}),r.plugin(function(e,n,r,i){var s=n.prototype,o="hasOwnProperty",u="createTouch"in i.doc,a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],f={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},l=function(e,t){var n=e=="y"?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:i.doc;return r[n in r.documentElement?"documentElement":"body"][n]},c=function(){this.returnValue=!1},h=function(){return this.originalEvent.preventDefault()},p=function(){this.cancelBubble=!0},d=function(){return this.originalEvent.stopPropagation()},v=function(){if(i.doc.addEventListener)return function(e,t,n,r){var i=u&&f[t]?f[t]:t,s=function(i){var s=l("y",r),a=l("x",r);if(u&&f[o](t))for(var c=0,p=i.targetTouches&&i.targetTouches.length;c<p;c++)if(i.targetTouches[c].target==e||e.contains(i.targetTouches[c].target)){var v=i;i=i.targetTouches[c],i.originalEvent=v,i.preventDefault=h,i.stopPropagation=d;break}var m=i.clientX+a,g=i.clientY+s;return n.call(r,i,m,g)};return t!==i&&e.addEventListener(t,s,!1),e.addEventListener(i,s,!1),function(){return t!==i&&e.removeEventListener(t,s,!1),e.removeEventListener(i,s,!1),!0}};if(i.doc.attachEvent)return function(e,t,n,r){var i=function(e){e=e||r.node.ownerDocument.window.event;var t=l("y",r),i=l("x",r),s=e.clientX+i,o=e.clientY+t;return e.preventDefault=e.preventDefault||c,e.stopPropagation=e.stopPropagation||p,n.call(r,e,s,o)};e.attachEvent("on"+t,i);var s=function(){return e.detachEvent("on"+t,i),!0};return s}}(),m=[],g=function(e){var n=e.clientX,r=e.clientY,i=l("y"),s=l("x"),o,a=m.length;while(a--){o=m[a];if(u){var f=e.touches&&e.touches.length,c;while(f--){c=e.touches[f];if(c.identifier==o.el._drag.id||o.el.node.contains(c.target)){n=c.clientX,r=c.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else e.preventDefault();var h=o.el.node,p,d=h.nextSibling,v=h.parentNode,g=h.style.display;n+=s,r+=i,t("snap.drag.move."+o.el.id,o.move_scope||o.el,n-o.el._drag.x,r-o.el._drag.y,n,r,e)}},y=function(n){e.unmousemove(g).unmouseup(y);var r=m.length,i;while(r--)i=m[r],i.el._drag={},t("snap.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,n);m=[]};for(var b=a.length;b--;)(function(t){e[t]=s[t]=function(n,r){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:v(this.node||document,t,n,r||this)})),this},e["un"+t]=s["un"+t]=function(e){var n=this.events||[],r=n.length;while(r--)if(n[r].name==t&&(n[r].f==e||!e))return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}})(a[b]);s.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},s.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var w=[];s.drag=function(n,r,i,s,o,u){function f(a,f,l){(a.originalEvent||a).preventDefault(),this._drag.x=f,this._drag.y=l,this._drag.id=a.identifier,!m.length&&e.mousemove(g).mouseup(y),m.push({el:this,move_scope:s,start_scope:o,end_scope:u}),r&&t.on("snap.drag.start."+this.id,r),n&&t.on("snap.drag.move."+this.id,n),i&&t.on("snap.drag.end."+this.id,i),t("snap.drag.start."+this.id,o||s||this,f,l,a)}if(!arguments.length){var a;return this.drag(function(e,t){this.attr({transform:a+(a?"T":"t")+[e,t]})},function(){a=this.transform().local})}return this._drag={},w.push({el:this,start:f}),this.mousedown(f),this},s.undrag=function(){var n=w.length;while(n--)w[n].el==this&&(this.unmousedown(w[n].start),w.splice(n,1),t.unbind("snap.drag.*."+this.id));return!w.length&&e.unmousemove(g).unmouseup(y),this}}),r.plugin(function(e,n,r,i){var s=n.prototype,o=r.prototype,u=/^\s*url\((.+)\)/,a=String,f=e._.$;e.filter={},o.filter=function(t){var r=this;r.type!="svg"&&(r=r.paper);var i=e.parse(a(t)),s=e._.id(),o=r.node.offsetWidth,u=r.node.offsetHeight,l=f("filter");return f(l,{id:s,filterUnits:"userSpaceOnUse"}),l.appendChild(i.node),r.defs.appendChild(l),new n(l)},t.on("snap.util.getattr.filter",function(){t.stop();var n=f(this.node,"filter");if(n){var r=a(n).match(u);return r&&e.select(r[1])}}),t.on("snap.util.attr.filter",function(r){if(r instanceof n&&r.type=="filter"){t.stop();var i=r.node.id;i||(f(r.node,{id:r.id}),i=r.id),f(this.node,{filter:e.url(i)})}if(!r||r=="none")t.stop(),this.node.removeAttribute("filter")}),e.filter.blur=function(t,n){t==null&&(t=2);var r=n==null?t:[t,n];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,n,r,i,s){return typeof r=="string"&&(i=r,s=i,r=4),typeof i!="string"&&(s=i,i="#000"),i=i||"#000",r==null&&(r=4),s==null&&(s=1),t==null&&(t=0,n=2),n==null&&(n=t),i=e.color(i),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:t,dy:n,blur:r,opacity:s})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return t==null&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return t==null&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return t==null&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return t==null&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return t==null&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return t==null&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),r}),define("legend",["ajax",hasSVG()?"jquerySvgHotpoint":"hotpoint","jquery","scrollIntoView","snap","blockUI"],function(e,t){var n={callbacks:{onSelectionCallout:null}},r=function(e){this.opts=$.extend({},n,e||{}),this.init()};return r.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.initComponent()},bindEls:function(){var e=this;e.$legendTitle=$("#legend-title"),e.$legendBody=$("#legend-body")},bindAttr:function(){var e=this;e.timer1=null,e.timer2=null},initComponent:function(){var e=this;hasSVG()?e.initSvgHotpoint():e.initGifHotpoint()},initSvgHotpoint:function(){var e=this;e.$legendBody.svgHotpoint({host:"",tbodyId:"parts-body",rowBgColor:"#A7CDF1",callbacks:{onSelectionCallout:function(t){typeof e.opts.callbacks.onSelectionCallout=="function"&&e.opts.callbacks.onSelectionCallout.apply(null,[[t]])}}})},initGifHotpoint:function(){var e=this;e.hotpoint=new t({radius:10,dock:"TL",radius:10,assistiveTool:"3",tbodyId:"parts-body",renderToId:"legend-body",selectedRowBgClass:"checked",nopic:"../styles/images/arrow_icon.png",callbacks:{onSelectionCallout:function(t){typeof e.opts.callbacks.onSelectionCallout=="function"&&e.opts.callbacks.onSelectionCallout.apply(null,[t])},onLegendDbClick:function(){this.opts.legendExist&&(this.resetLegend(),this.redraw())}}})},loadLegend:function(e){var t=this;t.legendLoaded=!1,hasSVG()?t.loadSvgLegend(e):t.loadGifLegend(e)},loadSvgLegend:function(e){var t=this,n=e.svgFile;t.$legendBody.svgHotpoint("loadSVG",{url:n,loaded:function(){t.legendLoaded=!0}})},loadGifLegend:function(t){var n=this,r=t.svgFile;e.invoke({type:"GET",url:r,dataType:"text",success:function(e){n.bindGifLegend(e,t)},failed:function(e){n.hotpoint.destroyLegend(),n.hotpoint.loadErrorImg()}})},bindGifLegend:function(e,t){var n=this,r={},i=[],s=t.gifFile;n.isSVG(e)&&(r=n.getSvgSize(e),i=n.extractCallouts(e)),n.hotpoint.bindLegend({src:s,data:i,swfLegendWidth:r.width,swfLegendHeight:r.height}),n.legendLoaded=!0},extractCallouts:function(e){var t=this,n=[],r=e.match(/<text .*>([^<]{1,3})<\/text>/g)||[];for(var i=0;i<r.length;i++){var s=r[i].match("<([a-zA-Z]+).*?>(.*?)</\\1>")[2],o=r[i].match(/matrix\((.+)\)/i),u=o[1].split(" ");n.push({callout:s,x:parseInt(u[4])+5,y:parseInt(u[5])-5})}return n},getSvgSize:function(e){var t=this,n=e.match(/<svg[^>]*>/i),r=$.parseXML(n[0]+" </svg>").documentElement;return{width:parseFloat(r.getAttribute("width")),height:parseFloat(r.getAttribute("height"))}},linkLegend:function(e){var t=this;if(e.length==0)return;clearTimeout(t.timer1),clearInterval(t.timer2),t.timer1=setTimeout(function(){clearInterval(t.timer2)},3e4),t.timer2=setInterval(function(){t.legendLoaded&&(hasSVG()?t.$legendBody.svgHotpoint("highlightCallout",e):t.hotpoint.linkHotpoint(e),clearTimeout(t.timer1),clearInterval(t.timer2))},200)},isSVG:function(e){var t=this;return e.match(/<svg[^>]*>/i)?!0:!1},setTitle:function(e){var t=this;t.$legendTitle.text(e)}},r}),define("note",["jquery"],function(){var e=function(){this.init()};return e.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.bindEvent()},bindEls:function(){var e=this;e.$parts=$("#parts"),e.$note=$("#parts-note")},bindAttr:function(){var e=this;e.showTimer=null,e.hideTimer=null},bindEvent:function(){var e=this;e.$parts.on("mouseenter",".item.remark",function(t){if($(this).val().length===0)return;e.clearHideTimer(),e.setNoteValue($(this)),e.caculateNote($(this)),e.showNote()}).on("mouseleave",".item.remark",function(){if($(this).val().length===0)return;e.clearShowTimer(),e.hideNote()}),e.$note.on({mouseenter:function(){e.clearHideTimer(),e.showNote()},mouseleave:function(){e.clearShowTimer(),e.hideNote()}})},clearShowTimer:function(){var e=this;clearTimeout(e.showTimer)},clearHideTimer:function(){var e=this;clearTimeout(e.hideTimer)},showNote:function(){var e=this;e.showTimer=setTimeout(function(){e.$note.show()},500)},hideNote:function(){var e=this;e.hideTimer=setTimeout(function(){e.$note.hide()},500)},setNoteValue:function(e){var t=this,n=e.closest("[data-field=row]"),r=n.attr("data-partNote"),i=n.attr("data-usageNote");t.$note.find(".part-note").text(r),t.$note.find(".usage-note").text(i)},caculateNote:function(e){var t=this,n=e.offset(),r=n.left,i=n.top,s=e.outerHeight(),o=e.outerWidth(),u=t.$note.outerHeight(),a=t.$note.outerWidth(),f=$(window).height();t.$note.removeClass("top bottom").css("left",r+o/2-a/2),i+s+u<=f?t.$note.addClass("bottom").css("top",i+s):t.$note.addClass("top").css("top",i-u-6)}},e}),define("parts",["ajax","mustache","note","jquery","scrollIntoView","showLoading","jqExtend"],function(e,t,n){var r={callbacks:{onClickedRow:null,onClickedOperation:null}},i=function(e){this.opts=$.extend({},r,e||{}),this.init()};return i.prototype={init:function(){var e=this;e.initComponent(),e.bindEls(),e.bindAttr(),e.bindEvent()},initComponent:function(){var e=this;e.note=new n},bindEls:function(){var e=this;e.$parts=$("#parts"),e.$partsBody=$("#parts-body"),e.$price=$("#parts-price")},bindAttr:function(){var e=this;e.template=e.$partsBody.find("script").html(),e.timer1=null,e.timer2=null,e.clipboard=null},bindEvent:function(){var e=this;e.$partsBody.on("click","[data-field]",function(t){e.clickedRow(this,t)}),e.$partsBody.on("click","[data-action]",function(t){e.clickedOperation($(this),t)}),e.$partsBody.on("mouseenter","[data-action=price]",function(t){e.enterPrice(t)}).on("mouseleave","[data-action=price]",function(t){e.leavePrice(t)}),$(window).resize(function(){e.caculatePartsBody()})},clickedRow:function(e,t){var n=this,r=$(e),i=r.attr("data-callout");n.linkParts([i]),typeof n.opts.callbacks.onClickedRow=="function"&&n.opts.callbacks.onClickedRow.apply(null,[[i]]),t.stopPropagation()},clickedOperation:function(e,t){var n=this,r=e.attr("data-action"),i;switch(r){case"copy":if(window.clipboardData)i=e.closest("[data-field=row]").attr("data-partNo")||"",window.clipboardData.setData("Text",i);else{e.prev().select();try{document.execCommand("Copy")}catch(s){}}break;case"more":break;default:}typeof n.opts.callbacks.onClickedOperation=="function"&&n.opts.callbacks.onClickedOperation.apply(n,[e,r])},load:function(t){var n=this,t=n.buildParams(t);n.$parts.showLoading(),e.invoke({url:"/epc/model/getParts",type:"GET",data:t,cache:!1,complete:function(){n.$parts.hideLoading()},success:function(e){n.render(n.validateData(e))}})},buildParams:function(e){var t=this,n=$.getParameterByName("from"),r=$.getParameterByName("vinNo"),i=$.getParameterByName("vehicleCode");return n&&(e.from=n),r&&(e.vinNo=r),i&&(e.vehicleCode=i),e},validateData:function(e){var t=this;try{return window.clipboardData||document.execCommand("Copy")?e:t.buildData(e)}catch(n){return t.buildData(e)}},buildData:function(e){var t=this;for(var n=0;n<e.length;n++)e[n].copyTitle="点击后请立即按 Ctrl+C";return e},render:function(e){var n=this,r=t.render(n.template,{records:e});n.$partsBody.html(r),n.caculatePartsBody()},linkParts:function(e){var t=this,n=t.getCalloutSelector(e),r=t.$partsBody.find(n);t.oldRow&&t.oldRow.removeClass("checked"),t.oldRow=r.addClass("checked"),r.size()&&t.scrollIntoView(r)},highlightPartRows:function(e){var t=this,n=t.$partList.find("tr[data-partnumber='"+e+"']");t.oldRow&&t.oldRow.removeClass("checkedTr"),t.oldRow=n.addClass("checkedTr"),n.size()&&t.scrollIntoView(n)},getCalloutSelector:function(e){var t=this,n=[];for(var r=0;r<e.length;r++)n.push("div[data-callout='"+e[r]+"']");return n.join(",")},scrollIntoView:function(e){var t=this;e.scrollIntoView()},enterPrice:function(e){var t=this,n=$(e.target);clearTimeout(t.timer2),t.timer1=setTimeout(function(){t.$price.show().css({left:n.offset().left+25,top:n.offset().top-5}).find(".text").text(n.attr("data-price"))},500)},leavePrice:function(e){var t=this;clearTimeout(t.timer1),t.timer2=setTimeout(function(){t.$price.hide()},500)},caculatePartsBody:function(){var e=this,t=e.$partsBody.height(),n=e.$partsBody.children(),r=n.eq(0).height()||0,i=n.length*r,s=e.$parts.find(".part-name");s.removeClass("change-width"),t<i&&s.addClass("change-width")}},i}),define("layout",["jquery"],function(){var e=function(){this.init()};return e.prototype={init:function(){var e=this;e.bindEls(),e.bindEvent()},bindEls:function(){var e=this;e.$group=$("#group"),e.$legend=$("#legend-container"),e.$parts=$("#parts"),e.$groupToggleBar=$("#group-toggle-bar"),e.$partsToggleBar=$("#parts-toggle-bar"),e.$legendList=$("#legend-list-wrap"),e.$legendPartsWrap=$("#legend-parts-wrap")},bindEvent:function(){var e=this;e.$groupToggleBar.click(function(){e.toggleGroup()}),e.$partsToggleBar.click(function(){e.toggleParts()})},toggleGroup:function(){var e=this;e.$group.is(":visible")?(e.$group.addClass("hide"),e.$legendPartsWrap.addClass("collapse-group"),e.$groupToggleBar.addClass("collapse"),e.$legend.addClass("collapse-group")):(e.$group.removeClass("hide"),e.$legendPartsWrap.removeClass("collapse-group"),e.$groupToggleBar.removeClass("collapse"),e.$legend.removeClass("collapse-group"))},toggleParts:function(){var e=this;e.$parts.is(":visible")?(e.$parts.addClass("hide"),e.$partsToggleBar.addClass("collapse"),e.$legend.addClass("collapse-parts")):(e.$parts.removeClass("hide"),e.$partsToggleBar.removeClass("collapse"),e.$legend.removeClass("collapse-parts"))},showLegendList:function(){var e=this;e.$legendList.show(),e.$legendPartsWrap.hide()},showLegendParts:function(){var e=this;e.$legendList.hide(),e.$legendPartsWrap.show()}},e}),define("legendList",["mustache","jquery"],function(e){var t={callbacks:{onClickedImage:null}},n=function(e){this.opts=$.extend({},t,e||{}),this.init()};return n.prototype={init:function(){var e=this;e.bindEls(),e.bindAttr(),e.bindEvent()},bindEls:function(){var e=this;e.$legendList=$("#legend-list-wrap"),e.$legendListCont=$("#legend-list-cont")},bindAttr:function(){var e=this;e.template=e.$legendListCont.find("script").html()},bindEvent:function(){var e=this;e.$legendListCont.on("click","a",function(){e.gotoUsage($(this))})},render:function(t){var n=this,r=e.render(n.template,{records:t});n.$legendListCont.html(r)},gotoUsage:function(e){var t=this;typeof t.opts.callbacks.onClickedImage=="function"&&t.opts.callbacks.onClickedImage.apply(t,[e,e.attr("data-code")])}},n}),require(["ajax","group","crumbs","header","legend","parts","layout","legendList","mustache","dialog","jquery"],function(e,t,n,r,i,s,o,u,a,f){var l={init:function(){var e=this;e.bindEls(),e.buildAttrs(),e.bindEvent(),e.initComponent()},bindEls:function(){var e=this;e.$btnPrint=$("#btn-print"),e.$printProgressBar=$("#progress-bar"),e.$printProgressNum=$("#progress-text"),e.$printProgressSymbol=$("#progress-symbol"),e.$closeLayerBtn=$("#print-close-btn")},buildAttrs:function(){var e=this;e.percentArr=[]},bindEvent:function(){var e=this;e.$btnPrint.click(function(){e.openPrint()})},initComponent:function(){var e=this,a=!1,f;e.crumbs=new n({callbacks:{onFristRenderCrumbs:function(e){e.imageCode&&e.imageCode.length>0&&(a=!0,f=e.imageCode)},onRenderBefore:function(t,n){e.buildCrumbsData(t,n)}}}),e.header=new r,e.legend=new i({callbacks:{onSelectionCallout:function(t){e.parts.linkParts(t)}}}),e.parts=new s({callbacks:{onClickedRow:function(t){e.legend.linkLegend(t)},onClickedOperation:function(t,n){e.clickedPartsRow(t,n)}}}),e.layout=new o,e.legendList=new u({callbacks:{onClickedImage:function(t,n){e.replaceCrumbs("image",n),e.group.clickedLeaf(n)}}}),e.group=new t({callbacks:{onClickedLeaf:function(t,n){e.replaceCrumbs("image",n),e.loadLegendParts(t,n),e.$btnPrint.show()},onClickedGroup:function(t,n){e.crumbs.removeSingle("image"),e.loadLegendList(this,t),e.$btnPrint.hide()}}}),a?e.group.clickedLeaf(f):e.group.clickedFirstGroup()},clickedPartsRow:function(e,t){var n=this,r=e.closest("[data-field=row]");switch(t){case"buy":n.header.addToCart({partNo:r.attr("data-partNo")});break;case"supersession":n.header.openSupersession({partNo:r.attr("data-partNo")});break;case"applicability":n.header.openAdvancedFromApply(r);break;default:}},replaceCrumbs:function(e,t){var n=this;n.crumbs.replaceSingle({type:e,code:t})},loadLegendList:function(e,t){var n=this;n.layout.showLegendList(),n.legendList.render(e.getImagesEls(t))},loadLegendParts:function(e){var t=this,n=e.attr("data-name");t.layout.showLegendParts(),t.parts.load(t.crumbs.getCrumbsCode()),t.legend.setTitle(n),t.legend.loadLegend({svgFile:e.attr("data-svgFile"),gifFile:e.attr("data-gifFile")})},buildCrumbsData:function(e,t){var n=this,r=$.getParameterByName("from");r=="vin"?n.buildVinCrumbs(e,r):r=="vehicle"?n.buildVehicleCrumbs(e,r):n.buildModelCrumbs(e,r,t)},buildVinCrumbs:function(e,t){var n=this;e.splice(2),e.push({type:"vin",label:"VIN",text:$.getParameterByName("vinNo"),url:null,isShow:!0,click:!1})},buildVehicleCrumbs:function(e,t){var n=this;e.splice(2),e.push({type:"vehicle",label:"整车编码",text:$.getParameterByName("vehicleCode"),url:null,isShow:!0,click:!1})},buildModelCrumbs:function(e,t,n){var r=this,i=$.getParameterByName("modelCode"),s=$.getParameterByName("modelGroupCode"),o=$.getParameterByName("imageCode"),u,a;if(i.length==0&&s.length==0&&o.length==0){for(var f=0;f<n.length;f++)n[f].type=="model"&&(u=n[f]);for(var f=0;f<e.length;f++)e[f].type=="series"&&(series=e[f],a=f);e.splice(f,0,{type:"model",label:u.label,text:"全部车型",url:r.crumbs.getUrl("model",null),isShow:u.isShow})}},openPrint:function(){var t=this,n=t.group.getCheckedEl(),r=t.crumbs.getCrumbsCode(),i={seriesCode:r.seriesCode||"",modelGroupCode:r.modelGroupCode||"",modelCode:r.modelCode||"",imageCode:r.imageCode||""};t.renderNum=0,t.interrupted=!1,e.invoke({url:"/epc/model/print",type:"GET",contentType:"application/json",dataType:"json",data:i,beforeSend:function(){t.openPrintLayer()},success:function(e){t.printId=e.id,t.getProgressBar(e)},failed:function(e){t.$printProgressNum.text(e.msg||"打印出错"),t.$printProgressSymbol.text("")}})},getProgressBar:function(t){var n=this,r={id:n.printId},i=0;e.invoke({url:"/epc/model/getProgress",type:"POST",contentType:"application/json",dataType:"json",timeout:18e5,data:JSON.stringify(r),success:function(e){if(e.id!=n.printId)return;if(n.interrupted)return;if(!e.success)return;n.afterProgressSuccess(e)},failed:function(e){n.$printProgressNum.parent().text(e.msg||"打印出错")}})},afterProgressSuccess:function(e){var t=this;t.percentArr.push(e.percent),t.percentArr.length===1&&t.renderProgressBar(t.percentArr[0]);if(!e.completed)t.getProgressBar();else{if(e.interrupted)return;delayTime=t.percentArr.length===0?1:t.percentArr.length,e.data?setTimeout(function(){window.location.href=e.data},1e3*delayTime+200):setTimeout(function(){t.$printProgressNum.text("未知错误，请重新尝试"),t.$printProgressSymbol.text("")},1e3*delayTime),t.complete=!0}},beforeStopPrint:function(){var e=this;if(e.complete){e.closeLayer();return}new f({type:"warn",title:"提示",content:"关闭当前窗口会取消打印，确定关闭吗？",cancelBtn:!0,onConfirm:function(){e.stopPrint()}})},stopPrint:function(){var t=this,n={id:t.printId};e.invoke({url:"/epc/model/stopPrint",type:"DELETE",contentType:"application/json",dataType:"json",timeout:18e5,data:JSON.stringify(n),success:function(){t.interrupted=!0},complete:function(){t.closeLayer()}}),t.closeLayer()},openPrintLayer:function(){var e=this;$.showBlockUI({message:$("#print-dialog"),name:"print"}),e.$closeLayerBtn.off("click").click(function(){e.beforeStopPrint()})},closeLayer:function(){var e=this;$.hideBlockUI({message:$("#print-dialog"),name:"print",onUnblock:function(){e.$printProgressNum.text("0"),e.$printProgressSymbol.text("%"),e.$printProgressBar.css("width",0)}})},renderProgressBar:function(e){var t=this,n=1+parseInt(t.$printProgressNum.text()),r=e*100,i=1e3/(r-n+1);for(var s=n;s<=r;s++)(function(){var e=s;setTimeout(function(){t.$printProgressNum.text(e),e===r&&(t.percentArr.shift(),t.percentArr.length>0&&t.renderProgressBar(t.percentArr[0]))},i*(s-n))})();t.$printProgressBar.animate({width:r+"%"},1e3)}};l.init()}),define("app/model/main.js",function(){});